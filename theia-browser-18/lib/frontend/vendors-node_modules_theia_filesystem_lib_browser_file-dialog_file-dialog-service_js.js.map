{"version":3,"file":"vendors-node_modules_theia_filesystem_lib_browser_file-dialog_file-dialog-service_js.js","mappings":"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B,CAAC;;;;;;;;;;;;ACrJY;AACb,8CAA6C,EAAE,aAAa,EAAC;AAC7D,cAAc,mBAAO,CAAC,iDAAO;AAC7B,kBAAkB,mBAAO,CAAC,gEAAa;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA,0DAA0D,oBAAoB;AAC9E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,kBAAe;;;;;;;;;;;;ACvCF;AACb,8CAA6C,EAAE,aAAa,EAAC;AAC7D,cAAc,mBAAO,CAAC,iDAAO;AAC7B,eAAe,mBAAO,CAAC,0DAAU;AACjC;AACA;AACA,uCAAuC;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uCAAuC,kCAAkC;AACzE,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+DAA+D,6BAA6B,kBAAkB,IAAI;AAClH;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4FAA4F;AAC5F;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gDAAgD,2CAA2C;AAC3F;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kDAAkD,0BAA0B;AAC5E;AACA;AACA;AACA,CAAC;AACD,kBAAe;;;;;;;;;;;;ACrGF;AACb,8CAA6C,EAAE,aAAa,EAAC;AAC7D,kBAAkB,GAAG,wBAAwB,GAAG,iBAAiB;AACjE,iBAAiB;AACjB,wBAAwB;AACxB,kBAAkB;;;;;;;;;;;;ACLL;AACb,8CAA6C,EAAE,aAAa,E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AQ,YAAY,aAAa,SAAS,UAAU;AACpD,kCAAkC,SAAS;AAC3C;AACA;;AAEO;AACP;AACA;AACA;AACA,eAAe,oCAAoC;AACnD;AACA;AACA,CAAC;AACD;AACA;AACA,CAAC;;AAEM;AACP;AACA;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA,mBAAmB;AACnB;AACA;AACA;AACA;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB,MAAM;AACxB;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;;AAEA;AACO;AACP,2BAA2B,sBAAsB;AACjD;AACA;AACA;;AAEA;AACO;AACP,gDAAgD,QAAQ;AACxD,uCAAuC,QAAQ;AAC/C,uDAAuD,QAAQ;AAC/D;AACA;AACA;;AAEO;AACP,2EAA2E,OAAO;AAClF;AACA;AACA;AACA;AACA;AACA;AACA;;AAEO;AACP;AACA;;AAEO;AACP;AACA;AACA,wMAAwM,cAAc;AACtN,4BAA4B,sBAAsB;AAClD,wBAAwB,YAAY,sBAAsB,qCAAqC,2CAA2C,MAAM;AAChJ,0BAA0B,MAAM,iBAAiB,YAAY;AAC7D,qBAAqB;AACrB,4BAA4B;AAC5B,2BAA2B;AAC3B,0BAA0B;AAC1B;;AAEO;AACP;AACA,eAAe,6CAA6C,UAAU,sDAAsD,cAAc;AAC1I,wBAAwB,6BAA6B,oBAAoB,uCAAuC,kBAAkB;AAClI;;AAEO;AACP;AACA;AACA,yGAAyG,uFAAuF,cAAc;AAC9M,qBAAqB,8BAA8B,gDAAgD,wDAAwD;AAC3J,2CAA2C,sCAAsC,UAAU,mBAAmB,IAAI;AAClH;;AAEO;AACP,+BAA+B,uCAAuC,YAAY,KAAK,OAAO;AAC9F;AACA;;AAEA;AACA,wCAAwC,4BAA4B;AACpE,CAAC;AACD;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEO;AACP;AACA;AACA,qDAAqD,cAAc;AACnE;AACA;AACA;;AAEO;AACP,2CAA2C;AAC3C;;AAEO;AACP;AACA;AACA;AACA;;AAEO;AACP;AACA;AACA;AACA;AACA;;AAEO;AACP;AACA;AACA;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sCAAsC,MAAM,oBAAoB,YAAY;AAC5E,qBAAqB,8CAA8C;AACnE;AACA;AACA,qBAAqB,aAAa;AAClC;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uFAAuF,SAAS,gBAAgB;AAChH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEO;AACP;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;;AAEA,iEAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,EAAC","sources":["webpack:///./node_modules/@theia/core/shared/@phosphor/widgets/index.js?","webpack:///./node_modules/@theia/core/shared/@theia/application-package/lib/environment/index.js?","webpack:///./node_modules/@theia/core/shared/dompurify/index.js?","webpack:///./node_modules/@theia/core/shared/lodash.throttle/index.js?","webpack:///./node_modules/@theia/core/shared/react/index.js?","webpack:///./node_modules/@theia/filesystem/src/browser/file-dialog/file-dialog-hidden-files-renderer.tsx?","webpack:///./node_modules/@theia/filesystem/src/browser/file-dialog/file-dialog-model.ts?","webpack:///./node_modules/@theia/filesystem/src/browser/file-dialog/file-dialog-service.ts?","webpack:///./node_modules/@theia/filesystem/src/browser/file-dialog/file-dialog-tree-filters-renderer.tsx?","webpack:///./node_modules/@theia/filesystem/src/browser/file-dialog/file-dialog-tree.ts?","webpack:///./node_modules/@theia/filesystem/src/browser/file-dialog/file-dialog-widget.ts?","webpack:///./node_modules/@theia/filesystem/src/browser/file-dialog/file-dialog.ts?","webpack:///./node_modules/@theia/filesystem/src/browser/file-service.ts?","webpack:///./node_modules/@theia/filesystem/src/browser/file-tree/file-tree-container.ts?","webpack:///./node_modules/@theia/filesystem/src/browser/file-tree/file-tree-decorator-adapter.ts?","webpack:///./node_modules/@theia/filesystem/src/browser/file-tree/file-tree-label-provider.ts?","webpack:///./node_modules/@theia/filesystem/src/browser/file-tree/file-tree-model.ts?","webpack:///./node_modules/@theia/filesystem/src/browser/file-tree/file-tree-widget.tsx?","webpack:///./node_modules/@theia/filesystem/src/browser/file-tree/file-tree.ts?","webpack:///./node_modules/@theia/filesystem/src/browser/file-tree/index.ts?","webpack:///./node_modules/@theia/filesystem/src/browser/file-upload-service.ts?","webpack:///./node_modules/@theia/filesystem/src/browser/filesystem-preferences.ts?","webpack:///./node_modules/@theia/filesystem/src/browser/filesystem-watcher-error-handler.ts?","webpack:///./node_modules/@theia/filesystem/src/browser/location/index.ts?","webpack:///./node_modules/@theia/filesystem/src/browser/location/location-renderer.tsx?","webpack:///./node_modules/@theia/filesystem/src/browser/location/location-service.ts?","webpack:///./node_modules/@theia/filesystem/src/common/delegating-file-system-provider.ts?","webpack:///./node_modules/@theia/filesystem/src/common/file-upload.ts?","webpack:///./node_modules/@theia/filesystem/src/common/files.ts?","webpack:///./node_modules/@theia/filesystem/src/common/filesystem-utils.ts?","webpack:///./node_modules/@theia/filesystem/src/common/filesystem.ts?","webpack:///./node_modules/@theia/filesystem/src/common/index.ts?","webpack:///./node_modules/@theia/filesystem/src/common/io.ts?","webpack:///./node_modules/async-mutex/lib/Mutex.js?","webpack:///./node_modules/async-mutex/lib/Semaphore.js?","webpack:///./node_modules/async-mutex/lib/errors.js?","webpack:///./node_modules/async-mutex/lib/index.js?","webpack:///./node_modules/async-mutex/lib/tryAcquire.js?","webpack:///./node_modules/async-mutex/lib/withTimeout.js?","webpack:///./node_modules/tslib/tslib.es6.mjs?"],"sourcesContent":["module.exports = require('@phosphor/widgets');\n","module.exports = require('@theia/application-package/lib/environment');\n","module.exports = require('dompurify');\n","module.exports = require('lodash.throttle');\n","module.exports = require('react');\n","// *****************************************************************************\n// Copyright (C) 2023 Ericsson and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\nimport { nls } from '@theia/core';\nimport { ReactRenderer } from '@theia/core/lib/browser';\nimport { inject, postConstruct } from '@theia/core/shared/inversify';\nimport * as React from '@theia/core/shared/react';\nimport { FileDialogTree } from './file-dialog-tree';\n\nconst TOGGLE_HIDDEN_PANEL_CLASS = 'theia-ToggleHiddenPanel';\nconst TOGGLE_HIDDEN_CONTAINER_CLASS = 'theia-ToggleHiddenInputContainer';\nconst CHECKBOX_CLASS = 'theia-ToggleHiddenInputCheckbox';\n\nexport const HiddenFilesToggleRendererFactory = Symbol('HiddenFilesToggleRendererFactory');\nexport interface HiddenFilesToggleRendererFactory {\n    (fileDialogTree: FileDialogTree): FileDialogHiddenFilesToggleRenderer;\n}\nexport class FileDialogHiddenFilesToggleRenderer extends ReactRenderer {\n    @inject(FileDialogTree) fileDialogTree: FileDialogTree;\n\n    @postConstruct()\n    protected init(): void {\n        this.host.classList.add(TOGGLE_HIDDEN_PANEL_CLASS);\n        this.render();\n    }\n\n    protected readonly handleCheckboxChanged = (e: React.ChangeEvent<HTMLInputElement>): void => this.onCheckboxChanged(e);\n    protected override doRender(): React.ReactNode {\n        return (\n            <div className={TOGGLE_HIDDEN_CONTAINER_CLASS}>\n                {nls.localize('theia/fileDialog/showHidden', 'Show hidden files')}\n                <input\n                    type='checkbox'\n                    className={CHECKBOX_CLASS}\n                    onChange={this.handleCheckboxChanged}\n                />\n            </div>\n        );\n    }\n\n    protected onCheckboxChanged(e: React.ChangeEvent<HTMLInputElement>): void {\n        const { checked } = e.target;\n        this.fileDialogTree.showHidden = checked;\n        e.stopPropagation();\n    }\n}\n","// *****************************************************************************\n// Copyright (C) 2017 TypeFox and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\nimport { injectable, inject, postConstruct } from '@theia/core/shared/inversify';\nimport URI from '@theia/core/lib/common/uri';\nimport { Emitter, Event } from '@theia/core/lib/common';\nimport { TreeNode, SelectableTreeNode } from '@theia/core/lib/browser';\nimport { DirNode, FileNode, FileTreeModel, FileStatNode } from '../file-tree';\nimport { FileDialogTree } from './file-dialog-tree';\n\n@injectable()\nexport class FileDialogModel extends FileTreeModel {\n\n    @inject(FileDialogTree) override readonly tree: FileDialogTree;\n    protected readonly onDidOpenFileEmitter = new Emitter<void>();\n    protected _initialLocation: URI | undefined;\n    private _disableFileSelection: boolean = false;\n\n    @postConstruct()\n    protected override init(): void {\n        super.init();\n        this.toDispose.push(this.onDidOpenFileEmitter);\n    }\n\n    /**\n     * Returns the first valid location that was set by calling the `navigateTo` method. Once the initial location has a defined value, it will not change.\n     * Can be `undefined`.\n     */\n    get initialLocation(): URI | undefined {\n        return this._initialLocation;\n    }\n\n    set disableFileSelection(isSelectable: boolean) {\n        this._disableFileSelection = isSelectable;\n    }\n\n    override async navigateTo(nodeOrId: TreeNode | string | undefined): Promise<TreeNode | undefined> {\n        const result = await super.navigateTo(nodeOrId);\n        if (!this._initialLocation && FileStatNode.is(result)) {\n            this._initialLocation = result.uri;\n        }\n        return result;\n    }\n\n    get onDidOpenFile(): Event<void> {\n        return this.onDidOpenFileEmitter.event;\n    }\n\n    protected override doOpenNode(node: TreeNode): void {\n        if (FileNode.is(node)) {\n            this.onDidOpenFileEmitter.fire(undefined);\n        } else if (DirNode.is(node)) {\n            this.navigateTo(node);\n        } else {\n            super.doOpenNode(node);\n        }\n    }\n\n    override getNextSelectableNode(node: SelectableTreeNode | undefined = this.getFocusedNode()): SelectableTreeNode | undefined {\n        let nextNode: SelectableTreeNode | undefined = node;\n        do {\n            nextNode = super.getNextSelectableNode(nextNode);\n        } while (FileStatNode.is(nextNode) && !this.isFileStatNodeSelectable(nextNode));\n        return nextNode;\n    }\n\n    override getPrevSelectableNode(node: SelectableTreeNode | undefined = this.getFocusedNode()): SelectableTreeNode | undefined {\n        let prevNode: SelectableTreeNode | undefined = node;\n        do {\n            prevNode = super.getPrevSelectableNode(prevNode);\n        } while (FileStatNode.is(prevNode) && !this.isFileStatNodeSelectable(prevNode));\n        return prevNode;\n    }\n\n    private isFileStatNodeSelectable(node: FileStatNode): boolean {\n        return !(!node.fileStat.isDirectory && this._disableFileSelection);\n    }\n\n    canNavigateUpward(): boolean {\n        const treeRoot = this.tree.root;\n        return FileStatNode.is(treeRoot) && !treeRoot.uri.path.isRoot;\n    }\n}\n","// *****************************************************************************\n// Copyright (C) 2018 Ericsson and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\nimport { injectable, inject } from '@theia/core/shared/inversify';\nimport URI from '@theia/core/lib/common/uri';\nimport { MaybeArray, nls } from '@theia/core/lib/common';\nimport { LabelProvider } from '@theia/core/lib/browser';\nimport { FileStat } from '../../common/files';\nimport { DirNode } from '../file-tree';\nimport { OpenFileDialogFactory, OpenFileDialogProps, SaveFileDialogFactory, SaveFileDialogProps } from './file-dialog';\nimport { FileService } from '../file-service';\nimport { EnvVariablesServer } from '@theia/core/lib/common/env-variables';\nimport { UserWorkingDirectoryProvider } from '@theia/core/lib/browser/user-working-directory-provider';\n\nexport const FileDialogService = Symbol('FileDialogService');\nexport interface FileDialogService {\n\n    showOpenDialog(props: OpenFileDialogProps & { canSelectMany: true }, folder?: FileStat): Promise<MaybeArray<URI> | undefined>;\n    showOpenDialog(props: OpenFileDialogProps, folder?: FileStat): Promise<URI | undefined>;\n    showOpenDialog(props: OpenFileDialogProps, folder?: FileStat): Promise<MaybeArray<URI> | undefined>;\n\n    showSaveDialog(props: SaveFileDialogProps, folder?: FileStat): Promise<URI | undefined>\n\n}\n\n@injectable()\nexport class DefaultFileDialogService implements FileDialogService {\n\n    @inject(EnvVariablesServer)\n    protected readonly environments: EnvVariablesServer;\n\n    @inject(FileService)\n    protected readonly fileService: FileService;\n\n    @inject(OpenFileDialogFactory) protected readonly openFileDialogFactory: OpenFileDialogFactory;\n    @inject(LabelProvider) protected readonly labelProvider: LabelProvider;\n    @inject(SaveFileDialogFactory) protected readonly saveFileDialogFactory: SaveFileDialogFactory;\n    @inject(UserWorkingDirectoryProvider) protected readonly rootProvider: UserWorkingDirectoryProvider;\n\n    async showOpenDialog(props: OpenFileDialogProps & { canSelectMany: true }, folder?: FileStat): Promise<MaybeArray<URI> | undefined>;\n    async showOpenDialog(props: OpenFileDialogProps, folder?: FileStat): Promise<URI | undefined>;\n    async showOpenDialog(props: OpenFileDialogProps, folder?: FileStat): Promise<MaybeArray<URI> | undefined> {\n        const title = props.title || nls.localizeByDefault('Open');\n        const rootNode = await this.getRootNode(folder);\n        if (rootNode) {\n            const dialog = this.openFileDialogFactory(Object.assign(props, { title }));\n            await dialog.model.navigateTo(rootNode);\n            const value = await dialog.open();\n            if (value) {\n                if (!Array.isArray(value)) {\n                    return value.uri;\n                }\n                return value.map(node => node.uri);\n            }\n        }\n        return undefined;\n    }\n\n    async showSaveDialog(props: SaveFileDialogProps, folder?: FileStat): Promise<URI | undefined> {\n        const title = props.title || nls.localizeByDefault('Save');\n        const rootNode = await this.getRootNode(folder);\n        if (rootNode) {\n            const dialog = this.saveFileDialogFactory(Object.assign(props, { title }));\n            await dialog.model.navigateTo(rootNode);\n            return dialog.open();\n        }\n        return undefined;\n    }\n\n    protected async getRootNode(folderToOpen?: FileStat): Promise<DirNode | undefined> {\n        const folderExists = folderToOpen && await this.fileService.exists(folderToOpen.resource);\n        const folder = folderToOpen && folderExists ? folderToOpen : {\n            resource: await this.rootProvider.getUserWorkingDir(),\n            isDirectory: true\n        };\n        const folderUri = folder.resource;\n        const rootUri = folder.isDirectory ? folderUri : folderUri.parent;\n        try {\n            const rootStat = await this.fileService.resolve(rootUri);\n            return DirNode.createRoot(rootStat);\n        } catch { }\n        return undefined;\n    }\n}\n","// *****************************************************************************\n// Copyright (C) 2018 Red Hat, Inc. and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\nimport { ReactRenderer } from '@theia/core/lib/browser/widgets/react-renderer';\nimport { FileDialogTree } from './file-dialog-tree';\nimport * as React from '@theia/core/shared/react';\nimport { inject, injectable } from '@theia/core/shared/inversify';\n\nexport const FILE_TREE_FILTERS_LIST_CLASS = 'theia-FileTreeFiltersList';\n\n/**\n * A set of file filters that are used by the dialog. Each entry is a human readable label,\n * like \"TypeScript\", and an array of extensions, e.g.\n * ```ts\n * {\n *  'Images': ['png', 'jpg']\n *  'TypeScript': ['ts', 'tsx']\n * }\n * ```\n */\nexport class FileDialogTreeFilters {\n    [name: string]: string[];\n}\n\nexport const FileDialogTreeFiltersRendererFactory = Symbol('FileDialogTreeFiltersRendererFactory');\nexport interface FileDialogTreeFiltersRendererFactory {\n    (options: FileDialogTreeFiltersRendererOptions): FileDialogTreeFiltersRenderer;\n}\n\nexport const FileDialogTreeFiltersRendererOptions = Symbol('FileDialogTreeFiltersRendererOptions');\nexport interface FileDialogTreeFiltersRendererOptions {\n    suppliedFilters: FileDialogTreeFilters;\n    fileDialogTree: FileDialogTree;\n}\n\n@injectable()\nexport class FileDialogTreeFiltersRenderer extends ReactRenderer {\n\n    readonly appliedFilters: FileDialogTreeFilters;\n    readonly suppliedFilters: FileDialogTreeFilters;\n    readonly fileDialogTree: FileDialogTree;\n\n    constructor(\n        @inject(FileDialogTreeFiltersRendererOptions) readonly options: FileDialogTreeFiltersRendererOptions\n    ) {\n        super();\n        this.suppliedFilters = options.suppliedFilters;\n        this.fileDialogTree = options.fileDialogTree;\n        this.appliedFilters = { ...this.suppliedFilters, 'All Files': [], };\n    }\n\n    protected readonly handleFilterChanged = (e: React.ChangeEvent<HTMLSelectElement>) => this.onFilterChanged(e);\n\n    protected override doRender(): React.ReactNode {\n        if (!this.appliedFilters) {\n            return undefined;\n        }\n\n        const options = Object.keys(this.appliedFilters).map(value => this.renderLocation(value));\n        return <select className={'theia-select ' + FILE_TREE_FILTERS_LIST_CLASS} onChange={this.handleFilterChanged}>{...options}</select>;\n    }\n\n    protected renderLocation(value: string): React.ReactNode {\n        return <option value={value} key={value}>{value}</option>;\n    }\n\n    protected onFilterChanged(e: React.ChangeEvent<HTMLSelectElement>): void {\n        const locationList = this.locationList;\n        if (locationList) {\n            const value = locationList.value;\n            const filters = this.appliedFilters[value];\n            this.fileDialogTree.setFilter(filters);\n        }\n\n        e.preventDefault();\n        e.stopPropagation();\n    }\n\n    get locationList(): HTMLSelectElement | undefined {\n        const locationList = this.host.getElementsByClassName(FILE_TREE_FILTERS_LIST_CLASS)[0];\n        if (locationList instanceof HTMLSelectElement) {\n            return locationList;\n        }\n        return undefined;\n    }\n\n}\n","// *****************************************************************************\n// Copyright (C) 2018 Red Hat, Inc. and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\nimport { injectable } from '@theia/core/shared/inversify';\nimport { DirNode, FileTree } from '../file-tree';\nimport { TreeNode, CompositeTreeNode } from '@theia/core/lib/browser/tree/tree';\nimport { FileStat } from '../../common/files';\n\n@injectable()\nexport class FileDialogTree extends FileTree {\n    protected _showHidden = false;\n    set showHidden(show: boolean) {\n        this._showHidden = show;\n        this.refresh();\n    }\n\n    get showHidden(): boolean {\n        return this._showHidden;\n    }\n\n    protected isHiddenFile = (fileStat: FileStat): boolean => {\n        const { name } = fileStat;\n        const filename = name ?? '';\n        const isHidden = filename.startsWith('.');\n        return isHidden;\n    };\n    /**\n     * Extensions for files to be shown\n     */\n    protected fileExtensions: string[] = [];\n\n    /**\n     * Sets extensions for filtering files\n     *\n     * @param fileExtensions array of extensions\n     */\n    setFilter(fileExtensions: string[]): void {\n        this.fileExtensions = fileExtensions.slice();\n        this.refresh();\n    }\n\n    protected override async toNodes(fileStat: FileStat, parent: CompositeTreeNode): Promise<TreeNode[]> {\n        if (!fileStat.children) {\n            return [];\n        }\n\n        const result = await Promise.all(\n            fileStat.children\n                .filter(child => this.isVisible(child))\n                .map(child => this.toNode(child, parent))\n        );\n\n        return result.sort(DirNode.compare);\n    }\n\n    /**\n     * Determines whether file or folder can be shown\n     *\n     * @param fileStat resource to check\n     */\n    protected isVisible(fileStat: FileStat): boolean {\n        if (!this._showHidden && this.isHiddenFile(fileStat)) {\n            return false;\n        }\n        if (fileStat.isDirectory) {\n            return true;\n        }\n\n        if (this.fileExtensions.length === 0) {\n            return true;\n        }\n\n        return !this.fileExtensions.every(value => fileStat.resource.path.ext !== '.' + value);\n    }\n\n}\n","// *****************************************************************************\n// Copyright (C) 2017 TypeFox and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\nimport { injectable, inject } from '@theia/core/shared/inversify';\nimport { ContextMenuRenderer, NodeProps, TreeProps, TreeNode, SELECTED_CLASS, FOCUS_CLASS } from '@theia/core/lib/browser';\nimport { FileTreeWidget, FileStatNode } from '../file-tree';\nimport { FileDialogModel } from './file-dialog-model';\n\nexport const FILE_DIALOG_CLASS = 'theia-FileDialog';\nexport const NOT_SELECTABLE_CLASS = 'theia-mod-not-selectable';\n\n@injectable()\nexport class FileDialogWidget extends FileTreeWidget {\n\n    private _disableFileSelection: boolean = false;\n\n    constructor(\n        @inject(TreeProps) props: TreeProps,\n        @inject(FileDialogModel) override readonly model: FileDialogModel,\n        @inject(ContextMenuRenderer) contextMenuRenderer: ContextMenuRenderer\n    ) {\n        super(props, model, contextMenuRenderer);\n        this.addClass(FILE_DIALOG_CLASS);\n    }\n\n    set disableFileSelection(isSelectable: boolean) {\n        this._disableFileSelection = isSelectable;\n        this.model.disableFileSelection = isSelectable;\n    }\n\n    protected override createNodeAttributes(node: TreeNode, props: NodeProps): React.Attributes & React.HTMLAttributes<HTMLElement> {\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        const attr = super.createNodeAttributes(node, props) as any;\n        if (this.shouldDisableSelection(node)) {\n            const keys = Object.keys(attr);\n            keys.forEach(k => {\n                if (['className', 'style', 'title'].indexOf(k) < 0) {\n                    delete attr[k];\n                }\n            });\n        }\n        return attr;\n    }\n\n    protected override createNodeClassNames(node: TreeNode, props: NodeProps): string[] {\n        const classNames = super.createNodeClassNames(node, props);\n        if (this.shouldDisableSelection(node)) {\n            [SELECTED_CLASS, FOCUS_CLASS].forEach(name => {\n                const ind = classNames.indexOf(name);\n                if (ind >= 0) {\n                    classNames.splice(ind, 1);\n                }\n            });\n            classNames.push(NOT_SELECTABLE_CLASS);\n        }\n        return classNames;\n    }\n\n    protected shouldDisableSelection(node: TreeNode): boolean {\n        return FileStatNode.is(node) && !node.fileStat.isDirectory && this._disableFileSelection;\n    }\n}\n","// *****************************************************************************\n// Copyright (C) 2017 TypeFox and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\nimport { injectable, inject, postConstruct } from '@theia/core/shared/inversify';\nimport { Message } from '@theia/core/shared/@phosphor/messaging';\nimport { Disposable, MaybeArray, nls } from '@theia/core/lib/common';\nimport { AbstractDialog, DialogProps, setEnabled, createIconButton, Widget, codiconArray, Key, LabelProvider } from '@theia/core/lib/browser';\nimport { FileStatNode } from '../file-tree';\nimport { LocationListRenderer, LocationListRendererFactory } from '../location';\nimport { FileDialogModel } from './file-dialog-model';\nimport { FileDialogWidget } from './file-dialog-widget';\nimport { FileDialogTreeFiltersRenderer, FileDialogTreeFilters, FileDialogTreeFiltersRendererFactory } from './file-dialog-tree-filters-renderer';\nimport URI from '@theia/core/lib/common/uri';\nimport { Panel } from '@theia/core/shared/@phosphor/widgets';\nimport * as DOMPurify from '@theia/core/shared/dompurify';\nimport { FileDialogHiddenFilesToggleRenderer, HiddenFilesToggleRendererFactory } from './file-dialog-hidden-files-renderer';\n\nexport const OpenFileDialogFactory = Symbol('OpenFileDialogFactory');\nexport interface OpenFileDialogFactory {\n    (props: OpenFileDialogProps): OpenFileDialog;\n}\n\nexport const SaveFileDialogFactory = Symbol('SaveFileDialogFactory');\nexport interface SaveFileDialogFactory {\n    (props: SaveFileDialogProps): SaveFileDialog;\n}\n\nexport const SAVE_DIALOG_CLASS = 'theia-SaveFileDialog';\n\nexport const NAVIGATION_PANEL_CLASS = 'theia-NavigationPanel';\nexport const NAVIGATION_BACK_CLASS = 'theia-NavigationBack';\nexport const NAVIGATION_FORWARD_CLASS = 'theia-NavigationForward';\nexport const NAVIGATION_HOME_CLASS = 'theia-NavigationHome';\nexport const NAVIGATION_UP_CLASS = 'theia-NavigationUp';\nexport const NAVIGATION_LOCATION_LIST_PANEL_CLASS = 'theia-LocationListPanel';\n\nexport const FILTERS_PANEL_CLASS = 'theia-FiltersPanel';\nexport const FILTERS_LABEL_CLASS = 'theia-FiltersLabel';\nexport const FILTERS_LIST_PANEL_CLASS = 'theia-FiltersListPanel';\n\nexport const FILENAME_PANEL_CLASS = 'theia-FileNamePanel';\nexport const FILENAME_LABEL_CLASS = 'theia-FileNameLabel';\nexport const FILENAME_TEXTFIELD_CLASS = 'theia-FileNameTextField';\n\nexport const CONTROL_PANEL_CLASS = 'theia-ControlPanel';\nexport const TOOLBAR_ITEM_TRANSFORM_TIMEOUT = 100;\n\nexport class FileDialogProps extends DialogProps {\n\n    /**\n     * A set of file filters that are used by the dialog. Each entry is a human readable label,\n     * like \"TypeScript\", and an array of extensions, e.g.\n     * ```ts\n     * {\n     *  'Images': ['png', 'jpg']\n     *  'TypeScript': ['ts', 'tsx']\n     * }\n     * ```\n     */\n    filters?: FileDialogTreeFilters;\n\n    /**\n     * Determines if the dialog window should be modal.\n     * Defaults to `true`.\n     */\n    modal?: boolean;\n\n}\n\n@injectable()\nexport class OpenFileDialogProps extends FileDialogProps {\n\n    /**\n     * A human-readable string for the accept button.\n     */\n    openLabel?: string;\n\n    /**\n     * Allow to select files, defaults to `true`.\n     */\n    canSelectFiles?: boolean;\n\n    /**\n     * Allow to select folders, defaults to `false`.\n     */\n    canSelectFolders?: boolean;\n\n    /**\n     * Allow to select many files or folders.\n     */\n    canSelectMany?: boolean;\n\n}\n\n@injectable()\nexport class SaveFileDialogProps extends FileDialogProps {\n\n    /**\n     * A human-readable string for the accept button.\n     */\n    saveLabel?: string;\n\n    /**\n     * A human-readable value for the input.\n     */\n    inputValue?: string;\n\n}\n\nexport abstract class FileDialog<T> extends AbstractDialog<T> {\n\n    protected back: HTMLSpanElement;\n    protected forward: HTMLSpanElement;\n    protected home: HTMLSpanElement;\n    protected up: HTMLSpanElement;\n    protected locationListRenderer: LocationListRenderer;\n    protected treeFiltersRenderer: FileDialogTreeFiltersRenderer | undefined;\n    protected hiddenFilesToggleRenderer: FileDialogHiddenFilesToggleRenderer;\n    protected treePanel: Panel;\n\n    @inject(FileDialogWidget) readonly widget: FileDialogWidget;\n    @inject(LocationListRendererFactory) readonly locationListFactory: LocationListRendererFactory;\n    @inject(FileDialogTreeFiltersRendererFactory) readonly treeFiltersFactory: FileDialogTreeFiltersRendererFactory;\n    @inject(HiddenFilesToggleRendererFactory) readonly hiddenFilesToggleFactory: HiddenFilesToggleRendererFactory;\n\n    constructor(\n        @inject(FileDialogProps) override readonly props: FileDialogProps\n    ) {\n        super(props);\n    }\n\n    @postConstruct()\n    init(): void {\n        this.treePanel = new Panel();\n        this.treePanel.addWidget(this.widget);\n        this.toDispose.push(this.treePanel);\n        this.toDispose.push(this.model.onChanged(() => this.update()));\n        this.toDispose.push(this.model.onDidOpenFile(() => this.accept()));\n        this.toDispose.push(this.model.onSelectionChanged(() => this.update()));\n\n        const navigationPanel = document.createElement('div');\n        navigationPanel.classList.add(NAVIGATION_PANEL_CLASS);\n        this.contentNode.appendChild(navigationPanel);\n\n        navigationPanel.appendChild(this.back = createIconButton(...codiconArray('chevron-left', true)));\n        this.back.classList.add(NAVIGATION_BACK_CLASS);\n        this.back.title = nls.localize('theia/filesystem/dialog/navigateBack', 'Navigate Back');\n\n        navigationPanel.appendChild(this.forward = createIconButton(...codiconArray('chevron-right', true)));\n        this.forward.classList.add(NAVIGATION_FORWARD_CLASS);\n        this.forward.title = nls.localize('theia/filesystem/dialog/navigateForward', 'Navigate Forward');\n\n        navigationPanel.appendChild(this.home = createIconButton(...codiconArray('home', true)));\n        this.home.classList.add(NAVIGATION_HOME_CLASS);\n        this.home.title = nls.localize('theia/filesystem/dialog/initialLocation', 'Go To Initial Location');\n\n        navigationPanel.appendChild(this.up = createIconButton(...codiconArray('arrow-up', true)));\n        this.up.classList.add(NAVIGATION_UP_CLASS);\n        this.up.title = nls.localize('theia/filesystem/dialog/navigateUp', 'Navigate Up One Directory');\n\n        const locationListRendererHost = document.createElement('div');\n        this.locationListRenderer = this.locationListFactory({ model: this.model, host: locationListRendererHost });\n        this.toDispose.push(this.locationListRenderer);\n        this.locationListRenderer.host.classList.add(NAVIGATION_LOCATION_LIST_PANEL_CLASS);\n        navigationPanel.appendChild(this.locationListRenderer.host);\n\n        this.hiddenFilesToggleRenderer = this.hiddenFilesToggleFactory(this.widget.model.tree);\n        this.contentNode.appendChild(this.hiddenFilesToggleRenderer.host);\n\n        if (this.props.filters) {\n            this.treeFiltersRenderer = this.treeFiltersFactory({ suppliedFilters: this.props.filters, fileDialogTree: this.widget.model.tree });\n            const filters = Object.keys(this.props.filters);\n            if (filters.length) {\n                this.widget.model.tree.setFilter(this.props.filters[filters[0]]);\n            }\n        }\n    }\n\n    get model(): FileDialogModel {\n        return this.widget.model;\n    }\n\n    protected override onUpdateRequest(msg: Message): void {\n        super.onUpdateRequest(msg);\n        setEnabled(this.back, this.model.canNavigateBackward());\n        setEnabled(this.forward, this.model.canNavigateForward());\n        setEnabled(this.home, !!this.model.initialLocation\n            && !!this.model.location\n            && this.model.initialLocation.toString() !== this.model.location.toString());\n        setEnabled(this.up, this.model.canNavigateUpward());\n        this.locationListRenderer.render();\n\n        if (this.treeFiltersRenderer) {\n            this.treeFiltersRenderer.render();\n        }\n\n        this.widget.update();\n    }\n\n    protected override handleEnter(event: KeyboardEvent): boolean | void {\n        if (event.target instanceof HTMLTextAreaElement || this.targetIsDirectoryInput(event.target) || this.targetIsInputToggle(event.target)) {\n            return false;\n        }\n        this.accept();\n    }\n\n    protected override handleEscape(event: KeyboardEvent): boolean | void {\n        if (event.target instanceof HTMLTextAreaElement || this.targetIsDirectoryInput(event.target)) {\n            return false;\n        }\n        this.close();\n    }\n\n    protected targetIsDirectoryInput(target: EventTarget | null): boolean {\n        return target instanceof HTMLInputElement && target.classList.contains(LocationListRenderer.Styles.LOCATION_TEXT_INPUT_CLASS);\n    }\n\n    protected targetIsInputToggle(target: EventTarget | null): boolean {\n        return target instanceof HTMLSpanElement && target.classList.contains(LocationListRenderer.Styles.LOCATION_INPUT_TOGGLE_CLASS);\n    }\n\n    protected appendFiltersPanel(): void {\n        if (this.treeFiltersRenderer) {\n            const filtersPanel = document.createElement('div');\n            filtersPanel.classList.add(FILTERS_PANEL_CLASS);\n            this.contentNode.appendChild(filtersPanel);\n\n            const titlePanel = document.createElement('div');\n            titlePanel.innerHTML = DOMPurify.sanitize(nls.localize('theia/filesystem/format', 'Format:'));\n            titlePanel.classList.add(FILTERS_LABEL_CLASS);\n            filtersPanel.appendChild(titlePanel);\n\n            this.treeFiltersRenderer.host.classList.add(FILTERS_LIST_PANEL_CLASS);\n            filtersPanel.appendChild(this.treeFiltersRenderer.host);\n        }\n    }\n\n    protected override onAfterAttach(msg: Message): void {\n        Widget.attach(this.treePanel, this.contentNode);\n        this.toDisposeOnDetach.push(Disposable.create(() => {\n            Widget.detach(this.treePanel);\n            this.locationListRenderer.dispose();\n            if (this.treeFiltersRenderer) {\n                this.treeFiltersRenderer.dispose();\n            }\n        }));\n\n        this.appendFiltersPanel();\n\n        this.appendCloseButton(nls.localizeByDefault('Cancel'));\n        this.appendAcceptButton(this.getAcceptButtonLabel());\n\n        this.addKeyListener(this.back, Key.ENTER, () => {\n            this.addTransformEffectToIcon(this.back);\n            this.model.navigateBackward();\n        }, 'click');\n\n        this.addKeyListener(this.forward, Key.ENTER, () => {\n            this.addTransformEffectToIcon(this.forward);\n            this.model.navigateForward();\n        }, 'click');\n        this.addKeyListener(this.home, Key.ENTER, () => {\n            this.addTransformEffectToIcon(this.home);\n            if (this.model.initialLocation) {\n                this.model.location = this.model.initialLocation;\n            }\n        }, 'click');\n        this.addKeyListener(this.up, Key.ENTER, () => {\n            this.addTransformEffectToIcon(this.up);\n            if (this.model.location) {\n                this.model.location = this.model.location.parent;\n            }\n        }, 'click');\n        super.onAfterAttach(msg);\n    }\n\n    protected addTransformEffectToIcon(element: HTMLSpanElement): void {\n        const icon = element.getElementsByTagName('i')[0];\n        icon.classList.add('active');\n        setTimeout(() => icon.classList.remove('active'), TOOLBAR_ITEM_TRANSFORM_TIMEOUT);\n    }\n\n    protected abstract getAcceptButtonLabel(): string;\n\n    protected override onActivateRequest(msg: Message): void {\n        this.widget.activate();\n    }\n\n}\n\n@injectable()\nexport class OpenFileDialog extends FileDialog<MaybeArray<FileStatNode>> {\n\n    constructor(@inject(OpenFileDialogProps) override readonly props: OpenFileDialogProps) {\n        super(props);\n    }\n\n    @postConstruct()\n    override init(): void {\n        super.init();\n        const { props } = this;\n        if (props.canSelectFiles !== undefined) {\n            this.widget.disableFileSelection = !props.canSelectFiles;\n        }\n    }\n\n    protected getAcceptButtonLabel(): string {\n        return this.props.openLabel ? this.props.openLabel : nls.localizeByDefault('Open');\n    }\n\n    protected override isValid(value: MaybeArray<FileStatNode>): string {\n        if (value && !this.props.canSelectMany && value instanceof Array) {\n            return nls.localize('theia/filesystem/dialog/multipleItemMessage', 'You can select only one item');\n        }\n        return '';\n    }\n\n    get value(): MaybeArray<FileStatNode> {\n        if (this.widget.model.selectedFileStatNodes.length === 1) {\n            return this.widget.model.selectedFileStatNodes[0];\n        } else {\n            return this.widget.model.selectedFileStatNodes;\n        }\n    }\n\n    protected override async accept(): Promise<void> {\n        const selection = this.value;\n        if (!this.props.canSelectFolders\n            && !Array.isArray(selection)\n            && selection.fileStat.isDirectory) {\n            this.widget.model.openNode(selection);\n            return;\n        }\n        super.accept();\n    }\n}\n\n@injectable()\nexport class SaveFileDialog extends FileDialog<URI | undefined> {\n\n    protected fileNameField: HTMLInputElement | undefined;\n\n    @inject(LabelProvider)\n    protected readonly labelProvider: LabelProvider;\n\n    constructor(@inject(SaveFileDialogProps) override readonly props: SaveFileDialogProps) {\n        super(props);\n    }\n\n    @postConstruct()\n    override init(): void {\n        super.init();\n        const { widget } = this;\n        widget.addClass(SAVE_DIALOG_CLASS);\n    }\n\n    protected getAcceptButtonLabel(): string {\n        return this.props.saveLabel ? this.props.saveLabel : nls.localizeByDefault('Save');\n    }\n\n    protected override onUpdateRequest(msg: Message): void {\n        // Update file name field when changing a selection\n        if (this.fileNameField) {\n            if (this.widget.model.selectedFileStatNodes.length === 1) {\n                const node = this.widget.model.selectedFileStatNodes[0];\n                if (!node.fileStat.isDirectory) {\n                    this.fileNameField.value = this.labelProvider.getName(node);\n                }\n            } else {\n                this.fileNameField.value = '';\n            }\n        }\n\n        // Continue updating the dialog\n        super.onUpdateRequest(msg);\n    }\n\n    protected override isValid(value: URI | undefined): string | boolean {\n        if (this.fileNameField && this.fileNameField.value) {\n            return '';\n        }\n        return false;\n    }\n\n    get value(): URI | undefined {\n        if (this.fileNameField && this.widget.model.selectedFileStatNodes.length === 1) {\n            const node = this.widget.model.selectedFileStatNodes[0];\n\n            if (node.fileStat.isDirectory) {\n                return node.uri.resolve(this.fileNameField.value);\n            }\n\n            return node.uri.parent.resolve(this.fileNameField.value);\n        }\n\n        return undefined;\n    }\n\n    protected override onAfterAttach(msg: Message): void {\n        super.onAfterAttach(msg);\n\n        const fileNamePanel = document.createElement('div');\n        fileNamePanel.classList.add(FILENAME_PANEL_CLASS);\n        this.contentNode.appendChild(fileNamePanel);\n\n        const titlePanel = document.createElement('div');\n        titlePanel.innerHTML = DOMPurify.sanitize(nls.localize('theia/filesystem/dialog/name', 'Name:'));\n        titlePanel.classList.add(FILENAME_LABEL_CLASS);\n        fileNamePanel.appendChild(titlePanel);\n\n        this.fileNameField = document.createElement('input');\n        this.fileNameField.type = 'text';\n        this.fileNameField.spellcheck = false;\n        this.fileNameField.classList.add('theia-input', FILENAME_TEXTFIELD_CLASS);\n        this.fileNameField.value = this.props.inputValue || '';\n        fileNamePanel.appendChild(this.fileNameField);\n\n        this.fileNameField.onkeyup = () => this.validate();\n    }\n\n}\n","// *****************************************************************************\n// Copyright (C) 2020 TypeFox and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n// based on https://github.com/microsoft/vscode/blob/04c36be045a94fee58e5f8992d3e3fd980294a84/src/vs/platform/files/common/fileService.ts\n// and https://github.com/microsoft/vscode/blob/04c36be045a94fee58e5f8992d3e3fd980294a84/src/vs/workbench/services/textfile/browser/textFileService.ts\n// and https://github.com/microsoft/vscode/blob/04c36be045a94fee58e5f8992d3e3fd980294a84/src/vs/workbench/services/textfile/electron-browser/nativeTextFileService.ts\n// and https://github.com/microsoft/vscode/blob/04c36be045a94fee58e5f8992d3e3fd980294a84/src/vs/workbench/services/workingCopy/common/workingCopyFileService.ts\n// and https://github.com/microsoft/vscode/blob/04c36be045a94fee58e5f8992d3e3fd980294a84/src/vs/workbench/services/workingCopy/common/workingCopyFileOperationParticipant.ts\n\n/* eslint-disable max-len */\n/* eslint-disable @typescript-eslint/no-shadow */\n/* eslint-disable no-null/no-null */\n/* eslint-disable @typescript-eslint/tslint/config */\n/* eslint-disable @typescript-eslint/no-explicit-any */\n\nimport { injectable, inject, named, postConstruct } from '@theia/core/shared/inversify';\nimport URI from '@theia/core/lib/common/uri';\nimport { timeout, Deferred } from '@theia/core/lib/common/promise-util';\nimport { CancellationToken, CancellationTokenSource } from '@theia/core/lib/common/cancellation';\nimport { Disposable, DisposableCollection } from '@theia/core/lib/common/disposable';\nimport { WaitUntilEvent, Emitter, AsyncEmitter, Event } from '@theia/core/lib/common/event';\nimport { ContributionProvider } from '@theia/core/lib/common/contribution-provider';\nimport { TernarySearchTree } from '@theia/core/lib/common/ternary-search-tree';\nimport {\n    ensureFileSystemProviderError, etag, ETAG_DISABLED,\n    FileChangesEvent,\n    FileOperation, FileOperationError,\n    FileOperationEvent, FileOperationResult, FileSystemProviderCapabilities,\n    FileSystemProviderErrorCode, FileType, hasFileFolderCopyCapability, hasOpenReadWriteCloseCapability, hasReadWriteCapability,\n    CreateFileOptions, FileContent, FileStat, FileStatWithMetadata,\n    FileStreamContent, FileSystemProvider,\n    FileSystemProviderWithFileReadWriteCapability, FileSystemProviderWithOpenReadWriteCloseCapability,\n    ReadFileOptions, ResolveFileOptions, ResolveMetadataFileOptions,\n    Stat, WatchOptions, WriteFileOptions,\n    toFileOperationResult, toFileSystemProviderErrorCode,\n    ResolveFileResult, ResolveFileResultWithMetadata,\n    MoveFileOptions, CopyFileOptions, BaseStatWithMetadata, FileDeleteOptions, FileOperationOptions, hasAccessCapability, hasUpdateCapability,\n    hasFileReadStreamCapability, FileSystemProviderWithFileReadStreamCapability\n} from '../common/files';\nimport { BinaryBuffer, BinaryBufferReadable, BinaryBufferReadableStream, BinaryBufferReadableBufferedStream, BinaryBufferWriteableStream } from '@theia/core/lib/common/buffer';\nimport { ReadableStream, isReadableStream, isReadableBufferedStream, transform, consumeStream, peekStream, peekReadable, Readable } from '@theia/core/lib/common/stream';\nimport { LabelProvider } from '@theia/core/lib/browser/label-provider';\nimport { FileSystemPreferences } from './filesystem-preferences';\nimport { ProgressService } from '@theia/core/lib/common/progress-service';\nimport { DelegatingFileSystemProvider } from '../common/delegating-file-system-provider';\nimport type { TextDocumentContentChangeEvent } from '@theia/core/shared/vscode-languageserver-protocol';\nimport { EncodingRegistry } from '@theia/core/lib/browser/encoding-registry';\nimport { UTF8, UTF8_with_bom } from '@theia/core/lib/common/encodings';\nimport { EncodingService, ResourceEncoding, DecodeStreamResult } from '@theia/core/lib/common/encoding-service';\nimport { Mutable } from '@theia/core/lib/common/types';\nimport { readFileIntoStream } from '../common/io';\nimport { FileSystemWatcherErrorHandler } from './filesystem-watcher-error-handler';\nimport { FileSystemUtils } from '../common/filesystem-utils';\nimport { nls } from '@theia/core';\n\nexport interface FileOperationParticipant {\n\n    /**\n     * Participate in a file operation of a working copy. Allows to\n     * change the working copy before it is being saved to disk.\n     */\n    participate(\n        target: URI,\n        source: URI | undefined,\n        operation: FileOperation,\n        timeout: number,\n        token: CancellationToken\n    ): Promise<void>;\n}\n\nexport interface ReadEncodingOptions {\n\n    /**\n     * The optional encoding parameter allows to specify the desired encoding when resolving\n     * the contents of the file.\n     */\n    encoding?: string;\n\n    /**\n     * The optional guessEncoding parameter allows to guess encoding from content of the file.\n     */\n    autoGuessEncoding?: boolean;\n}\n\nexport interface WriteEncodingOptions {\n\n    /**\n     * The encoding to use when updating a file.\n     */\n    encoding?: string;\n\n    /**\n     * If set to true, will enforce the selected encoding and not perform any detection using BOMs.\n     */\n    overwriteEncoding?: boolean;\n}\n\nexport interface ReadTextFileOptions extends ReadEncodingOptions, ReadFileOptions {\n    /**\n     * The optional acceptTextOnly parameter allows to fail this request early if the file\n     * contents are not textual.\n     */\n    acceptTextOnly?: boolean;\n}\n\ninterface BaseTextFileContent extends BaseStatWithMetadata {\n\n    /**\n     * The encoding of the content if known.\n     */\n    encoding: string;\n}\n\nexport interface TextFileContent extends BaseTextFileContent {\n\n    /**\n     * The content of a text file.\n     */\n    value: string;\n}\n\nexport interface TextFileStreamContent extends BaseTextFileContent {\n\n    /**\n     * The line grouped content of a text file.\n     */\n    value: ReadableStream<string>;\n}\n\nexport interface CreateTextFileOptions extends WriteEncodingOptions, CreateFileOptions { }\n\nexport interface WriteTextFileOptions extends WriteEncodingOptions, WriteFileOptions { }\n\nexport interface UpdateTextFileOptions extends WriteEncodingOptions, WriteFileOptions {\n    readEncoding: string\n}\n\nexport interface UserFileOperationEvent extends WaitUntilEvent {\n\n    /**\n     * An identifier to correlate the operation through the\n     * different event types (before, after, error).\n     */\n    readonly correlationId: number;\n\n    /**\n     * The file operation that is taking place.\n     */\n    readonly operation: FileOperation;\n\n    /**\n     * The resource the event is about.\n     */\n    readonly target: URI;\n\n    /**\n     * A property that is defined for move operations.\n     */\n    readonly source?: URI;\n}\n\nexport const FileServiceContribution = Symbol('FileServiceContribution');\n\n/**\n * A {@link FileServiceContribution} can be used to add custom {@link FileSystemProvider}s.\n * For this, the contribution has to listen to the {@link FileSystemProviderActivationEvent} and register\n * the custom {@link FileSystemProvider}s according to the scheme when this event is fired.\n *\n * ### Example usage\n * ```ts\n * export class MyFileServiceContribution implements FileServiceContribution {\n *     registerFileSystemProviders(service: FileService): void {\n *         service.onWillActivateFileSystemProvider(event => {\n *             if (event.scheme === 'mySyncProviderScheme') {\n *                 service.registerProvider('mySyncProviderScheme', this.mySyncProvider);\n *             }\n *             if (event.scheme === 'myAsyncProviderScheme') {\n *                 event.waitUntil((async () => {\n *                     const myAsyncProvider = await this.createAsyncProvider();\n *                     service.registerProvider('myAsyncProviderScheme', myAsyncProvider);\n *                 })());\n *             }\n *         });\n *\n *     }\n *```\n */\nexport interface FileServiceContribution {\n    /**\n     * Register custom file system providers for the given {@link FileService}.\n     * @param service The file service for which the providers should be registered.\n     */\n    registerFileSystemProviders(service: FileService): void;\n}\n\n/**\n * Represents the `FileSystemProviderRegistration` event.\n * This event is fired by the {@link FileService} if a {@link FileSystemProvider} is\n * registered to or unregistered from the service.\n */\nexport interface FileSystemProviderRegistrationEvent {\n    /** `True` if a new provider has been registered, `false` if a provider has been unregistered. */\n    added: boolean;\n    /** The (uri) scheme for which the provider was (previously) registered */\n    scheme: string;\n    /** The affected file system provider for which this event was fired. */\n    provider?: FileSystemProvider;\n}\n\n/**\n * Represents the `FileSystemProviderCapabilitiesChange` event.\n * This event is fired by the {@link FileService} if the capabilities of one of its managed\n * {@link FileSystemProvider}s have changed.\n */\nexport interface FileSystemProviderCapabilitiesChangeEvent {\n    /** The affected file system provider for which this event was fired. */\n    provider: FileSystemProvider;\n    /** The (uri) scheme for which the provider is registered */\n    scheme: string;\n}\n\n/**\n * Represents the `FileSystemProviderActivation` event.\n * This event is fired by the {@link FileService} if it wants to activate the\n * {@link FileSystemProvider} for a specific scheme.\n */\nexport interface FileSystemProviderActivationEvent extends WaitUntilEvent {\n    /** The (uri) scheme for which the provider should be activated */\n    scheme: string;\n}\n\nexport const enum TextFileOperationResult {\n    FILE_IS_BINARY\n}\n\nexport class TextFileOperationError extends FileOperationError {\n\n    constructor(\n        message: string,\n        public textFileOperationResult: TextFileOperationResult,\n        override options?: ReadTextFileOptions & WriteTextFileOptions\n    ) {\n        super(message, FileOperationResult.FILE_OTHER_ERROR);\n        Object.setPrototypeOf(this, TextFileOperationError.prototype);\n    }\n\n}\n\n/**\n * The {@link FileService} is the common facade responsible for all interactions with file systems.\n * It manages all registered {@link FileSystemProvider}s and\n *  forwards calls to the responsible {@link FileSystemProvider}, determined by the scheme.\n * For additional documentation regarding the provided functions see also {@link FileSystemProvider}.\n */\n@injectable()\nexport class FileService {\n\n    private readonly BUFFER_SIZE = 64 * 1024;\n\n    @inject(LabelProvider)\n    protected readonly labelProvider: LabelProvider;\n\n    @inject(FileSystemPreferences)\n    protected readonly preferences: FileSystemPreferences;\n\n    @inject(ProgressService)\n    protected readonly progressService: ProgressService;\n\n    @inject(EncodingRegistry)\n    protected readonly encodingRegistry: EncodingRegistry;\n\n    @inject(EncodingService)\n    protected readonly encodingService: EncodingService;\n\n    @inject(ContributionProvider) @named(FileServiceContribution)\n    protected readonly contributions: ContributionProvider<FileServiceContribution>;\n\n    @inject(FileSystemWatcherErrorHandler)\n    protected readonly watcherErrorHandler: FileSystemWatcherErrorHandler;\n\n    @postConstruct()\n    protected init(): void {\n        for (const contribution of this.contributions.getContributions()) {\n            contribution.registerFileSystemProviders(this);\n        }\n    }\n\n    // #region Events\n\n    private correlationIds = 0;\n\n    private readonly onWillRunUserOperationEmitter = new AsyncEmitter<UserFileOperationEvent>();\n    /**\n     * An event that is emitted when file operation is being performed.\n     * This event is triggered by user gestures.\n     */\n    readonly onWillRunUserOperation = this.onWillRunUserOperationEmitter.event;\n\n    private readonly onDidFailUserOperationEmitter = new AsyncEmitter<UserFileOperationEvent>();\n    /**\n     * An event that is emitted when file operation is failed.\n     * This event is triggered by user gestures.\n     */\n    readonly onDidFailUserOperation = this.onDidFailUserOperationEmitter.event;\n\n    private readonly onDidRunUserOperationEmitter = new AsyncEmitter<UserFileOperationEvent>();\n    /**\n     * An event that is emitted when file operation is finished.\n     * This event is triggered by user gestures.\n     */\n    readonly onDidRunUserOperation = this.onDidRunUserOperationEmitter.event;\n\n    // #endregion\n\n    // #region File System Provider\n\n    private onDidChangeFileSystemProviderRegistrationsEmitter = new Emitter<FileSystemProviderRegistrationEvent>();\n    readonly onDidChangeFileSystemProviderRegistrations = this.onDidChangeFileSystemProviderRegistrationsEmitter.event;\n\n    private onWillActivateFileSystemProviderEmitter = new Emitter<FileSystemProviderActivationEvent>();\n    /**\n     * See `FileServiceContribution.registerProviders`.\n     */\n    readonly onWillActivateFileSystemProvider = this.onWillActivateFileSystemProviderEmitter.event;\n\n    private onDidChangeFileSystemProviderCapabilitiesEmitter = new Emitter<FileSystemProviderCapabilitiesChangeEvent>();\n    readonly onDidChangeFileSystemProviderCapabilities = this.onDidChangeFileSystemProviderCapabilitiesEmitter.event;\n\n    private readonly providers = new Map<string, FileSystemProvider>();\n    private readonly activations = new Map<string, Promise<FileSystemProvider>>();\n\n    /**\n     * Registers a new {@link FileSystemProvider} for the given scheme.\n     * @param scheme The (uri) scheme for which the provider should be registered.\n     * @param provider The file system provider that should be registered.\n     *\n     * @returns A `Disposable` that can be invoked to unregister the given provider.\n     */\n    registerProvider(scheme: string, provider: FileSystemProvider): Disposable {\n        if (this.providers.has(scheme)) {\n            throw new Error(`A filesystem provider for the scheme '${scheme}' is already registered.`);\n        }\n\n        this.providers.set(scheme, provider);\n        this.onDidChangeFileSystemProviderRegistrationsEmitter.fire({ added: true, scheme, provider });\n\n        const providerDisposables = new DisposableCollection();\n        providerDisposables.push(provider.onDidChangeFile(changes => this.onDidFilesChangeEmitter.fire(new FileChangesEvent(changes))));\n        providerDisposables.push(provider.onFileWatchError(() => this.handleFileWatchError()));\n        providerDisposables.push(provider.onDidChangeCapabilities(() => this.onDidChangeFileSystemProviderCapabilitiesEmitter.fire({ provider, scheme })));\n\n        return Disposable.create(() => {\n            this.onDidChangeFileSystemProviderRegistrationsEmitter.fire({ added: false, scheme, provider });\n            this.providers.delete(scheme);\n\n            providerDisposables.dispose();\n        });\n    }\n\n    /**\n     * Try to activate the registered provider for the given scheme\n     * @param scheme  The uri scheme for which the responsible provider should be activated.\n     *\n     * @returns A promise of the activated file system provider. Only resolves if a provider is available for this scheme, gets rejected otherwise.\n     */\n    async activateProvider(scheme: string): Promise<FileSystemProvider> {\n        let provider = this.providers.get(scheme);\n        if (provider) {\n            return provider;\n        }\n        let activation = this.activations.get(scheme);\n        if (!activation) {\n            const deferredActivation = new Deferred<FileSystemProvider>();\n            this.activations.set(scheme, activation = deferredActivation.promise);\n            WaitUntilEvent.fire(this.onWillActivateFileSystemProviderEmitter, { scheme }).then(() => {\n                provider = this.providers.get(scheme);\n                if (!provider) {\n                    const error = new Error();\n                    error.name = 'ENOPRO';\n                    error.message = `No file system provider found for scheme ${scheme}`;\n                    throw error;\n                } else {\n                    deferredActivation.resolve(provider);\n                }\n            }).catch(e => deferredActivation.reject(e));\n        }\n        return activation;\n    }\n\n    /**\n     * Tests if the service (i.e. any of its registered {@link FileSystemProvider}s) can handle the given resource.\n     * @param resource `URI` of the resource to test.\n     *\n     * @returns `true` if the resource can be handled, `false` otherwise.\n     */\n    canHandleResource(resource: URI): boolean {\n        return this.providers.has(resource.scheme);\n    }\n\n    /**\n     * Tests if the service (i.e the {@link FileSystemProvider} registered for the given uri scheme) provides the given capability.\n     * @param resource `URI` of the resource to test.\n     * @param capability The required capability.\n     *\n     * @returns `true` if the resource can be handled and the required capability can be provided.\n     */\n    hasCapability(resource: URI, capability: FileSystemProviderCapabilities): boolean {\n        const provider = this.providers.get(resource.scheme);\n\n        return !!(provider && (provider.capabilities & capability));\n    }\n\n    /**\n     * List the schemes and capabilities for registered file system providers\n     */\n    listCapabilities(): { scheme: string; capabilities: FileSystemProviderCapabilities }[] {\n        return Array.from(this.providers.entries()).map(([scheme, provider]) => ({\n            scheme,\n            capabilities: provider.capabilities\n        }));\n    }\n\n    protected async withProvider(resource: URI): Promise<FileSystemProvider> {\n        // Assert path is absolute\n        if (!resource.path.isAbsolute) {\n            throw new FileOperationError(nls.localizeByDefault(\"Unable to resolve filesystem provider with relative file path '{0}'\", this.resourceForError(resource)), FileOperationResult.FILE_INVALID_PATH);\n        }\n\n        return this.activateProvider(resource.scheme);\n    }\n\n    private async withReadProvider(resource: URI): Promise<FileSystemProviderWithFileReadWriteCapability | FileSystemProviderWithOpenReadWriteCloseCapability> {\n        const provider = await this.withProvider(resource);\n\n        if (hasOpenReadWriteCloseCapability(provider) || hasReadWriteCapability(provider)) {\n            return provider;\n        }\n\n        throw new Error(`Filesystem provider for scheme '${resource.scheme}' neither has FileReadWrite, FileReadStream nor FileOpenReadWriteClose capability which is needed for the read operation.`);\n    }\n\n    private async withWriteProvider(resource: URI): Promise<FileSystemProviderWithFileReadWriteCapability | FileSystemProviderWithOpenReadWriteCloseCapability> {\n        const provider = await this.withProvider(resource);\n        if (hasOpenReadWriteCloseCapability(provider) || hasReadWriteCapability(provider)) {\n            return provider;\n        }\n\n        throw new Error(`Filesystem provider for scheme '${resource.scheme}' neither has FileReadWrite nor FileOpenReadWriteClose capability which is needed for the write operation.`);\n    }\n\n    // #endregion\n\n    private onDidRunOperationEmitter = new Emitter<FileOperationEvent>();\n    /**\n     * An event that is emitted when operation is finished.\n     * This event is triggered by user gestures and programmatically.\n     */\n    readonly onDidRunOperation = this.onDidRunOperationEmitter.event;\n\n    /**\n     * Try to resolve file information and metadata for the given resource.\n     * @param resource `URI` of the resource that should be resolved.\n     * @param options  Options to customize the resolvement process.\n     *\n     * @return A promise that resolves if the resource could be successfully resolved.\n     */\n    resolve(resource: URI, options: ResolveMetadataFileOptions): Promise<FileStatWithMetadata>;\n    resolve(resource: URI, options?: ResolveFileOptions | undefined): Promise<FileStat>;\n    async resolve(resource: any, options?: any) {\n        try {\n            return await this.doResolveFile(resource, options);\n        } catch (error) {\n\n            // Specially handle file not found case as file operation result\n            if (toFileSystemProviderErrorCode(error) === FileSystemProviderErrorCode.FileNotFound) {\n                throw new FileOperationError(nls.localizeByDefault(\"Unable to resolve nonexistent file '{0}'\", this.resourceForError(resource)), FileOperationResult.FILE_NOT_FOUND);\n            }\n\n            // Bubble up any other error as is\n            throw ensureFileSystemProviderError(error);\n        }\n    }\n\n    private async doResolveFile(resource: URI, options: ResolveMetadataFileOptions): Promise<FileStatWithMetadata>;\n    private async doResolveFile(resource: URI, options?: ResolveFileOptions): Promise<FileStat>;\n    private async doResolveFile(resource: URI, options?: ResolveFileOptions): Promise<FileStat> {\n        const provider = await this.withProvider(resource);\n\n        const resolveTo = options?.resolveTo;\n        const resolveSingleChildDescendants = options?.resolveSingleChildDescendants;\n        const resolveMetadata = options?.resolveMetadata;\n\n        const stat = await provider.stat(resource);\n\n        let trie: TernarySearchTree<URI, boolean> | undefined;\n\n        return this.toFileStat(provider, resource, stat, undefined, !!resolveMetadata, (stat, siblings) => {\n\n            // lazy trie to check for recursive resolving\n            if (!trie) {\n                trie = TernarySearchTree.forUris<true>(!!(provider.capabilities & FileSystemProviderCapabilities.PathCaseSensitive));\n                trie.set(resource, true);\n                if (Array.isArray(resolveTo) && resolveTo.length) {\n                    resolveTo.forEach(uri => trie!.set(uri, true));\n                }\n            }\n\n            // check for recursive resolving\n            if (Boolean(trie.findSuperstr(stat.resource) || trie.get(stat.resource))) {\n                return true;\n            }\n\n            // check for resolving single child folders\n            if (stat.isDirectory && resolveSingleChildDescendants) {\n                return siblings === 1;\n            }\n\n            return false;\n        });\n    }\n\n    private async toFileStat(provider: FileSystemProvider, resource: URI, stat: Stat | { type: FileType } & Partial<Stat>, siblings: number | undefined, resolveMetadata: boolean, recurse: (stat: FileStat, siblings?: number) => boolean): Promise<FileStat>;\n    private async toFileStat(provider: FileSystemProvider, resource: URI, stat: Stat, siblings: number | undefined, resolveMetadata: true, recurse: (stat: FileStat, siblings?: number) => boolean): Promise<FileStatWithMetadata>;\n    private async toFileStat(provider: FileSystemProvider, resource: URI, stat: Stat | { type: FileType } & Partial<Stat>, siblings: number | undefined, resolveMetadata: boolean, recurse: (stat: FileStat, siblings?: number) => boolean): Promise<FileStat> {\n        const fileStat = FileStat.fromStat(resource, stat);\n\n        // check to recurse for directories\n        if (fileStat.isDirectory && recurse(fileStat, siblings)) {\n            try {\n                const entries = await provider.readdir(resource);\n                const resolvedEntries = await Promise.all(entries.map(async ([name, type]) => {\n                    try {\n                        const childResource = resource.resolve(name);\n                        const childStat = resolveMetadata ? await provider.stat(childResource) : { type };\n\n                        return await this.toFileStat(provider, childResource, childStat, entries.length, resolveMetadata, recurse);\n                    } catch (error) {\n                        console.trace(error);\n\n                        return null; // can happen e.g. due to permission errors\n                    }\n                }));\n\n                // make sure to get rid of null values that signal a failure to resolve a particular entry\n                fileStat.children = resolvedEntries.filter(e => !!e) as FileStat[];\n            } catch (error) {\n                console.trace(error);\n\n                fileStat.children = []; // gracefully handle errors, we may not have permissions to read\n            }\n\n            return fileStat;\n        }\n\n        return fileStat;\n    }\n\n    /**\n     * Try to resolve file information and metadata for all given resource.\n     * @param toResolve An array of all the resources (and corresponding resolvement options) that should be resolved.\n     *\n     * @returns A promise of all resolved resources. The promise is not rejected if any of the given resources cannot be resolved.\n     * Instead this is reflected with the `success` flag of the corresponding {@link ResolveFileResult}.\n     */\n    async resolveAll(toResolve: { resource: URI, options?: ResolveFileOptions }[]): Promise<ResolveFileResult[]>;\n    async resolveAll(toResolve: { resource: URI, options: ResolveMetadataFileOptions }[]): Promise<ResolveFileResultWithMetadata[]>;\n    async resolveAll(toResolve: { resource: URI; options?: ResolveFileOptions; }[]): Promise<ResolveFileResult[]> {\n        return Promise.all(toResolve.map(async entry => {\n            try {\n                return { stat: await this.doResolveFile(entry.resource, entry.options), success: true };\n            } catch (error) {\n                console.trace(error);\n\n                return { stat: undefined, success: false };\n            }\n        }));\n    }\n\n    /**\n     * Tests if the given resource exists in the filesystem.\n     * @param resource `URI` of the resource which should be tested.\n     * @throws Will throw an error if no {@link FileSystemProvider} is registered for the given resource.\n     *\n     * @returns A promise that resolves to `true` if the resource exists.\n     */\n    async exists(resource: URI): Promise<boolean> {\n        const provider = await this.withProvider(resource);\n\n        try {\n            const stat = await provider.stat(resource);\n\n            return !!stat;\n        } catch (error) {\n            return false;\n        }\n    }\n\n    /**\n     * Tests a user's permissions for the given resource.\n     * @param resource `URI` of the resource which should be tested.\n     * @param mode An optional integer that specifies the accessibility checks to be performed.\n     *      Check `FileAccess.Constants` for possible values of mode.\n     *      It is possible to create a mask consisting of the bitwise `OR` of two or more values (e.g. FileAccess.Constants.W_OK | FileAccess.Constants.R_OK).\n     *      If `mode` is not defined, `FileAccess.Constants.F_OK` will be used instead.\n     */\n    async access(resource: URI, mode?: number): Promise<boolean> {\n        const provider = await this.withProvider(resource);\n\n        if (!hasAccessCapability(provider)) {\n            return false;\n        }\n        try {\n            await provider.access(resource, mode);\n            return true;\n        } catch (error) {\n            return false;\n        }\n    }\n\n    /**\n     * Resolves the fs path of the given URI.\n     *\n     * USE WITH CAUTION: You should always prefer URIs to paths if possible, as they are\n     * portable and platform independent. Paths should only be used in cases you directly\n     * interact with the OS, e.g. when running a command on the shell.\n     *\n     * If you need to display human readable simple or long names then use `LabelProvider` instead.\n     * @param resource `URI` of the resource that should be resolved.\n     * @throws Will throw an error if no {@link FileSystemProvider} is registered for the given resource.\n     *\n     * @returns A promise of the resolved fs path.\n     */\n    async fsPath(resource: URI): Promise<string> {\n        const provider = await this.withProvider(resource);\n\n        if (!hasAccessCapability(provider)) {\n            return resource.path.toString();\n        }\n        return provider.fsPath(resource);\n    }\n\n    // #region Text File Reading/Writing\n\n    async create(resource: URI, value?: string | Readable<string>, options?: CreateTextFileOptions): Promise<FileStatWithMetadata> {\n        if (options?.fromUserGesture === false) {\n            return this.doCreate(resource, value, options);\n        }\n        await this.runFileOperationParticipants(resource, undefined, FileOperation.CREATE);\n\n        const event = { correlationId: this.correlationIds++, operation: FileOperation.CREATE, target: resource };\n        await this.onWillRunUserOperationEmitter.fire(event);\n\n        let stat: FileStatWithMetadata;\n        try {\n            stat = await this.doCreate(resource, value, options);\n        } catch (error) {\n            await this.onDidFailUserOperationEmitter.fire(event);\n            throw error;\n        }\n\n        await this.onDidRunUserOperationEmitter.fire(event);\n\n        return stat;\n    }\n\n    protected async doCreate(resource: URI, value?: string | Readable<string>, options?: CreateTextFileOptions): Promise<FileStatWithMetadata> {\n        const encoding = await this.getWriteEncoding(resource, options);\n        const encoded = await this.encodingService.encodeStream(value, encoding);\n        return this.createFile(resource, encoded, options);\n    }\n\n    async write(resource: URI, value: string | Readable<string>, options?: WriteTextFileOptions): Promise<FileStatWithMetadata & { encoding: string }> {\n        const encoding = await this.getWriteEncoding(resource, options);\n        const encoded = await this.encodingService.encodeStream(value, encoding);\n        return Object.assign(await this.writeFile(resource, encoded, options), { encoding: encoding.encoding });\n    }\n\n    async read(resource: URI, options?: ReadTextFileOptions): Promise<TextFileContent> {\n        const [bufferStream, decoder] = await this.doRead(resource, {\n            ...options,\n            // optimization: since we know that the caller does not\n            // care about buffering, we indicate this to the reader.\n            // this reduces all the overhead the buffered reading\n            // has (open, read, close) if the provider supports\n            // unbuffered reading.\n            preferUnbuffered: true\n        });\n\n        return {\n            ...bufferStream,\n            encoding: decoder.detected.encoding || UTF8,\n            value: await consumeStream(decoder.stream, strings => strings.join(''))\n        };\n    }\n\n    async readStream(resource: URI, options?: ReadTextFileOptions): Promise<TextFileStreamContent> {\n        const [bufferStream, decoder] = await this.doRead(resource, options);\n\n        return {\n            ...bufferStream,\n            encoding: decoder.detected.encoding || UTF8,\n            value: decoder.stream\n        };\n    }\n\n    private async doRead(resource: URI, options?: ReadTextFileOptions & { preferUnbuffered?: boolean }): Promise<[FileStreamContent, DecodeStreamResult]> {\n        options = this.resolveReadOptions(options);\n\n        // read stream raw (either buffered or unbuffered)\n        let bufferStream: FileStreamContent;\n        if (options?.preferUnbuffered) {\n            const content = await this.readFile(resource, options);\n            bufferStream = {\n                ...content,\n                value: BinaryBufferReadableStream.fromBuffer(content.value)\n            };\n        } else {\n            bufferStream = await this.readFileStream(resource, options);\n        }\n\n        const decoder = await this.encodingService.decodeStream(bufferStream.value, {\n            guessEncoding: options.autoGuessEncoding,\n            overwriteEncoding: detectedEncoding => this.getReadEncoding(resource, options, detectedEncoding)\n        });\n\n        // validate binary\n        if (options?.acceptTextOnly && decoder.detected.seemsBinary) {\n            throw new TextFileOperationError(nls.localizeByDefault('File seems to be binary and cannot be opened as text'), TextFileOperationResult.FILE_IS_BINARY, options);\n        }\n\n        return [bufferStream, decoder];\n    }\n\n    protected resolveReadOptions(options?: ReadTextFileOptions): ReadTextFileOptions {\n        options = {\n            ...options,\n            autoGuessEncoding: typeof options?.autoGuessEncoding === 'boolean' ? options.autoGuessEncoding : this.preferences['files.autoGuessEncoding']\n        };\n        const limits: Mutable<ReadTextFileOptions['limits']> = options.limits = options.limits || {};\n        if (typeof limits.size !== 'number') {\n            limits.size = this.preferences['files.maxFileSizeMB'] * 1024 * 1024;\n        }\n        return options;\n    }\n\n    async update(resource: URI, changes: TextDocumentContentChangeEvent[], options: UpdateTextFileOptions): Promise<FileStatWithMetadata & { encoding: string }> {\n        const provider = this.throwIfFileSystemIsReadonly(await this.withWriteProvider(resource), resource);\n        try {\n            await this.validateWriteFile(provider, resource, options);\n            if (hasUpdateCapability(provider)) {\n                const encoding = await this.getEncodingForResource(resource, options ? options.encoding : undefined);;\n                const stat = await provider.updateFile(resource, changes, {\n                    readEncoding: options.readEncoding,\n                    writeEncoding: encoding,\n                    overwriteEncoding: options.overwriteEncoding || false\n                });\n                return Object.assign(FileStat.fromStat(resource, stat), { encoding: stat.encoding });\n            } else {\n                throw new Error('incremental file update is not supported');\n            }\n        } catch (error) {\n            this.rethrowAsFileOperationError(\"Unable to write file '{0}' ({1})\", resource, error, options);\n        }\n    }\n\n    // #endregion\n\n    // #region File Reading/Writing\n\n    async createFile(resource: URI, bufferOrReadableOrStream: BinaryBuffer | BinaryBufferReadable | BinaryBufferReadableStream = BinaryBuffer.fromString(''), options?: CreateFileOptions): Promise<FileStatWithMetadata> {\n\n        // validate overwrite\n        if (!options?.overwrite && await this.exists(resource)) {\n            throw new FileOperationError(nls.localizeByDefault(\"Unable to create file '{0}' that already exists when overwrite flag is not set\", this.resourceForError(resource)), FileOperationResult.FILE_MODIFIED_SINCE, options);\n        }\n\n        // do write into file (this will create it too)\n        const fileStat = await this.writeFile(resource, bufferOrReadableOrStream);\n\n        // events\n        this.onDidRunOperationEmitter.fire(new FileOperationEvent(resource, FileOperation.CREATE, fileStat));\n\n        return fileStat;\n    }\n\n    async writeFile(resource: URI, bufferOrReadableOrStream: BinaryBuffer | BinaryBufferReadable | BinaryBufferReadableStream, options?: WriteFileOptions): Promise<FileStatWithMetadata> {\n        const provider = this.throwIfFileSystemIsReadonly(await this.withWriteProvider(resource), resource);\n\n        try {\n\n            // validate write\n            const stat = await this.validateWriteFile(provider, resource, options);\n\n            // mkdir recursively as needed\n            if (!stat) {\n                await this.mkdirp(provider, resource.parent);\n            }\n\n            // optimization: if the provider has unbuffered write capability and the data\n            // to write is a Readable, we consume up to 3 chunks and try to write the data\n            // unbuffered to reduce the overhead. If the Readable has more data to provide\n            // we continue to write buffered.\n            let bufferOrReadableOrStreamOrBufferedStream: BinaryBuffer | BinaryBufferReadable | BinaryBufferReadableStream | BinaryBufferReadableBufferedStream;\n            if (hasReadWriteCapability(provider) && !(bufferOrReadableOrStream instanceof BinaryBuffer)) {\n                if (isReadableStream(bufferOrReadableOrStream)) {\n                    const bufferedStream = await peekStream(bufferOrReadableOrStream, 3);\n                    if (bufferedStream.ended) {\n                        bufferOrReadableOrStreamOrBufferedStream = BinaryBuffer.concat(bufferedStream.buffer);\n                    } else {\n                        bufferOrReadableOrStreamOrBufferedStream = bufferedStream;\n                    }\n                } else {\n                    bufferOrReadableOrStreamOrBufferedStream = peekReadable(bufferOrReadableOrStream, data => BinaryBuffer.concat(data), 3);\n                }\n            } else {\n                bufferOrReadableOrStreamOrBufferedStream = bufferOrReadableOrStream;\n            }\n\n            // write file: unbuffered (only if data to write is a buffer, or the provider has no buffered write capability)\n            if (!hasOpenReadWriteCloseCapability(provider) || (hasReadWriteCapability(provider) && bufferOrReadableOrStreamOrBufferedStream instanceof BinaryBuffer)) {\n                await this.doWriteUnbuffered(provider, resource, bufferOrReadableOrStreamOrBufferedStream);\n            }\n\n            // write file: buffered\n            else {\n                await this.doWriteBuffered(provider, resource, bufferOrReadableOrStreamOrBufferedStream instanceof BinaryBuffer ? BinaryBufferReadable.fromBuffer(bufferOrReadableOrStreamOrBufferedStream) : bufferOrReadableOrStreamOrBufferedStream);\n            }\n        } catch (error) {\n            this.rethrowAsFileOperationError(\"Unable to write file '{0}' ({1})\", resource, error, options);\n        }\n\n        return this.resolve(resource, { resolveMetadata: true });\n    }\n\n    private async validateWriteFile(provider: FileSystemProvider, resource: URI, options?: WriteFileOptions): Promise<Stat | undefined> {\n        let stat: Stat | undefined = undefined;\n        try {\n            stat = await provider.stat(resource);\n        } catch (error) {\n            return undefined; // file might not exist\n        }\n\n        // file cannot be directory\n        if ((stat.type & FileType.Directory) !== 0) {\n            throw new FileOperationError(nls.localizeByDefault(\"Unable to write file '{0}' that is actually a directory\", this.resourceForError(resource)), FileOperationResult.FILE_IS_DIRECTORY, options);\n        }\n\n        if (this.modifiedSince(stat, options)) {\n            throw new FileOperationError(nls.localizeByDefault('File Modified Since'), FileOperationResult.FILE_MODIFIED_SINCE, options);\n        }\n\n        return stat;\n    }\n\n    /**\n     * Dirty write prevention: if the file on disk has been changed and does not match our expected\n     * mtime and etag, we bail out to prevent dirty writing.\n     *\n     * First, we check for a mtime that is in the future before we do more checks. The assumption is\n     * that only the mtime is an indicator for a file that has changed on disk.\n     *\n     * Second, if the mtime has advanced, we compare the size of the file on disk with our previous\n     * one using the etag() function. Relying only on the mtime check has proven to produce false\n     * positives due to file system weirdness (especially around remote file systems). As such, the\n     * check for size is a weaker check because it can return a false negative if the file has changed\n     * but to the same length. This is a compromise we take to avoid having to produce checksums of\n     * the file content for comparison which would be much slower to compute.\n     */\n    protected modifiedSince(stat: Stat, options?: WriteFileOptions): boolean {\n        return !!options && typeof options.mtime === 'number' && typeof options.etag === 'string' && options.etag !== ETAG_DISABLED &&\n            typeof stat.mtime === 'number' && typeof stat.size === 'number' &&\n            options.mtime < stat.mtime && options.etag !== etag({ mtime: options.mtime /* not using stat.mtime for a reason, see above */, size: stat.size });\n    }\n\n    async readFile(resource: URI, options?: ReadFileOptions): Promise<FileContent> {\n        const provider = await this.withReadProvider(resource);\n\n        const stream = await this.doReadAsFileStream(provider, resource, {\n            ...options,\n            // optimization: since we know that the caller does not\n            // care about buffering, we indicate this to the reader.\n            // this reduces all the overhead the buffered reading\n            // has (open, read, close) if the provider supports\n            // unbuffered reading.\n            preferUnbuffered: true\n        });\n\n        return {\n            ...stream,\n            value: await BinaryBufferReadableStream.toBuffer(stream.value)\n        };\n    }\n\n    async readFileStream(resource: URI, options?: ReadFileOptions): Promise<FileStreamContent> {\n        const provider = await this.withReadProvider(resource);\n\n        return this.doReadAsFileStream(provider, resource, options);\n    }\n\n    private async doReadAsFileStream(provider: FileSystemProviderWithFileReadWriteCapability | FileSystemProviderWithOpenReadWriteCloseCapability, resource: URI, options?: ReadFileOptions & { preferUnbuffered?: boolean }): Promise<FileStreamContent> {\n\n        // install a cancellation token that gets cancelled\n        // when any error occurs. this allows us to resolve\n        // the content of the file while resolving metadata\n        // but still cancel the operation in certain cases.\n        const cancellableSource = new CancellationTokenSource();\n\n        // validate read operation\n        const statPromise = this.validateReadFile(resource, options).then(stat => stat, error => {\n            cancellableSource.cancel();\n\n            throw error;\n        });\n\n        try {\n\n            // if the etag is provided, we await the result of the validation\n            // due to the likelyhood of hitting a NOT_MODIFIED_SINCE result.\n            // otherwise, we let it run in parallel to the file reading for\n            // optimal startup performance.\n            if (options && typeof options.etag === 'string' && options.etag !== ETAG_DISABLED) {\n                await statPromise;\n            }\n\n            let fileStreamPromise: Promise<BinaryBufferReadableStream>;\n\n            // read unbuffered (only if either preferred, or the provider has no buffered read capability)\n            if (!(hasOpenReadWriteCloseCapability(provider) || hasFileReadStreamCapability(provider)) || (hasReadWriteCapability(provider) && options?.preferUnbuffered)) {\n                fileStreamPromise = this.readFileUnbuffered(provider, resource, options);\n            }\n\n            // read streamed (always prefer over primitive buffered read)\n            else if (hasFileReadStreamCapability(provider)) {\n                fileStreamPromise = Promise.resolve(this.readFileStreamed(provider, resource, cancellableSource.token, options));\n            }\n\n            // read buffered\n            else {\n                fileStreamPromise = Promise.resolve(this.readFileBuffered(provider, resource, cancellableSource.token, options));\n            }\n\n            const [fileStat, fileStream] = await Promise.all([statPromise, fileStreamPromise]);\n\n            return {\n                ...fileStat,\n                value: fileStream\n            };\n        } catch (error) {\n            this.rethrowAsFileOperationError(\"Unable to read file '{0}' ({1})\", resource, error, options);\n        }\n    }\n\n    private readFileStreamed(provider: FileSystemProviderWithFileReadStreamCapability, resource: URI, token: CancellationToken, options: ReadFileOptions = Object.create(null)): BinaryBufferReadableStream {\n        const fileStream = provider.readFileStream(resource, options, token);\n\n        return transform(fileStream, {\n            data: data => data instanceof BinaryBuffer ? data : BinaryBuffer.wrap(data),\n            error: error => this.asFileOperationError(\"Unable to read file '{0}' ({1})\", resource, error, options)\n        }, data => BinaryBuffer.concat(data));\n    }\n\n    private readFileBuffered(provider: FileSystemProviderWithOpenReadWriteCloseCapability, resource: URI, token: CancellationToken, options: ReadFileOptions = Object.create(null)): BinaryBufferReadableStream {\n        const stream = BinaryBufferWriteableStream.create();\n\n        readFileIntoStream(provider, resource, stream, data => data, {\n            ...options,\n            bufferSize: this.BUFFER_SIZE,\n            errorTransformer: error => this.asFileOperationError(\"Unable to read file '{0}' ({1})\", resource, error, options)\n        }, token);\n\n        return stream;\n    }\n\n    protected rethrowAsFileOperationError(message: string, resource: URI, error: Error, options?: ReadFileOptions & WriteFileOptions & CreateFileOptions): never {\n        throw this.asFileOperationError(message, resource, error, options);\n    }\n    protected asFileOperationError(message: string, resource: URI, error: Error, options?: ReadFileOptions & WriteFileOptions & CreateFileOptions): FileOperationError {\n        const fileOperationError = new FileOperationError(nls.localizeByDefault(message, this.resourceForError(resource), ensureFileSystemProviderError(error).toString()),\n            toFileOperationResult(error), options);\n        fileOperationError.stack = `${fileOperationError.stack}\\nCaused by: ${error.stack}`;\n        return fileOperationError;\n    }\n\n    private async readFileUnbuffered(provider: FileSystemProviderWithFileReadWriteCapability, resource: URI, options?: ReadFileOptions): Promise<BinaryBufferReadableStream> {\n        let buffer = await provider.readFile(resource);\n\n        // respect position option\n        if (options && typeof options.position === 'number') {\n            buffer = buffer.slice(options.position);\n        }\n\n        // respect length option\n        if (options && typeof options.length === 'number') {\n            buffer = buffer.slice(0, options.length);\n        }\n\n        // Throw if file is too large to load\n        this.validateReadFileLimits(resource, buffer.byteLength, options);\n\n        return BinaryBufferReadableStream.fromBuffer(BinaryBuffer.wrap(buffer));\n    }\n\n    private async validateReadFile(resource: URI, options?: ReadFileOptions): Promise<FileStatWithMetadata> {\n        const stat = await this.resolve(resource, { resolveMetadata: true });\n\n        // Throw if resource is a directory\n        if (stat.isDirectory) {\n            throw new FileOperationError(nls.localizeByDefault(\"Unable to read file '{0}' that is actually a directory\", this.resourceForError(resource)), FileOperationResult.FILE_IS_DIRECTORY, options);\n        }\n\n        // Throw if file not modified since (unless disabled)\n        if (options && typeof options.etag === 'string' && options.etag !== ETAG_DISABLED && options.etag === stat.etag) {\n            throw new FileOperationError(nls.localizeByDefault('File not modified since'), FileOperationResult.FILE_NOT_MODIFIED_SINCE, options);\n        }\n\n        // Throw if file is too large to load\n        this.validateReadFileLimits(resource, stat.size, options);\n\n        return stat;\n    }\n\n    private validateReadFileLimits(resource: URI, size: number, options?: ReadFileOptions): void {\n        if (options?.limits) {\n            let tooLargeErrorResult: FileOperationResult | undefined = undefined;\n\n            if (typeof options.limits.memory === 'number' && size > options.limits.memory) {\n                tooLargeErrorResult = FileOperationResult.FILE_EXCEEDS_MEMORY_LIMIT;\n            }\n\n            if (typeof options.limits.size === 'number' && size > options.limits.size) {\n                tooLargeErrorResult = FileOperationResult.FILE_TOO_LARGE;\n            }\n\n            if (typeof tooLargeErrorResult === 'number') {\n                throw new FileOperationError(nls.localizeByDefault(\"Unable to read file '{0}' that is too large to open\", this.resourceForError(resource)), tooLargeErrorResult);\n            }\n        }\n    }\n\n    // #endregion\n\n    // #region Move/Copy/Delete/Create Folder\n\n    async move(source: URI, target: URI, options?: MoveFileOptions): Promise<FileStatWithMetadata> {\n        if (options?.fromUserGesture === false) {\n            return this.doMove(source, target, options.overwrite);\n        }\n        await this.runFileOperationParticipants(target, source, FileOperation.MOVE);\n\n        const event = { correlationId: this.correlationIds++, operation: FileOperation.MOVE, target, source };\n        await this.onWillRunUserOperationEmitter.fire(event);\n        let stat: FileStatWithMetadata;\n        try {\n            stat = await this.doMove(source, target, options?.overwrite);\n        } catch (error) {\n            await this.onDidFailUserOperationEmitter.fire(event);\n            throw error;\n        }\n\n        await this.onDidRunUserOperationEmitter.fire(event);\n        return stat;\n    }\n\n    protected async doMove(source: URI, target: URI, overwrite?: boolean): Promise<FileStatWithMetadata> {\n        const sourceProvider = this.throwIfFileSystemIsReadonly(await this.withWriteProvider(source), source);\n        const targetProvider = this.throwIfFileSystemIsReadonly(await this.withWriteProvider(target), target);\n\n        // move\n        const mode = await this.doMoveCopy(sourceProvider, source, targetProvider, target, 'move', !!overwrite);\n\n        // resolve and send events\n        const fileStat = await this.resolve(target, { resolveMetadata: true });\n        this.onDidRunOperationEmitter.fire(new FileOperationEvent(source, mode === 'move' ? FileOperation.MOVE : FileOperation.COPY, fileStat));\n\n        return fileStat;\n    }\n\n    async copy(source: URI, target: URI, options?: CopyFileOptions): Promise<FileStatWithMetadata> {\n        if (options?.fromUserGesture === false) {\n            return this.doCopy(source, target, options.overwrite);\n        }\n        await this.runFileOperationParticipants(target, source, FileOperation.COPY);\n\n        const event = { correlationId: this.correlationIds++, operation: FileOperation.COPY, target, source };\n        await this.onWillRunUserOperationEmitter.fire(event);\n        let stat: FileStatWithMetadata;\n        try {\n            stat = await this.doCopy(source, target, options?.overwrite);\n        } catch (error) {\n            await this.onDidFailUserOperationEmitter.fire(event);\n            throw error;\n        }\n\n        await this.onDidRunUserOperationEmitter.fire(event);\n        return stat;\n    }\n\n    protected async doCopy(source: URI, target: URI, overwrite?: boolean): Promise<FileStatWithMetadata> {\n        const sourceProvider = await this.withReadProvider(source);\n        const targetProvider = this.throwIfFileSystemIsReadonly(await this.withWriteProvider(target), target);\n\n        // copy\n        const mode = await this.doMoveCopy(sourceProvider, source, targetProvider, target, 'copy', !!overwrite);\n\n        // resolve and send events\n        const fileStat = await this.resolve(target, { resolveMetadata: true });\n        this.onDidRunOperationEmitter.fire(new FileOperationEvent(source, mode === 'copy' ? FileOperation.COPY : FileOperation.MOVE, fileStat));\n\n        return fileStat;\n    }\n\n    private async doMoveCopy(sourceProvider: FileSystemProvider, source: URI, targetProvider: FileSystemProvider, target: URI, mode: 'move' | 'copy', overwrite: boolean): Promise<'move' | 'copy'> {\n        if (source.toString() === target.toString()) {\n            return mode; // simulate node.js behaviour here and do a no-op if paths match\n        }\n\n        // validation\n        const { exists, isSameResourceWithDifferentPathCase } = await this.doValidateMoveCopy(sourceProvider, source, targetProvider, target, mode, overwrite);\n\n        // if target exists get valid target\n        if (exists && !overwrite) {\n            const parent = await this.resolve(target.parent);\n            const targetFileStat = await this.resolve(target);\n            target = FileSystemUtils.generateUniqueResourceURI(parent, target, targetFileStat.isDirectory, isSameResourceWithDifferentPathCase ? 'copy' : undefined);\n        }\n\n        // delete as needed (unless target is same resource with different path case)\n        if (exists && !isSameResourceWithDifferentPathCase && overwrite) {\n            await this.delete(target, { recursive: true });\n        }\n\n        // create parent folders\n        await this.mkdirp(targetProvider, target.parent);\n\n        // copy source => target\n        if (mode === 'copy') {\n\n            // same provider with fast copy: leverage copy() functionality\n            if (sourceProvider === targetProvider && hasFileFolderCopyCapability(sourceProvider)) {\n                await sourceProvider.copy(source, target, { overwrite });\n            }\n\n            // when copying via buffer/unbuffered, we have to manually\n            // traverse the source if it is a folder and not a file\n            else {\n                const sourceFile = await this.resolve(source);\n                if (sourceFile.isDirectory) {\n                    await this.doCopyFolder(sourceProvider, sourceFile, targetProvider, target);\n                } else {\n                    await this.doCopyFile(sourceProvider, source, targetProvider, target);\n                }\n            }\n\n            return mode;\n        }\n\n        // move source => target\n        else {\n\n            // same provider: leverage rename() functionality\n            if (sourceProvider === targetProvider) {\n                await sourceProvider.rename(source, target, { overwrite });\n\n                return mode;\n            }\n\n            // across providers: copy to target & delete at source\n            else {\n                await this.doMoveCopy(sourceProvider, source, targetProvider, target, 'copy', overwrite);\n\n                await this.delete(source, { recursive: true });\n\n                return 'copy';\n            }\n        }\n    }\n\n    private async doCopyFile(sourceProvider: FileSystemProvider, source: URI, targetProvider: FileSystemProvider, target: URI): Promise<void> {\n\n        // copy: source (buffered) => target (buffered)\n        if (hasOpenReadWriteCloseCapability(sourceProvider) && hasOpenReadWriteCloseCapability(targetProvider)) {\n            return this.doPipeBuffered(sourceProvider, source, targetProvider, target);\n        }\n\n        // copy: source (buffered) => target (unbuffered)\n        if (hasOpenReadWriteCloseCapability(sourceProvider) && hasReadWriteCapability(targetProvider)) {\n            return this.doPipeBufferedToUnbuffered(sourceProvider, source, targetProvider, target);\n        }\n\n        // copy: source (unbuffered) => target (buffered)\n        if (hasReadWriteCapability(sourceProvider) && hasOpenReadWriteCloseCapability(targetProvider)) {\n            return this.doPipeUnbufferedToBuffered(sourceProvider, source, targetProvider, target);\n        }\n\n        // copy: source (unbuffered) => target (unbuffered)\n        if (hasReadWriteCapability(sourceProvider) && hasReadWriteCapability(targetProvider)) {\n            return this.doPipeUnbuffered(sourceProvider, source, targetProvider, target);\n        }\n    }\n\n    private async doCopyFolder(sourceProvider: FileSystemProvider, sourceFolder: FileStat, targetProvider: FileSystemProvider, targetFolder: URI): Promise<void> {\n\n        // create folder in target\n        await targetProvider.mkdir(targetFolder);\n\n        // create children in target\n        if (Array.isArray(sourceFolder.children)) {\n            await Promise.all(sourceFolder.children.map(async sourceChild => {\n                const targetChild = targetFolder.resolve(sourceChild.name);\n                if (sourceChild.isDirectory) {\n                    return this.doCopyFolder(sourceProvider, await this.resolve(sourceChild.resource), targetProvider, targetChild);\n                } else {\n                    return this.doCopyFile(sourceProvider, sourceChild.resource, targetProvider, targetChild);\n                }\n            }));\n        }\n    }\n\n    private async doValidateMoveCopy(sourceProvider: FileSystemProvider, source: URI, targetProvider: FileSystemProvider, target: URI, mode: 'move' | 'copy', overwrite?: boolean): Promise<{ exists: boolean, isSameResourceWithDifferentPathCase: boolean }> {\n        let isSameResourceWithDifferentPathCase = false;\n\n        // Check if source is equal or parent to target (requires providers to be the same)\n        if (sourceProvider === targetProvider) {\n            const isPathCaseSensitive = !!(sourceProvider.capabilities & FileSystemProviderCapabilities.PathCaseSensitive);\n            if (!isPathCaseSensitive) {\n                isSameResourceWithDifferentPathCase = source.toString().toLowerCase() === target.toString().toLowerCase();\n            }\n\n            if (isSameResourceWithDifferentPathCase && mode === 'copy') {\n                throw new Error(nls.localizeByDefault(\"Unable to move/copy when source '{0}' is parent of target '{1}'.\", this.resourceForError(source), this.resourceForError(target)));\n            }\n\n            if (!isSameResourceWithDifferentPathCase && target.isEqualOrParent(source, isPathCaseSensitive)) {\n                throw new Error(nls.localizeByDefault(\"Unable to move/copy when source '{0}' is parent of target '{1}'.\", this.resourceForError(source), this.resourceForError(target)));\n            }\n        }\n\n        // Extra checks if target exists and this is not a rename\n        const exists = await this.exists(target);\n        if (exists && !isSameResourceWithDifferentPathCase) {\n\n            // Special case: if the target is a parent of the source, we cannot delete\n            // it as it would delete the source as well. In this case we have to throw\n            if (sourceProvider === targetProvider) {\n                const isPathCaseSensitive = !!(sourceProvider.capabilities & FileSystemProviderCapabilities.PathCaseSensitive);\n                if (source.isEqualOrParent(target, isPathCaseSensitive)) {\n                    throw new Error(nls.localizeByDefault(\"Unable to move/copy '{0}' into '{1}' since a file would replace the folder it is contained in.\", this.resourceForError(source), this.resourceForError(target)));\n                }\n            }\n        }\n\n        return { exists, isSameResourceWithDifferentPathCase };\n    }\n\n    async createFolder(resource: URI, options: FileOperationOptions = {}): Promise<FileStatWithMetadata> {\n        const {\n            fromUserGesture = true,\n        } = options;\n\n        const provider = this.throwIfFileSystemIsReadonly(await this.withProvider(resource), resource);\n\n        // mkdir recursively\n        await this.mkdirp(provider, resource);\n\n        // events\n        const fileStat = await this.resolve(resource, { resolveMetadata: true });\n\n        if (fromUserGesture) {\n            this.onDidRunUserOperationEmitter.fire({ correlationId: this.correlationIds++, operation: FileOperation.CREATE, target: resource });\n        } else {\n            this.onDidRunOperationEmitter.fire(new FileOperationEvent(resource, FileOperation.CREATE, fileStat));\n        }\n\n        return fileStat;\n    }\n\n    private async mkdirp(provider: FileSystemProvider, directory: URI): Promise<void> {\n        const directoriesToCreate: string[] = [];\n\n        // mkdir until we reach root\n        while (!directory.path.isRoot) {\n            try {\n                const stat = await provider.stat(directory);\n                if ((stat.type & FileType.Directory) === 0) {\n                    throw new Error(nls.localizeByDefault(\"Unable to create folder '{0}' that already exists but is not a directory\", this.resourceForError(directory)));\n                }\n\n                break; // we have hit a directory that exists -> good\n            } catch (error) {\n\n                // Bubble up any other error that is not file not found\n                if (toFileSystemProviderErrorCode(error) !== FileSystemProviderErrorCode.FileNotFound) {\n                    throw error;\n                }\n\n                // Upon error, remember directories that need to be created\n                directoriesToCreate.push(directory.path.base);\n\n                // Continue up\n                directory = directory.parent;\n            }\n        }\n\n        // Create directories as needed\n        for (let i = directoriesToCreate.length - 1; i >= 0; i--) {\n            directory = directory.resolve(directoriesToCreate[i]);\n\n            try {\n                await provider.mkdir(directory);\n            } catch (error) {\n                if (toFileSystemProviderErrorCode(error) !== FileSystemProviderErrorCode.FileExists) {\n                    // For mkdirp() we tolerate that the mkdir() call fails\n                    // in case the folder already exists. This follows node.js\n                    // own implementation of fs.mkdir({ recursive: true }) and\n                    // reduces the chances of race conditions leading to errors\n                    // if multiple calls try to create the same folders\n                    // As such, we only throw an error here if it is other than\n                    // the fact that the file already exists.\n                    // (see also https://github.com/microsoft/vscode/issues/89834)\n                    throw error;\n                }\n            }\n        }\n    }\n\n    async delete(resource: URI, options?: FileOperationOptions & Partial<FileDeleteOptions>): Promise<void> {\n        if (options?.fromUserGesture === false) {\n            return this.doDelete(resource, options);\n        }\n        await this.runFileOperationParticipants(resource, undefined, FileOperation.DELETE);\n\n        const event = { correlationId: this.correlationIds++, operation: FileOperation.DELETE, target: resource };\n        await this.onWillRunUserOperationEmitter.fire(event);\n        try {\n            await this.doDelete(resource, options);\n        } catch (error) {\n            await this.onDidFailUserOperationEmitter.fire(event);\n            throw error;\n        }\n\n        await this.onDidRunUserOperationEmitter.fire(event);\n    }\n\n    protected async doDelete(resource: URI, options?: Partial<FileDeleteOptions>): Promise<void> {\n        const provider = this.throwIfFileSystemIsReadonly(await this.withProvider(resource), resource);\n\n        // Validate trash support\n        const useTrash = !!options?.useTrash;\n        if (useTrash && !(provider.capabilities & FileSystemProviderCapabilities.Trash)) {\n            throw new Error(nls.localizeByDefault(\"Unable to delete file '{0}' via trash because provider does not support it.\", this.resourceForError(resource)));\n        }\n\n        // Validate delete\n        const exists = await this.exists(resource);\n        if (!exists) {\n            throw new FileOperationError(nls.localizeByDefault(\"Unable to delete nonexistent file '{0}'\", this.resourceForError(resource)), FileOperationResult.FILE_NOT_FOUND);\n        }\n\n        // Validate recursive\n        const recursive = !!options?.recursive;\n        if (!recursive && exists) {\n            const stat = await this.resolve(resource);\n            if (stat.isDirectory && Array.isArray(stat.children) && stat.children.length > 0) {\n                throw new Error(nls.localizeByDefault(\"Unable to delete non-empty folder '{0}'.\", this.resourceForError(resource)));\n            }\n        }\n\n        // Delete through provider\n        await provider.delete(resource, { recursive, useTrash });\n\n        // Events\n        this.onDidRunOperationEmitter.fire(new FileOperationEvent(resource, FileOperation.DELETE));\n    }\n\n    // #endregion\n\n    // #region File Watching\n\n    private onDidFilesChangeEmitter = new Emitter<FileChangesEvent>();\n    /**\n     * An event that is emitted when files are changed on the disk.\n     */\n    get onDidFilesChange(): Event<FileChangesEvent> {\n        return this.onDidFilesChangeEmitter.event;\n    }\n\n    private activeWatchers = new Map<string, { disposable: Disposable, count: number }>();\n\n    watch(resource: URI, options: WatchOptions = { recursive: false, excludes: [] }): Disposable {\n        const resolvedOptions: WatchOptions = {\n            ...options,\n            // always ignore temporary upload files\n            excludes: options.excludes.concat('**/theia_upload_*')\n        };\n\n        let watchDisposed = false;\n        let watchDisposable = Disposable.create(() => watchDisposed = true);\n\n        // Watch and wire in disposable which is async but\n        // check if we got disposed meanwhile and forward\n        this.doWatch(resource, resolvedOptions).then(disposable => {\n            if (watchDisposed) {\n                disposable.dispose();\n            } else {\n                watchDisposable = disposable;\n            }\n        }, error => console.error(error));\n\n        return Disposable.create(() => watchDisposable.dispose());\n    }\n\n    async doWatch(resource: URI, options: WatchOptions): Promise<Disposable> {\n        const provider = await this.withProvider(resource);\n        const key = this.toWatchKey(provider, resource, options);\n\n        // Only start watching if we are the first for the given key\n        const watcher = this.activeWatchers.get(key) || { count: 0, disposable: provider.watch(resource, options) };\n        if (!this.activeWatchers.has(key)) {\n            this.activeWatchers.set(key, watcher);\n        }\n\n        // Increment usage counter\n        watcher.count += 1;\n\n        return Disposable.create(() => {\n\n            // Unref\n            watcher.count--;\n\n            // Dispose only when last user is reached\n            if (watcher.count === 0) {\n                watcher.disposable.dispose();\n                this.activeWatchers.delete(key);\n            }\n        });\n    }\n\n    private toWatchKey(provider: FileSystemProvider, resource: URI, options: WatchOptions): string {\n        return [\n            this.toMapKey(provider, resource),  // lowercase path if the provider is case insensitive\n            String(options.recursive),          // use recursive: true | false as part of the key\n            options.excludes.join()             // use excludes as part of the key\n        ].join();\n    }\n\n    // #endregion\n\n    // #region Helpers\n\n    private writeQueues: Map<string, Promise<void>> = new Map();\n\n    private ensureWriteQueue(provider: FileSystemProvider, resource: URI, task: () => Promise<void>): Promise<void> {\n        // ensure to never write to the same resource without finishing\n        // the one write. this ensures a write finishes consistently\n        // (even with error) before another write is done.\n        const queueKey = this.toMapKey(provider, resource);\n        const writeQueue = (this.writeQueues.get(queueKey) || Promise.resolve()).then(task, task);\n        this.writeQueues.set(queueKey, writeQueue);\n        return writeQueue;\n    }\n\n    private toMapKey(provider: FileSystemProvider, resource: URI): string {\n        const isPathCaseSensitive = !!(provider.capabilities & FileSystemProviderCapabilities.PathCaseSensitive);\n\n        return isPathCaseSensitive ? resource.toString() : resource.toString().toLowerCase();\n    }\n\n    private async doWriteBuffered(provider: FileSystemProviderWithOpenReadWriteCloseCapability, resource: URI, readableOrStreamOrBufferedStream: BinaryBufferReadable | BinaryBufferReadableStream | BinaryBufferReadableBufferedStream): Promise<void> {\n        return this.ensureWriteQueue(provider, resource, async () => {\n\n            // open handle\n            const handle = await provider.open(resource, { create: true });\n\n            // write into handle until all bytes from buffer have been written\n            try {\n                if (isReadableStream(readableOrStreamOrBufferedStream) || isReadableBufferedStream(readableOrStreamOrBufferedStream)) {\n                    await this.doWriteStreamBufferedQueued(provider, handle, readableOrStreamOrBufferedStream);\n                } else {\n                    await this.doWriteReadableBufferedQueued(provider, handle, readableOrStreamOrBufferedStream);\n                }\n            } catch (error) {\n                throw ensureFileSystemProviderError(error);\n            } finally {\n\n                // close handle always\n                await provider.close(handle);\n            }\n        });\n    }\n\n    private async doWriteStreamBufferedQueued(provider: FileSystemProviderWithOpenReadWriteCloseCapability, handle: number, streamOrBufferedStream: BinaryBufferReadableStream | BinaryBufferReadableBufferedStream): Promise<void> {\n        let posInFile = 0;\n        let stream: BinaryBufferReadableStream;\n\n        // Buffered stream: consume the buffer first by writing\n        // it to the target before reading from the stream.\n        if (isReadableBufferedStream(streamOrBufferedStream)) {\n            if (streamOrBufferedStream.buffer.length > 0) {\n                const chunk = BinaryBuffer.concat(streamOrBufferedStream.buffer);\n                await this.doWriteBuffer(provider, handle, chunk, chunk.byteLength, posInFile, 0);\n\n                posInFile += chunk.byteLength;\n            }\n\n            // If the stream has been consumed, return early\n            if (streamOrBufferedStream.ended) {\n                return;\n            }\n\n            stream = streamOrBufferedStream.stream;\n        }\n\n        // Unbuffered stream - just take as is\n        else {\n            stream = streamOrBufferedStream;\n        }\n\n        return new Promise(async (resolve, reject) => {\n\n            stream.on('data', async chunk => {\n\n                // pause stream to perform async write operation\n                stream.pause();\n\n                try {\n                    await this.doWriteBuffer(provider, handle, chunk, chunk.byteLength, posInFile, 0);\n                } catch (error) {\n                    return reject(error);\n                }\n\n                posInFile += chunk.byteLength;\n\n                // resume stream now that we have successfully written\n                // run this on the next tick to prevent increasing the\n                // execution stack because resume() may call the event\n                // handler again before finishing.\n                setTimeout(() => stream.resume());\n            });\n\n            stream.on('error', error => reject(error));\n            stream.on('end', () => resolve());\n        });\n    }\n\n    private async doWriteReadableBufferedQueued(provider: FileSystemProviderWithOpenReadWriteCloseCapability, handle: number, readable: BinaryBufferReadable): Promise<void> {\n        let posInFile = 0;\n\n        let chunk: BinaryBuffer | null;\n        while ((chunk = readable.read()) !== null) {\n            await this.doWriteBuffer(provider, handle, chunk, chunk.byteLength, posInFile, 0);\n\n            posInFile += chunk.byteLength;\n        }\n    }\n\n    private async doWriteBuffer(provider: FileSystemProviderWithOpenReadWriteCloseCapability, handle: number, buffer: BinaryBuffer, length: number, posInFile: number, posInBuffer: number): Promise<void> {\n        let totalBytesWritten = 0;\n        while (totalBytesWritten < length) {\n            const bytesWritten = await provider.write(handle, posInFile + totalBytesWritten, buffer.buffer, posInBuffer + totalBytesWritten, length - totalBytesWritten);\n            totalBytesWritten += bytesWritten;\n        }\n    }\n\n    private async doWriteUnbuffered(provider: FileSystemProviderWithFileReadWriteCapability, resource: URI, bufferOrReadableOrStreamOrBufferedStream: BinaryBuffer | BinaryBufferReadable | BinaryBufferReadableStream | BinaryBufferReadableBufferedStream): Promise<void> {\n        return this.ensureWriteQueue(provider, resource, () => this.doWriteUnbufferedQueued(provider, resource, bufferOrReadableOrStreamOrBufferedStream));\n    }\n\n    private async doWriteUnbufferedQueued(provider: FileSystemProviderWithFileReadWriteCapability, resource: URI, bufferOrReadableOrStreamOrBufferedStream: BinaryBuffer | BinaryBufferReadable | BinaryBufferReadableStream | BinaryBufferReadableBufferedStream): Promise<void> {\n        let buffer: BinaryBuffer;\n        if (bufferOrReadableOrStreamOrBufferedStream instanceof BinaryBuffer) {\n            buffer = bufferOrReadableOrStreamOrBufferedStream;\n        } else if (isReadableStream(bufferOrReadableOrStreamOrBufferedStream)) {\n            buffer = await BinaryBufferReadableStream.toBuffer(bufferOrReadableOrStreamOrBufferedStream);\n        } else if (isReadableBufferedStream(bufferOrReadableOrStreamOrBufferedStream)) {\n            buffer = await BinaryBufferReadableBufferedStream.toBuffer(bufferOrReadableOrStreamOrBufferedStream);\n        } else {\n            buffer = BinaryBufferReadable.toBuffer(bufferOrReadableOrStreamOrBufferedStream);\n        }\n\n        return provider.writeFile(resource, buffer.buffer, { create: true, overwrite: true });\n    }\n\n    private async doPipeBuffered(sourceProvider: FileSystemProviderWithOpenReadWriteCloseCapability, source: URI, targetProvider: FileSystemProviderWithOpenReadWriteCloseCapability, target: URI): Promise<void> {\n        return this.ensureWriteQueue(targetProvider, target, () => this.doPipeBufferedQueued(sourceProvider, source, targetProvider, target));\n    }\n\n    private async doPipeBufferedQueued(sourceProvider: FileSystemProviderWithOpenReadWriteCloseCapability, source: URI, targetProvider: FileSystemProviderWithOpenReadWriteCloseCapability, target: URI): Promise<void> {\n        let sourceHandle: number | undefined = undefined;\n        let targetHandle: number | undefined = undefined;\n\n        try {\n\n            // Open handles\n            sourceHandle = await sourceProvider.open(source, { create: false });\n            targetHandle = await targetProvider.open(target, { create: true });\n\n            const buffer = BinaryBuffer.alloc(this.BUFFER_SIZE);\n\n            let posInFile = 0;\n            let posInBuffer = 0;\n            let bytesRead = 0;\n            do {\n                // read from source (sourceHandle) at current position (posInFile) into buffer (buffer) at\n                // buffer position (posInBuffer) up to the size of the buffer (buffer.byteLength).\n                bytesRead = await sourceProvider.read(sourceHandle, posInFile, buffer.buffer, posInBuffer, buffer.byteLength - posInBuffer);\n\n                // write into target (targetHandle) at current position (posInFile) from buffer (buffer) at\n                // buffer position (posInBuffer) all bytes we read (bytesRead).\n                await this.doWriteBuffer(targetProvider, targetHandle, buffer, bytesRead, posInFile, posInBuffer);\n\n                posInFile += bytesRead;\n                posInBuffer += bytesRead;\n\n                // when buffer full, fill it again from the beginning\n                if (posInBuffer === buffer.byteLength) {\n                    posInBuffer = 0;\n                }\n            } while (bytesRead > 0);\n        } catch (error) {\n            throw ensureFileSystemProviderError(error);\n        } finally {\n            await Promise.all([\n                typeof sourceHandle === 'number' ? sourceProvider.close(sourceHandle) : Promise.resolve(),\n                typeof targetHandle === 'number' ? targetProvider.close(targetHandle) : Promise.resolve(),\n            ]);\n        }\n    }\n\n    private async doPipeUnbuffered(sourceProvider: FileSystemProviderWithFileReadWriteCapability, source: URI, targetProvider: FileSystemProviderWithFileReadWriteCapability, target: URI): Promise<void> {\n        return this.ensureWriteQueue(targetProvider, target, () => this.doPipeUnbufferedQueued(sourceProvider, source, targetProvider, target));\n    }\n\n    private async doPipeUnbufferedQueued(sourceProvider: FileSystemProviderWithFileReadWriteCapability, source: URI, targetProvider: FileSystemProviderWithFileReadWriteCapability, target: URI): Promise<void> {\n        return targetProvider.writeFile(target, await sourceProvider.readFile(source), { create: true, overwrite: true });\n    }\n\n    private async doPipeUnbufferedToBuffered(sourceProvider: FileSystemProviderWithFileReadWriteCapability, source: URI, targetProvider: FileSystemProviderWithOpenReadWriteCloseCapability, target: URI): Promise<void> {\n        return this.ensureWriteQueue(targetProvider, target, () => this.doPipeUnbufferedToBufferedQueued(sourceProvider, source, targetProvider, target));\n    }\n\n    private async doPipeUnbufferedToBufferedQueued(sourceProvider: FileSystemProviderWithFileReadWriteCapability, source: URI, targetProvider: FileSystemProviderWithOpenReadWriteCloseCapability, target: URI): Promise<void> {\n\n        // Open handle\n        const targetHandle = await targetProvider.open(target, { create: true });\n\n        // Read entire buffer from source and write buffered\n        try {\n            const buffer = await sourceProvider.readFile(source);\n            await this.doWriteBuffer(targetProvider, targetHandle, BinaryBuffer.wrap(buffer), buffer.byteLength, 0, 0);\n        } catch (error) {\n            throw ensureFileSystemProviderError(error);\n        } finally {\n            await targetProvider.close(targetHandle);\n        }\n    }\n\n    private async doPipeBufferedToUnbuffered(sourceProvider: FileSystemProviderWithOpenReadWriteCloseCapability, source: URI, targetProvider: FileSystemProviderWithFileReadWriteCapability, target: URI): Promise<void> {\n\n        // Read buffer via stream buffered\n        const buffer = await BinaryBufferReadableStream.toBuffer(this.readFileBuffered(sourceProvider, source, CancellationToken.None));\n\n        // Write buffer into target at once\n        await this.doWriteUnbuffered(targetProvider, target, buffer);\n    }\n\n    protected throwIfFileSystemIsReadonly<T extends FileSystemProvider>(provider: T, resource: URI): T {\n        if (provider.capabilities & FileSystemProviderCapabilities.Readonly) {\n            throw new FileOperationError(nls.localizeByDefault(\"Unable to modify read-only file '{0}'\", this.resourceForError(resource)), FileOperationResult.FILE_PERMISSION_DENIED);\n        }\n\n        return provider;\n    }\n\n    private resourceForError(resource: URI): string {\n        return this.labelProvider.getLongName(resource);\n    }\n\n    // #endregion\n\n    // #region File operation participants\n\n    private readonly participants: FileOperationParticipant[] = [];\n\n    addFileOperationParticipant(participant: FileOperationParticipant): Disposable {\n        this.participants.push(participant);\n\n        return Disposable.create(() => {\n            const index = this.participants.indexOf(participant);\n            if (index > -1) {\n                this.participants.splice(index, 1);\n            }\n        });\n    }\n\n    async runFileOperationParticipants(target: URI, source: URI | undefined, operation: FileOperation): Promise<void> {\n        const participantsTimeout = this.preferences['files.participants.timeout'];\n        if (participantsTimeout <= 0 || this.participants.length === 0) {\n            return;\n        }\n\n        const cancellationTokenSource = new CancellationTokenSource();\n\n        return this.progressService.withProgress(\n            this.progressLabel(operation),\n            'notification',\n            async () => {\n                for (const participant of this.participants) {\n                    if (cancellationTokenSource.token.isCancellationRequested) {\n                        break;\n                    }\n\n                    try {\n                        const promise = participant.participate(target, source, operation, participantsTimeout, cancellationTokenSource.token);\n                        await Promise.race([\n                            promise,\n                            timeout(participantsTimeout, cancellationTokenSource.token).then(() => cancellationTokenSource.dispose(), () => { /* no-op if cancelled */ })\n                        ]);\n                    } catch (err) {\n                        console.warn(err);\n                    }\n                }\n            },\n            () => {\n                cancellationTokenSource.cancel();\n            });\n    }\n\n    private progressLabel(operation: FileOperation): string {\n        switch (operation) {\n            case FileOperation.CREATE:\n                return nls.localizeByDefault(\"Running 'File Create' participants...\");\n            case FileOperation.MOVE:\n                return nls.localizeByDefault(\"Running 'File Rename' participants...\");\n            case FileOperation.COPY:\n                return nls.localizeByDefault(\"Running 'File Copy' participants...\");\n            case FileOperation.DELETE:\n                return nls.localizeByDefault(\"Running 'File Delete' participants...\");\n        }\n    }\n\n    // #endregion\n\n    // #region encoding\n\n    protected async getWriteEncoding(resource: URI, options?: WriteEncodingOptions): Promise<ResourceEncoding> {\n        const encoding = await this.getEncodingForResource(resource, options ? options.encoding : undefined);\n        return this.encodingService.toResourceEncoding(encoding, {\n            overwriteEncoding: options?.overwriteEncoding,\n            read: async length => {\n                const buffer = await BinaryBufferReadableStream.toBuffer((await this.readFileStream(resource, { length })).value);\n                return buffer.buffer;\n            }\n        });\n    }\n\n    protected getReadEncoding(resource: URI, options?: ReadEncodingOptions, detectedEncoding?: string): Promise<string> {\n        let preferredEncoding: string | undefined;\n\n        // Encoding passed in as option\n        if (options?.encoding) {\n            if (detectedEncoding === UTF8_with_bom && options.encoding === UTF8) {\n                preferredEncoding = UTF8_with_bom; // indicate the file has BOM if we are to resolve with UTF 8\n            } else {\n                preferredEncoding = options.encoding; // give passed in encoding highest priority\n            }\n        } else if (detectedEncoding) {\n            preferredEncoding = detectedEncoding;\n        }\n\n        return this.getEncodingForResource(resource, preferredEncoding);\n    }\n\n    protected async getEncodingForResource(resource: URI, preferredEncoding?: string): Promise<string> {\n        resource = await this.toUnderlyingResource(resource);\n        return this.encodingRegistry.getEncodingForResource(resource, preferredEncoding);\n    }\n\n    /**\n     * Converts to an underlying fs provider resource format.\n     *\n     * For example converting `user-storage` resources to `file` resources under a user home:\n     * user-storage:/user/settings.json => file://home/.theia/settings.json\n     */\n    async toUnderlyingResource(resource: URI): Promise<URI> {\n        let provider = await this.withProvider(resource);\n        while (provider instanceof DelegatingFileSystemProvider) {\n            resource = provider.toUnderlyingResource(resource);\n            provider = await this.withProvider(resource);\n        }\n        return resource;\n    }\n\n    // #endregion\n\n    protected handleFileWatchError(): void {\n        this.watcherErrorHandler.handleError();\n    }\n}\n","// *****************************************************************************\n// Copyright (C) 2017 TypeFox and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\nimport { interfaces, Container } from '@theia/core/shared/inversify';\nimport { CompressedExpansionService, CompressionToggle, createTreeContainer, TreeCompressionService, TreeContainerProps } from '@theia/core/lib/browser';\nimport { FileTree } from './file-tree';\nimport { FileTreeModel } from './file-tree-model';\nimport { FileTreeWidget } from './file-tree-widget';\n\nconst fileTreeDefaults: Partial<TreeContainerProps> = {\n    tree: FileTree,\n    model: FileTreeModel,\n    widget: FileTreeWidget,\n    expansionService: CompressedExpansionService,\n};\n\nexport function createFileTreeContainer(parent: interfaces.Container, overrides?: Partial<TreeContainerProps>): Container {\n    const child = createTreeContainer(parent, { ...fileTreeDefaults, ...overrides });\n    child.bind(CompressionToggle).toConstantValue({ compress: false });\n    child.bind(TreeCompressionService).toSelf().inSingletonScope();\n\n    return child;\n}\n","// *****************************************************************************\n// Copyright (C) 2022 Ericsson and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\nimport { injectable, inject, postConstruct } from '@theia/core/shared/inversify';\nimport URI from '@theia/core/lib/common/uri';\nimport { Event, Emitter, nls } from '@theia/core/lib/common';\nimport { Decoration, DecorationsService } from '@theia/core/lib/browser/decorations-service';\nimport { TreeNode, TreeDecoration, TreeDecorator, Tree, TopDownTreeIterator } from '@theia/core/lib/browser';\nimport { MaybePromise } from '@theia/core/lib/common/types';\nimport { ColorRegistry } from '@theia/core/lib/browser/color-registry';\nimport { FileStatNode } from './file-tree';\n\n@injectable()\nexport class FileTreeDecoratorAdapter implements TreeDecorator {\n    readonly id = 'decorations-service-tree-decorator-adapter';\n    protected readonly bubbleTooltip = nls.localizeByDefault('Contains emphasized items');\n    @inject(DecorationsService) protected readonly decorationsService: DecorationsService;\n    @inject(ColorRegistry) protected readonly colorRegistry: ColorRegistry;\n\n    protected readonly onDidChangeDecorationsEmitter = new Emitter<(tree: Tree) => Map<string, TreeDecoration.Data>>();\n    protected decorationsByUri = new Map<string, TreeDecoration.Data>();\n    protected parentDecorations = new Map<string, TreeDecoration.Data>();\n\n    get onDidChangeDecorations(): Event<(tree: Tree) => Map<string, TreeDecoration.Data>> {\n        return this.onDidChangeDecorationsEmitter.event;\n    }\n\n    @postConstruct()\n    protected init(): void {\n        this.decorationsService.onDidChangeDecorations(newDecorations => {\n            this.updateDecorations(this.decorationsByUri.keys(), newDecorations.keys());\n            this.fireDidChangeDecorations();\n        });\n    }\n\n    decorations(tree: Tree): MaybePromise<Map<string, TreeDecoration.Data>> {\n        return this.collectDecorations(tree);\n    }\n\n    protected collectDecorations(tree: Tree): Map<string, TreeDecoration.Data> {\n        const decorations = new Map();\n        if (tree.root) {\n            for (const node of new TopDownTreeIterator(tree.root)) {\n                const uri = this.getUriForNode(node);\n                if (uri) {\n                    const stringified = uri.toString();\n                    const ownDecoration = this.decorationsByUri.get(stringified);\n                    const bubbledDecoration = this.parentDecorations.get(stringified);\n                    const combined = this.mergeDecorations(ownDecoration, bubbledDecoration);\n                    if (combined) {\n                        decorations.set(node.id, combined);\n                    }\n                }\n            }\n        }\n        return decorations;\n    }\n\n    protected mergeDecorations(ownDecoration?: TreeDecoration.Data, bubbledDecoration?: TreeDecoration.Data): TreeDecoration.Data | undefined {\n        if (!ownDecoration) {\n            return bubbledDecoration;\n        } else if (!bubbledDecoration) {\n            return ownDecoration;\n        } else {\n            const tailDecorations = (bubbledDecoration.tailDecorations ?? []).concat(ownDecoration.tailDecorations ?? []);\n            return {\n                ...bubbledDecoration,\n                tailDecorations\n            };\n        }\n    }\n\n    protected updateDecorations(oldKeys: IterableIterator<string>, newKeys: IterableIterator<string>): void {\n        this.parentDecorations.clear();\n        const newDecorations = new Map<string, TreeDecoration.Data>();\n        const handleUri = (rawUri: string) => {\n            if (!newDecorations.has(rawUri)) {\n                const uri = new URI(rawUri);\n                const decorations = this.decorationsService.getDecoration(uri, false);\n                if (decorations.length) {\n                    newDecorations.set(rawUri, this.toTheiaDecoration(decorations, false));\n                    this.propagateDecorationsByUri(uri, decorations);\n                }\n            }\n        };\n        for (const rawUri of oldKeys) {\n            handleUri(rawUri);\n        }\n        for (const rawUri of newKeys) {\n            handleUri(rawUri);\n        }\n        this.decorationsByUri = newDecorations;\n    }\n\n    protected toTheiaDecoration(decorations: Decoration[], bubble?: boolean): TreeDecoration.Data {\n        const color = decorations[0].colorId ? `var(${this.colorRegistry.toCssVariableName(decorations[0].colorId)})` : undefined;\n        const fontData = color ? { color } : undefined;\n        return {\n            priority: decorations[0].weight,\n            fontData,\n            tailDecorations: decorations.map(decoration => this.toTailDecoration(decoration, fontData, bubble))\n        };\n    }\n\n    protected toTailDecoration(decoration: Decoration, fontData?: TreeDecoration.FontData, bubble?: boolean): TreeDecoration.TailDecoration.AnyConcrete {\n        if (bubble) {\n            return { icon: 'circle', fontData, tooltip: this.bubbleTooltip };\n        }\n        return { data: decoration.letter ?? '', fontData, tooltip: decoration.tooltip };\n    }\n\n    protected propagateDecorationsByUri(child: URI, decorations: Decoration[]): void {\n        const highestPriorityBubblingDecoration = decorations.find(decoration => decoration.bubble);\n        if (highestPriorityBubblingDecoration) {\n            const bubbleDecoration = this.toTheiaDecoration([highestPriorityBubblingDecoration], true);\n            let parent = child.parent;\n            let handledRoot = false;\n            while (!handledRoot) {\n                handledRoot = parent.path.isRoot;\n                const parentString = parent.toString();\n                const existingDecoration = this.parentDecorations.get(parentString);\n                if (!existingDecoration || this.compareWeight(bubbleDecoration, existingDecoration) < 0) {\n                    this.parentDecorations.set(parentString, bubbleDecoration);\n                } else {\n                    break;\n                }\n                parent = parent.parent;\n            }\n        }\n    }\n\n    /**\n     *  Sort higher priorities earlier. I.e. positive number means right higher than left.\n     */\n    protected compareWeight(left: Decoration, right: Decoration): number {\n        return (right.weight ?? 0) - (left.weight ?? 0);\n    }\n\n    protected getUriForNode(node: TreeNode): string | undefined {\n        return FileStatNode.getUri(node);\n    }\n\n    fireDidChangeDecorations(): void {\n        this.onDidChangeDecorationsEmitter.fire(tree => this.collectDecorations(tree));\n    }\n}\n","// *****************************************************************************\n// Copyright (C) 2019 TypeFox and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\nimport { injectable, inject } from '@theia/core/shared/inversify';\nimport { LabelProviderContribution, DidChangeLabelEvent, LabelProvider } from '@theia/core/lib/browser/label-provider';\nimport { FileStatNode } from './file-tree';\nimport { TreeLabelProvider } from '@theia/core/lib/browser/tree/tree-label-provider';\n\n@injectable()\nexport class FileTreeLabelProvider implements LabelProviderContribution {\n\n    @inject(LabelProvider)\n    protected readonly labelProvider: LabelProvider;\n\n    @inject(TreeLabelProvider)\n    protected readonly treeLabelProvider: TreeLabelProvider;\n\n    canHandle(element: object): number {\n        return FileStatNode.is(element) ?\n            this.treeLabelProvider.canHandle(element) + 1 :\n            0;\n    }\n\n    getIcon(node: FileStatNode): string {\n        return this.labelProvider.getIcon(node.fileStat);\n    }\n\n    getName(node: FileStatNode): string {\n        return this.labelProvider.getName(node.fileStat);\n    }\n\n    getDescription(node: FileStatNode): string {\n        return this.labelProvider.getLongName(node.fileStat);\n    }\n\n    affects(node: FileStatNode, event: DidChangeLabelEvent): boolean {\n        return event.affects(node.fileStat);\n    }\n\n}\n","// *****************************************************************************\n// Copyright (C) 2017 TypeFox and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\nimport { injectable, inject, postConstruct } from '@theia/core/shared/inversify';\nimport URI from '@theia/core/lib/common/uri';\nimport { CompositeTreeNode, TreeNode, ConfirmDialog, CompressedTreeModel, Dialog } from '@theia/core/lib/browser';\nimport { FileStatNode, DirNode, FileNode } from './file-tree';\nimport { LocationService } from '../location';\nimport { LabelProvider } from '@theia/core/lib/browser/label-provider';\nimport { FileService } from '../file-service';\nimport { FileOperationError, FileOperationResult, FileChangesEvent, FileChangeType, FileChange, FileOperation, FileOperationEvent } from '../../common/files';\nimport { MessageService } from '@theia/core/lib/common/message-service';\nimport { EnvVariablesServer } from '@theia/core/lib/common/env-variables';\nimport { FileSystemUtils } from '../../common';\nimport { nls } from '@theia/core';\n\n@injectable()\nexport class FileTreeModel extends CompressedTreeModel implements LocationService {\n\n    @inject(LabelProvider) protected readonly labelProvider: LabelProvider;\n\n    @inject(FileService)\n    protected readonly fileService: FileService;\n\n    @inject(MessageService)\n    protected readonly messageService: MessageService;\n\n    @inject(EnvVariablesServer)\n    protected readonly environments: EnvVariablesServer;\n\n    @postConstruct()\n    protected override init(): void {\n        super.init();\n        this.toDispose.push(this.fileService.onDidFilesChange(changes => this.onFilesChanged(changes)));\n        this.toDispose.push(this.fileService.onDidRunOperation(event => this.onDidMove(event)));\n    }\n\n    get location(): URI | undefined {\n        const root = this.root;\n        if (FileStatNode.is(root)) {\n            return root.uri;\n        }\n        return undefined;\n    }\n\n    set location(uri: URI | undefined) {\n        if (uri) {\n            this.fileService.resolve(uri).then(fileStat => {\n                if (fileStat) {\n                    const node = DirNode.createRoot(fileStat);\n                    this.navigateTo(node);\n                }\n            }).catch(() => {\n                // no-op, allow failures for file dialog text input\n            });\n        } else {\n            this.navigateTo(undefined);\n        }\n    }\n\n    async drives(): Promise<URI[]> {\n        try {\n            const drives = await this.environments.getDrives();\n            return drives.map(uri => new URI(uri));\n        } catch (e) {\n            this.logger.error('Error when loading drives.', e);\n            return [];\n        }\n    }\n\n    get selectedFileStatNodes(): Readonly<FileStatNode>[] {\n        return this.selectedNodes.filter(FileStatNode.is);\n    }\n\n    *getNodesByUri(uri: URI): IterableIterator<TreeNode> {\n        const node = this.getNode(uri.toString());\n        if (node) {\n            yield node;\n        }\n    }\n\n    /**\n     * to workaround https://github.com/Axosoft/nsfw/issues/42\n     */\n    protected onDidMove(event: FileOperationEvent): void {\n        if (!event.isOperation(FileOperation.MOVE)) {\n            return;\n        }\n        if (event.resource.parent.toString() === event.target.resource.parent.toString()) {\n            // file rename\n            return;\n        }\n        this.refreshAffectedNodes([\n            event.resource,\n            event.target.resource\n        ]);\n    }\n\n    protected onFilesChanged(changes: FileChangesEvent): void {\n        if (!this.refreshAffectedNodes(this.getAffectedUris(changes)) && this.isRootAffected(changes)) {\n            this.refresh();\n        }\n    }\n\n    protected isRootAffected(changes: FileChangesEvent): boolean {\n        const root = this.root;\n        if (FileStatNode.is(root)) {\n            return changes.contains(root.uri, FileChangeType.ADDED) || changes.contains(root.uri, FileChangeType.UPDATED);\n        }\n        return false;\n    }\n\n    protected getAffectedUris(changes: FileChangesEvent): URI[] {\n        return changes.changes.filter(change => !this.isFileContentChanged(change)).map(change => change.resource);\n    }\n\n    protected isFileContentChanged(change: FileChange): boolean {\n        return change.type === FileChangeType.UPDATED && FileNode.is(this.getNodesByUri(change.resource).next().value);\n    }\n\n    protected refreshAffectedNodes(uris: URI[]): boolean {\n        const nodes = this.getAffectedNodes(uris);\n        for (const node of nodes.values()) {\n            this.refresh(node);\n        }\n        return nodes.size !== 0;\n    }\n\n    protected getAffectedNodes(uris: URI[]): Map<string, CompositeTreeNode> {\n        const nodes = new Map<string, CompositeTreeNode>();\n        for (const uri of uris) {\n            for (const node of this.getNodesByUri(uri.parent)) {\n                if (DirNode.is(node) && (node.expanded || (this.compressionToggle.compress && this.compressionService.isCompressionParticipant(node)))) {\n                    nodes.set(node.id, node);\n                }\n            }\n        }\n        return nodes;\n    }\n\n    async copy(source: URI, target: Readonly<FileStatNode>): Promise<URI> {\n        /** If the target is a file or if the target is a directory, but is the same as the source, use the parent of the target as a destination. */\n        const parentNode = (target.fileStat.isFile || target.uri.isEqual(source)) ? target.parent : target;\n        if (!FileStatNode.is(parentNode)) {\n            throw new Error('Parent of file has to be a FileStatNode');\n        }\n        let targetUri = parentNode.uri.resolve(source.path.base);\n        try {\n            const parent = await this.fileService.resolve(parentNode.uri);\n            const sourceFileStat = await this.fileService.resolve(source);\n            targetUri = FileSystemUtils.generateUniqueResourceURI(parent, targetUri, sourceFileStat.isDirectory, 'copy');\n            await this.fileService.copy(source, targetUri);\n        } catch (e) {\n            this.messageService.error(e.message);\n        }\n        return targetUri;\n    }\n\n    /**\n     * Move the given source file or directory to the given target directory.\n     */\n    async move(source: TreeNode, target: TreeNode): Promise<URI | undefined> {\n        if (DirNode.is(target) && FileStatNode.is(source)) {\n            const name = source.fileStat.name;\n            const targetUri = target.uri.resolve(name);\n            if (source.uri.isEqual(targetUri)) { return; }\n            try {\n                await this.fileService.move(source.uri, targetUri);\n                return targetUri;\n            } catch (e) {\n                if (e instanceof FileOperationError && e.fileOperationResult === FileOperationResult.FILE_MOVE_CONFLICT) {\n                    const fileName = this.labelProvider.getName(source);\n                    if (await this.shouldReplace(fileName)) {\n                        try {\n                            await this.fileService.move(source.uri, targetUri, { overwrite: true });\n                            return targetUri;\n                        } catch (e2) {\n                            this.messageService.error(e2.message);\n                        }\n                    }\n                } else {\n                    this.messageService.error(e.message);\n                }\n            }\n        }\n        return undefined;\n    }\n\n    protected async shouldReplace(fileName: string): Promise<boolean> {\n        const dialog = new ConfirmDialog({\n            title: nls.localize('theia/filesystem/replaceTitle', 'Replace File'),\n            msg: nls.localizeByDefault('{0} already exists. Are you sure you want to overwrite it?', fileName),\n            ok: Dialog.YES,\n            cancel: Dialog.NO\n        });\n        return !!await dialog.open();\n    }\n\n}\n","// *****************************************************************************\n// Copyright (C) 2017 TypeFox and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\nimport * as React from '@theia/core/shared/react';\nimport { injectable, inject } from '@theia/core/shared/inversify';\nimport { DisposableCollection, Disposable } from '@theia/core/lib/common/disposable';\nimport URI from '@theia/core/lib/common/uri';\nimport { UriSelection } from '@theia/core/lib/common/selection';\nimport { isCancelled } from '@theia/core/lib/common/cancellation';\nimport { ContextMenuRenderer, NodeProps, TreeProps, TreeNode, CompositeTreeNode, CompressedTreeWidget, CompressedNodeProps } from '@theia/core/lib/browser';\nimport { FileUploadService } from '../file-upload-service';\nimport { DirNode, FileStatNode, FileStatNodeData } from './file-tree';\nimport { FileTreeModel } from './file-tree-model';\nimport { IconThemeService } from '@theia/core/lib/browser/icon-theme-service';\nimport { ApplicationShell } from '@theia/core/lib/browser/shell';\nimport { FileStat, FileType } from '../../common/files';\nimport { isOSX } from '@theia/core';\n\nexport const FILE_TREE_CLASS = 'theia-FileTree';\nexport const FILE_STAT_NODE_CLASS = 'theia-FileStatNode';\nexport const DIR_NODE_CLASS = 'theia-DirNode';\nexport const FILE_STAT_ICON_CLASS = 'theia-FileStatIcon';\n\n@injectable()\nexport class FileTreeWidget extends CompressedTreeWidget {\n\n    protected readonly toCancelNodeExpansion = new DisposableCollection();\n\n    @inject(FileUploadService)\n    protected readonly uploadService: FileUploadService;\n\n    @inject(IconThemeService)\n    protected readonly iconThemeService: IconThemeService;\n\n    constructor(\n        @inject(TreeProps) props: TreeProps,\n        @inject(FileTreeModel) override readonly model: FileTreeModel,\n        @inject(ContextMenuRenderer) contextMenuRenderer: ContextMenuRenderer\n    ) {\n        super(props, model, contextMenuRenderer);\n        this.addClass(FILE_TREE_CLASS);\n        this.toDispose.push(this.toCancelNodeExpansion);\n    }\n\n    protected override createNodeClassNames(node: TreeNode, props: NodeProps): string[] {\n        const classNames = super.createNodeClassNames(node, props);\n        if (FileStatNode.is(node)) {\n            classNames.push(FILE_STAT_NODE_CLASS);\n        }\n        if (DirNode.is(node)) {\n            classNames.push(DIR_NODE_CLASS);\n        }\n        return classNames;\n    }\n\n    protected override renderIcon(node: TreeNode, props: NodeProps): React.ReactNode {\n        const icon = this.toNodeIcon(node);\n        if (icon) {\n            return <div className={icon + ' file-icon'}></div>;\n        }\n        // eslint-disable-next-line no-null/no-null\n        return null;\n    }\n\n    protected override createContainerAttributes(): React.HTMLAttributes<HTMLElement> {\n        const attrs = super.createContainerAttributes();\n        return {\n            ...attrs,\n            onDragEnter: event => this.handleDragEnterEvent(this.model.root, event),\n            onDragOver: event => this.handleDragOverEvent(this.model.root, event),\n            onDragLeave: event => this.handleDragLeaveEvent(this.model.root, event),\n            onDrop: event => this.handleDropEvent(this.model.root, event)\n        };\n    }\n\n    protected override createNodeAttributes(node: TreeNode, props: NodeProps): React.Attributes & React.HTMLAttributes<HTMLElement> {\n        return {\n            ...super.createNodeAttributes(node, props),\n            ...this.getNodeDragHandlers(node, props),\n            title: this.getNodeTooltip(node)\n        };\n    }\n\n    protected getNodeTooltip(node: TreeNode): string | undefined {\n        const operativeNode = this.compressionService.getCompressionChain(node)?.tail() ?? node;\n        const uri = UriSelection.getUri(operativeNode);\n        return uri ? uri.path.fsPath() : undefined;\n    }\n\n    protected override getCaptionChildEventHandlers(node: TreeNode, props: CompressedNodeProps): React.Attributes & React.HtmlHTMLAttributes<HTMLElement> {\n        return {\n            ...super.getCaptionChildEventHandlers(node, props),\n            ...this.getNodeDragHandlers(node, props),\n        };\n    }\n\n    protected getNodeDragHandlers(node: TreeNode, props: CompressedNodeProps): React.Attributes & React.HtmlHTMLAttributes<HTMLElement> {\n        return {\n            onDragStart: event => this.handleDragStartEvent(node, event),\n            onDragEnter: event => this.handleDragEnterEvent(node, event),\n            onDragOver: event => this.handleDragOverEvent(node, event),\n            onDragLeave: event => this.handleDragLeaveEvent(node, event),\n            onDrop: event => this.handleDropEvent(node, event),\n            draggable: FileStatNode.is(node),\n        };\n    }\n\n    protected handleDragStartEvent(node: TreeNode, event: React.DragEvent): void {\n        event.stopPropagation();\n        if (event.dataTransfer) {\n            let selectedNodes;\n            if (this.model.selectedNodes.find(selected => TreeNode.equals(selected, node))) {\n                selectedNodes = [...this.model.selectedNodes];\n            } else {\n                selectedNodes = [node];\n            }\n            this.setSelectedTreeNodesAsData(event.dataTransfer, node, selectedNodes);\n            const uris = selectedNodes.filter(FileStatNode.is).map(n => n.fileStat.resource);\n            if (uris.length > 0) {\n                ApplicationShell.setDraggedEditorUris(event.dataTransfer, uris);\n            }\n            let label: string;\n            if (selectedNodes.length === 1) {\n                label = this.toNodeName(node);\n            } else {\n                label = String(selectedNodes.length);\n            }\n            const dragImage = document.createElement('div');\n            dragImage.className = 'theia-file-tree-drag-image';\n            dragImage.textContent = label;\n            document.body.appendChild(dragImage);\n            event.dataTransfer.setDragImage(dragImage, -10, -10);\n            setTimeout(() => document.body.removeChild(dragImage), 0);\n        }\n    }\n\n    protected handleDragEnterEvent(node: TreeNode | undefined, event: React.DragEvent): void {\n        event.preventDefault();\n        event.stopPropagation();\n        this.toCancelNodeExpansion.dispose();\n        const containing = DirNode.getContainingDir(node);\n        if (!!containing && !containing.selected) {\n            this.model.selectNode(containing);\n        }\n    }\n\n    protected handleDragOverEvent(node: TreeNode | undefined, event: React.DragEvent): void {\n        event.preventDefault();\n        event.stopPropagation();\n        event.dataTransfer.dropEffect = this.getDropEffect(event);\n        if (!this.toCancelNodeExpansion.disposed) {\n            return;\n        }\n        const timer = setTimeout(() => {\n            const containing = DirNode.getContainingDir(node);\n            if (!!containing && !containing.expanded) {\n                this.model.expandNode(containing);\n            }\n        }, 500);\n        this.toCancelNodeExpansion.push(Disposable.create(() => clearTimeout(timer)));\n    }\n\n    protected handleDragLeaveEvent(node: TreeNode | undefined, event: React.DragEvent): void {\n        event.preventDefault();\n        event.stopPropagation();\n        this.toCancelNodeExpansion.dispose();\n    }\n\n    protected async handleDropEvent(node: TreeNode | undefined, event: React.DragEvent): Promise<void> {\n        try {\n            event.preventDefault();\n            event.stopPropagation();\n            event.dataTransfer.dropEffect = this.getDropEffect(event);\n            const containing = this.getDropTargetDirNode(node);\n            if (containing) {\n                const resources = this.getSelectedTreeNodesFromData(event.dataTransfer);\n                if (resources.length > 0) {\n                    for (const treeNode of resources) {\n                        if (event.dataTransfer.dropEffect === 'copy' && FileStatNode.is(treeNode)) {\n                            await this.model.copy(treeNode.uri, containing);\n                        } else {\n                            await this.model.move(treeNode, containing);\n                        }\n                    }\n                } else {\n                    await this.uploadService.upload(containing.uri, { source: event.dataTransfer });\n                }\n            }\n        } catch (e) {\n            if (!isCancelled(e)) {\n                console.error(e);\n            }\n        }\n    }\n\n    protected getDropTargetDirNode(node: TreeNode | undefined): DirNode | undefined {\n        if (CompositeTreeNode.is(node) && node.id === 'WorkspaceNodeId') {\n            if (node.children.length === 1) {\n                return DirNode.getContainingDir(node.children[0]);\n            } else if (node.children.length > 1) {\n                // move file to the last root folder in multi-root scenario\n                return DirNode.getContainingDir(node.children[node.children.length - 1]);\n            }\n        }\n        return DirNode.getContainingDir(node);\n    }\n\n    protected getDropEffect(event: React.DragEvent): 'copy' | 'move' {\n        const isCopy = isOSX ? event.altKey : event.ctrlKey;\n        return isCopy ? 'copy' : 'move';\n    }\n\n    protected setTreeNodeAsData(data: DataTransfer, node: TreeNode): void {\n        data.setData('tree-node', node.id);\n    }\n\n    protected setSelectedTreeNodesAsData(data: DataTransfer, sourceNode: TreeNode, relatedNodes: TreeNode[]): void {\n        this.setTreeNodeAsData(data, sourceNode);\n        data.setData('selected-tree-nodes', JSON.stringify(relatedNodes.map(node => node.id)));\n    }\n\n    protected getTreeNodeFromData(data: DataTransfer): TreeNode | undefined {\n        const id = data.getData('tree-node');\n        return this.model.getNode(id);\n    }\n    protected getSelectedTreeNodesFromData(data: DataTransfer): TreeNode[] {\n        const resources = data.getData('selected-tree-nodes');\n        if (!resources) {\n            return [];\n        }\n        const ids: string[] = JSON.parse(resources);\n        return ids.map(id => this.model.getNode(id)).filter(node => node !== undefined) as TreeNode[];\n    }\n\n    protected get hidesExplorerArrows(): boolean {\n        const theme = this.iconThemeService.getDefinition(this.iconThemeService.current);\n        return !!theme && !!theme.hidesExplorerArrows;\n    }\n\n    protected override renderExpansionToggle(node: TreeNode, props: NodeProps): React.ReactNode {\n        if (this.hidesExplorerArrows) {\n            // eslint-disable-next-line no-null/no-null\n            return null;\n        }\n        return super.renderExpansionToggle(node, props);\n    }\n\n    protected override getPaddingLeft(node: TreeNode, props: NodeProps): number {\n        if (this.hidesExplorerArrows) {\n            // additional left padding instead of top-level expansion toggle\n            return super.getPaddingLeft(node, props) + this.props.leftPadding;\n        }\n        return super.getPaddingLeft(node, props);\n    }\n\n    protected override needsExpansionTogglePadding(node: TreeNode): boolean {\n        const theme = this.iconThemeService.getDefinition(this.iconThemeService.current);\n        if (theme && (theme.hidesExplorerArrows || (theme.hasFileIcons && !theme.hasFolderIcons))) {\n            return false;\n        }\n        return super.needsExpansionTogglePadding(node);\n    }\n\n    protected override deflateForStorage(node: TreeNode): object {\n        const deflated = super.deflateForStorage(node);\n        if (FileStatNode.is(node) && FileStatNodeData.is(deflated)) {\n            deflated.uri = node.uri.toString();\n            delete deflated['fileStat'];\n            deflated.stat = FileStat.toStat(node.fileStat);\n        }\n        return deflated;\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    protected override inflateFromStorage(node: any, parent?: TreeNode): TreeNode {\n        if (FileStatNodeData.is(node)) {\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            const fileStatNode: FileStatNode = node as any;\n            const resource = new URI(node.uri);\n            fileStatNode.uri = resource;\n            let stat: typeof node['stat'];\n            // in order to support deprecated FileStat\n            if (node.fileStat) {\n                stat = {\n                    type: node.fileStat.isDirectory ? FileType.Directory : FileType.File,\n                    mtime: node.fileStat.mtime,\n                    size: node.fileStat.size\n                };\n                delete node['fileStat'];\n            } else if (node.stat) {\n                stat = node.stat;\n                delete node['stat'];\n            }\n            if (stat) {\n                fileStatNode.fileStat = FileStat.fromStat(resource, stat);\n            }\n        }\n        const inflated = super.inflateFromStorage(node, parent);\n        if (DirNode.is(inflated)) {\n            inflated.fileStat.children = [];\n            for (const child of inflated.children) {\n                if (FileStatNode.is(child)) {\n                    inflated.fileStat.children.push(child.fileStat);\n                }\n            }\n        }\n        return inflated;\n    }\n\n    protected override getDepthPadding(depth: number): number {\n        // add additional depth so file nodes are rendered with padding in relation to the top level root node.\n        return super.getDepthPadding(depth + 1);\n    }\n}\n","// *****************************************************************************\n// Copyright (C) 2017 TypeFox and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\nimport { injectable, inject } from '@theia/core/shared/inversify';\nimport URI from '@theia/core/lib/common/uri';\nimport { isObject, Mutable } from '@theia/core/lib/common';\nimport { TreeNode, CompositeTreeNode, SelectableTreeNode, ExpandableTreeNode, TreeImpl } from '@theia/core/lib/browser';\nimport { FileStat, Stat, FileType, FileOperationError, FileOperationResult } from '../../common/files';\nimport { UriSelection } from '@theia/core/lib/common/selection';\nimport { MessageService } from '@theia/core/lib/common/message-service';\nimport { FileSelection } from '../file-selection';\nimport { FileService } from '../file-service';\n\n@injectable()\nexport class FileTree extends TreeImpl {\n\n    @inject(FileService)\n    protected readonly fileService: FileService;\n\n    @inject(MessageService)\n    protected readonly messagingService: MessageService;\n\n    override async resolveChildren(parent: CompositeTreeNode): Promise<TreeNode[]> {\n        if (FileStatNode.is(parent)) {\n            const fileStat = await this.resolveFileStat(parent);\n            if (fileStat) {\n                return this.toNodes(fileStat, parent);\n            }\n            return [];\n        }\n        return super.resolveChildren(parent);\n    }\n\n    protected async resolveFileStat(node: FileStatNode): Promise<FileStat | undefined> {\n        try {\n            const fileStat = await this.fileService.resolve(node.uri);\n            node.fileStat = fileStat;\n            return fileStat;\n        } catch (e) {\n            if (!(e instanceof FileOperationError && e.fileOperationResult === FileOperationResult.FILE_NOT_FOUND)) {\n                this.messagingService.error(e.message);\n            }\n            return undefined;\n        }\n    }\n\n    protected async toNodes(fileStat: FileStat, parent: CompositeTreeNode): Promise<TreeNode[]> {\n        if (!fileStat.children) {\n            return [];\n        }\n        const result = await Promise.all(fileStat.children.map(async child =>\n            this.toNode(child, parent)\n        ));\n        return result.sort(DirNode.compare);\n    }\n\n    protected toNode(fileStat: FileStat, parent: CompositeTreeNode): FileNode | DirNode {\n        const uri = fileStat.resource;\n        const id = this.toNodeId(uri, parent);\n        const node = this.getNode(id);\n        if (fileStat.isDirectory) {\n            if (DirNode.is(node)) {\n                node.fileStat = fileStat;\n                return node;\n            }\n            return <DirNode>{\n                id, uri, fileStat, parent,\n                expanded: false,\n                selected: false,\n                children: []\n            };\n        }\n        if (FileNode.is(node)) {\n            node.fileStat = fileStat;\n            return node;\n        }\n        return <FileNode>{\n            id, uri, fileStat, parent,\n            selected: false\n        };\n    }\n\n    protected toNodeId(uri: URI, parent: CompositeTreeNode): string {\n        return uri.path.toString();\n    }\n}\n\nexport interface FileStatNode extends SelectableTreeNode, Mutable<UriSelection>, FileSelection {\n}\nexport namespace FileStatNode {\n    export function is(node: unknown): node is FileStatNode {\n        return isObject(node) && 'fileStat' in node;\n    }\n\n    export function getUri(node: TreeNode | undefined): string | undefined {\n        if (is(node)) {\n            return node.fileStat.resource.toString();\n        }\n        return undefined;\n    }\n}\n\nexport type FileStatNodeData = Omit<FileStatNode, 'uri' | 'fileStat'> & {\n    uri: string\n    stat?: Stat | { type: FileType } & Partial<Stat>\n    fileStat?: FileStat\n};\nexport namespace FileStatNodeData {\n    export function is(node: unknown): node is FileStatNodeData {\n        return isObject(node) && 'uri' in node && ('fileStat' in node || 'stat' in node);\n    }\n}\n\nexport type FileNode = FileStatNode;\nexport namespace FileNode {\n    export function is(node: unknown): node is FileNode {\n        return FileStatNode.is(node) && !node.fileStat.isDirectory;\n    }\n}\n\nexport type DirNode = FileStatNode & ExpandableTreeNode;\nexport namespace DirNode {\n    export function is(node: unknown): node is DirNode {\n        return FileStatNode.is(node) && node.fileStat.isDirectory;\n    }\n\n    export function compare(node: TreeNode, node2: TreeNode): number {\n        return DirNode.dirCompare(node, node2) || uriCompare(node, node2);\n    }\n\n    export function uriCompare(node: TreeNode, node2: TreeNode): number {\n        if (FileStatNode.is(node)) {\n            if (FileStatNode.is(node2)) {\n                return node.uri.displayName.localeCompare(node2.uri.displayName);\n            }\n            return 1;\n        }\n        if (FileStatNode.is(node2)) {\n            return -1;\n        }\n        return 0;\n    }\n\n    export function dirCompare(node: TreeNode, node2: TreeNode): number {\n        const a = DirNode.is(node) ? 1 : 0;\n        const b = DirNode.is(node2) ? 1 : 0;\n        return b - a;\n    }\n\n    export function createRoot(fileStat: FileStat): DirNode {\n        const uri = fileStat.resource;\n        const id = uri.toString();\n        return {\n            id, uri, fileStat,\n            visible: true,\n            parent: undefined,\n            children: [],\n            expanded: true,\n            selected: false\n        };\n    }\n\n    export function getContainingDir(node: TreeNode | undefined): DirNode | undefined {\n        let containing = node;\n        while (!!containing && !is(containing)) {\n            containing = containing.parent;\n        }\n        return containing;\n    }\n}\n","// *****************************************************************************\n// Copyright (C) 2017 TypeFox and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\nexport * from './file-tree';\nexport * from './file-tree-model';\nexport * from './file-tree-widget';\nexport * from './file-tree-container';\nexport * from './file-tree-decorator-adapter';\nexport * from './file-tree-label-provider';\n","// *****************************************************************************\n// Copyright (C) 2019 TypeFox and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\n/* eslint-disable @typescript-eslint/no-explicit-any */\n\nimport { injectable, inject, postConstruct } from '@theia/core/shared/inversify';\nimport URI from '@theia/core/lib/common/uri';\nimport { CancellationTokenSource, CancellationToken, checkCancelled, cancelled, isCancelled } from '@theia/core/lib/common/cancellation';\nimport { Deferred } from '@theia/core/lib/common/promise-util';\nimport { MessageService } from '@theia/core/lib/common/message-service';\nimport { Progress } from '@theia/core/lib/common/message-service-protocol';\nimport { Endpoint } from '@theia/core/lib/browser/endpoint';\nimport throttle = require('@theia/core/shared/lodash.throttle');\nimport { HTTP_FILE_UPLOAD_PATH } from '../common/file-upload';\nimport { Semaphore } from 'async-mutex';\nimport { FileSystemPreferences } from './filesystem-preferences';\nimport { FileService } from './file-service';\nimport { ConfirmDialog, Dialog } from '@theia/core/lib/browser';\nimport { nls } from '@theia/core/lib/common/nls';\n\nexport const HTTP_UPLOAD_URL: string = new Endpoint({ path: HTTP_FILE_UPLOAD_PATH }).getRestUrl().toString(true);\n\nexport interface CustomDataTransfer {\n    values(): Iterable<CustomDataTransferItem>\n}\n\nexport interface CustomDataTransferItem {\n    readonly id: string;\n    asFile(): {\n        readonly name: string;\n        data(): Promise<Uint8Array>;\n    } | undefined\n}\nexport interface FileUploadParams {\n    source?: DataTransfer | CustomDataTransfer\n    progress?: FileUploadProgressParams\n    onDidUpload?: (uri: string) => void;\n    leaveInTemp?: boolean // dont move file out of the initial tmp directory\n}\nexport interface FileUploadProgressParams {\n    text: string\n}\n\nexport interface FileUploadResult {\n    uploaded: string[]\n}\n\n@injectable()\nexport class FileUploadService {\n\n    static TARGET = 'target';\n    static UPLOAD = 'upload';\n\n    protected uploadForm: FileUploadService.Form;\n    protected deferredUpload?: Deferred<FileUploadResult>;\n\n    @inject(MessageService)\n    protected readonly messageService: MessageService;\n\n    @inject(FileSystemPreferences)\n    protected fileSystemPreferences: FileSystemPreferences;\n\n    @inject(FileService)\n    protected fileService: FileService;\n\n    get maxConcurrentUploads(): number {\n        const maxConcurrentUploads = this.fileSystemPreferences['files.maxConcurrentUploads'];\n        return maxConcurrentUploads > 0 ? maxConcurrentUploads : Infinity;\n    }\n\n    @postConstruct()\n    protected init(): void {\n        this.uploadForm = this.createUploadForm();\n    }\n\n    protected createUploadForm(): FileUploadService.Form {\n        const targetInput = document.createElement('input');\n        targetInput.type = 'text';\n        targetInput.spellcheck = false;\n        targetInput.name = FileUploadService.TARGET;\n        targetInput.classList.add('theia-input');\n\n        const fileInput = document.createElement('input');\n        fileInput.type = 'file';\n        fileInput.classList.add('theia-input');\n        fileInput.name = FileUploadService.UPLOAD;\n        fileInput.multiple = true;\n\n        const form = document.createElement('form');\n        form.style.display = 'none';\n        form.enctype = 'multipart/form-data';\n        form.append(targetInput);\n        form.append(fileInput);\n\n        document.body.appendChild(form);\n\n        fileInput.addEventListener('change', () => {\n            if (this.deferredUpload && fileInput.value) {\n                const source: FileUploadService.Source = new FormData(form);\n                // clean up to allow upload to the same folder twice\n                fileInput.value = '';\n                const targetUri = new URI(<string>source.get(FileUploadService.TARGET));\n                const { resolve, reject } = this.deferredUpload;\n                this.deferredUpload = undefined;\n                const { onDidUpload } = this.uploadForm;\n                this.withProgress(\n                    (progress, token) => this.uploadAll(targetUri, { source, progress, token, onDidUpload }),\n                    this.uploadForm.progress\n                ).then(resolve, reject);\n            }\n        });\n        return { targetInput, fileInput };\n    }\n\n    async upload(targetUri: string | URI, params: FileUploadParams = {}): Promise<FileUploadResult> {\n        const { source, onDidUpload, leaveInTemp } = params;\n        if (source) {\n            return this.withProgress(\n                (progress, token) => this.uploadAll(\n                    typeof targetUri === 'string' ? new URI(targetUri) : targetUri,\n                    { source, progress, token, leaveInTemp, onDidUpload }\n                ),\n                params.progress,\n            );\n        }\n        this.deferredUpload = new Deferred<FileUploadResult>();\n        this.uploadForm.targetInput.value = String(targetUri);\n        this.uploadForm.fileInput.click();\n        this.uploadForm.progress = params.progress;\n        this.uploadForm.onDidUpload = params.onDidUpload;\n        return this.deferredUpload.promise;\n    }\n\n    protected getUploadUrl(): string {\n        return HTTP_UPLOAD_URL;\n    }\n\n    protected async uploadAll(targetUri: URI, params: FileUploadService.UploadParams): Promise<FileUploadResult> {\n        const responses: Promise<void>[] = [];\n        const status = new Map<File, {\n            total: number\n            done: number\n            uploaded?: boolean\n        }>();\n        const result: FileUploadResult = {\n            uploaded: []\n        };\n        /**\n         * When `false`: display the uploading progress.\n         * When `true`: display the server-processing progress.\n         */\n        let waitingForResponses = false;\n        const report = throttle(() => {\n            if (waitingForResponses) {\n                /** Number of files being processed. */\n                const total = status.size;\n                /** Number of files uploaded and processed. */\n                let done = 0;\n                for (const item of status.values()) {\n                    if (item.uploaded) {\n                        done += 1;\n                    }\n                }\n                params.progress.report({\n                    message: nls.localize('theia/filesystem/processedOutOf', 'Processed {0} out of {1}', done, total),\n                    work: { total, done }\n                });\n            } else {\n                /** Total number of bytes being uploaded. */\n                let total = 0;\n                /** Current number of bytes uploaded. */\n                let done = 0;\n                for (const item of status.values()) {\n                    total += item.total;\n                    done += item.done;\n                }\n                params.progress.report({\n                    message: nls.localize('theia/filesystem/uploadedOutOf', 'Uploaded {0} out of {1}', result.uploaded.length, status.size),\n                    work: { total, done }\n                });\n            }\n        }, 100);\n        const uploads: Promise<void>[] = [];\n        const uploadSemaphore = new Semaphore(this.maxConcurrentUploads);\n        try {\n            await this.index(targetUri, params.source, {\n                token: params.token,\n                progress: params.progress,\n                accept: async item => {\n                    if (await this.fileService.exists(item.uri) && !await this.confirmOverwrite(item.uri)) {\n                        return;\n                    }\n                    // Track and initialize the file in the status map:\n                    status.set(item.file, { total: item.file.size, done: 0 });\n                    report();\n                    // Don't await here: the semaphore will organize the uploading tasks, not the async indexer.\n                    uploads.push(uploadSemaphore.runExclusive(async () => {\n                        checkCancelled(params.token);\n                        const { upload, response } = this.uploadFile(item.file, item.uri, params.token, params.leaveInTemp, (total, done) => {\n                            const entry = status.get(item.file);\n                            if (entry) {\n                                entry.total = total;\n                                entry.done = done;\n                                report();\n                            }\n                        });\n                        function onError(error: Error): void {\n                            status.delete(item.file);\n                            throw error;\n                        }\n                        responses.push(response\n                            .then(() => {\n                                checkCancelled(params.token);\n                                // Consider the file uploaded once the server sends OK back.\n                                result.uploaded.push(item.uri.toString(true));\n                                const entry = status.get(item.file);\n                                if (entry) {\n                                    entry.uploaded = true;\n                                    report();\n                                }\n                            })\n                            .catch(onError)\n                        );\n                        // Have the queue wait for the upload only.\n                        return upload\n                            .catch(onError);\n                    }));\n                }\n            });\n            checkCancelled(params.token);\n            await Promise.all(uploads);\n            checkCancelled(params.token);\n            waitingForResponses = true;\n            report();\n            await Promise.all(responses);\n        } catch (error) {\n            uploadSemaphore.cancel();\n            if (!isCancelled(error)) {\n                throw error;\n            }\n        }\n        return result;\n    }\n\n    protected async confirmOverwrite(fileUri: URI): Promise<boolean> {\n        const dialog = new ConfirmDialog({\n            title: nls.localizeByDefault('Replace'),\n            msg: nls.localizeByDefault(\"A file or folder with the name '{0}' already exists in the destination folder. Do you want to replace it?\", fileUri.path.base),\n            ok: nls.localizeByDefault('Replace'),\n            cancel: Dialog.CANCEL\n        });\n        return !!await dialog.open();\n    }\n\n    protected uploadFile(\n        file: File,\n        targetUri: URI,\n        token: CancellationToken,\n        leaveInTemp: boolean | undefined,\n        onProgress: (total: number, done: number) => void\n    ): {\n        /**\n         * Promise that resolves once the uploading is finished.\n         *\n         * Rejects on network error.\n         * Rejects if status is not OK (200).\n         * Rejects if cancelled.\n         */\n        upload: Promise<void>\n        /**\n         * Promise that resolves after the uploading step, once the server answers back.\n         *\n         * Rejects on network error.\n         * Rejects if status is not OK (200).\n         * Rejects if cancelled.\n         */\n        response: Promise<void>\n    } {\n        const data = new FormData();\n        data.set('uri', targetUri.toString(true));\n        data.set('file', file);\n        if (leaveInTemp) {\n            data.set('leaveInTemp', 'true');\n        }\n        // TODO: Use Fetch API once it supports upload monitoring.\n        const xhr = new XMLHttpRequest();\n        token.onCancellationRequested(() => xhr.abort());\n        const upload = new Promise<void>((resolve, reject) => {\n            this.registerEvents(xhr.upload, unregister => ({\n                progress: (event: ProgressEvent<XMLHttpRequestEventTarget>) => {\n                    if (event.total === event.loaded) {\n                        unregister();\n                        resolve();\n                    } else {\n                        onProgress(event.total, event.loaded);\n                    }\n                },\n                abort: () => {\n                    unregister();\n                    reject(cancelled());\n                },\n                error: () => {\n                    unregister();\n                    reject(new Error('POST upload error'));\n                },\n                // `load` fires once the response is received, not when the upload is finished.\n                // `resolve` should be called earlier within `progress` but this is a safety catch.\n                load: () => {\n                    unregister();\n                    if (xhr.status === 200) {\n                        resolve();\n                    } else {\n                        reject(new Error(`POST request failed: ${xhr.status} ${xhr.statusText}`));\n                    }\n                },\n            }));\n        });\n        const response = new Promise<void>((resolve, reject) => {\n            this.registerEvents(xhr, unregister => ({\n                abort: () => {\n                    unregister();\n                    reject(cancelled());\n                },\n                error: () => {\n                    unregister();\n                    reject(new Error('POST request error'));\n                },\n                load: () => {\n                    unregister();\n                    if (xhr.status === 200) {\n                        resolve();\n                    } else {\n                        reject(new Error(`POST request failed: ${xhr.status} ${xhr.statusText}`));\n                    }\n                }\n            }));\n        });\n        xhr.open('POST', this.getUploadUrl(), /* async: */ true);\n        xhr.send(data);\n        return {\n            upload,\n            response\n        };\n    }\n\n    /**\n     * Utility function to attach events and get a callback to unregister those.\n     *\n     * You may not call `unregister` in the same tick as `register` is invoked.\n     */\n    protected registerEvents(\n        target: EventTarget,\n        register: (unregister: () => void) => Record<string, EventListenerOrEventListenerObject>\n    ): void {\n        const events = register(() => {\n            for (const [event, fn] of Object.entries(events)) {\n                target.removeEventListener(event, fn);\n            }\n        });\n        for (const [event, fn] of Object.entries(events)) {\n            target.addEventListener(event, fn);\n        }\n    }\n\n    protected async withProgress<T>(\n        cb: (progress: Progress, token: CancellationToken) => Promise<T>,\n        { text }: FileUploadProgressParams = { text: nls.localize('theia/filesystem/uploadFiles', 'Uploading Files') }\n    ): Promise<T> {\n        const cancellationSource = new CancellationTokenSource();\n        const { token } = cancellationSource;\n        const progress = await this.messageService.showProgress(\n            { text, options: { cancelable: true } },\n            () => cancellationSource.cancel()\n        );\n        try {\n            return await cb(progress, token);\n        } finally {\n            progress.cancel();\n        }\n    }\n\n    protected async index(targetUri: URI, source: FileUploadService.Source, context: FileUploadService.Context): Promise<void> {\n        if (source instanceof FormData) {\n            await this.indexFormData(targetUri, source, context);\n        } else if (source instanceof DataTransfer) {\n            await this.indexDataTransfer(targetUri, source, context);\n        } else {\n            await this.indexCustomDataTransfer(targetUri, source, context);\n        }\n    }\n\n    protected async indexFormData(targetUri: URI, formData: FormData, context: FileUploadService.Context): Promise<void> {\n        for (const entry of formData.getAll(FileUploadService.UPLOAD)) {\n            if (entry instanceof File) {\n                await this.indexFile(targetUri, entry, context);\n            }\n        }\n    }\n\n    protected async indexDataTransfer(targetUri: URI, dataTransfer: DataTransfer, context: FileUploadService.Context): Promise<void> {\n        checkCancelled(context.token);\n        if (dataTransfer.items) {\n            await this.indexDataTransferItemList(targetUri, dataTransfer.items, context);\n        } else {\n            await this.indexFileList(targetUri, dataTransfer.files, context);\n        }\n    }\n\n    protected async indexCustomDataTransfer(targetUri: URI, dataTransfer: CustomDataTransfer, context: FileUploadService.Context): Promise<void> {\n        for (const item of dataTransfer.values()) {\n            const fileInfo = item.asFile();\n            if (fileInfo) {\n                await this.indexFile(targetUri, new File([await fileInfo.data()], item.id), context);\n            }\n        }\n    }\n\n    protected async indexFileList(targetUri: URI, files: FileList, context: FileUploadService.Context): Promise<void> {\n        for (let i = 0; i < files.length; i++) {\n            const file = files[i];\n            if (file) {\n                await this.indexFile(targetUri, file, context);\n            }\n        }\n    }\n\n    protected async indexFile(targetUri: URI, file: File, context: FileUploadService.Context): Promise<void> {\n        await context.accept({\n            uri: targetUri.resolve(file.name),\n            file\n        });\n    }\n\n    protected async indexDataTransferItemList(targetUri: URI, items: DataTransferItemList, context: FileUploadService.Context): Promise<void> {\n        checkCancelled(context.token);\n        const entries: WebKitEntry[] = [];\n        for (let i = 0; i < items.length; i++) {\n            const entry = items[i].webkitGetAsEntry() as WebKitEntry;\n            entries.push(entry);\n        }\n        await this.indexEntries(targetUri, entries, context);\n\n    }\n\n    protected async indexEntry(targetUri: URI, entry: WebKitEntry | null, context: FileUploadService.Context): Promise<void> {\n        checkCancelled(context.token);\n        if (!entry) {\n            return;\n        }\n        if (entry.isDirectory) {\n            await this.indexDirectoryEntry(targetUri, entry as WebKitDirectoryEntry, context);\n        } else {\n            await this.indexFileEntry(targetUri, entry as WebKitFileEntry, context);\n        }\n    }\n\n    /**\n     *  Read all entries within a folder by block of 100 files or folders until the\n     *  whole folder has been read.\n     */\n    protected async indexDirectoryEntry(targetUri: URI, entry: WebKitDirectoryEntry, context: FileUploadService.Context): Promise<void> {\n        checkCancelled(context.token);\n        const newTargetUri = targetUri.resolve(entry.name);\n        return new Promise<void>(async (resolve, reject) => {\n            const reader = entry.createReader();\n            const getEntries = () => reader.readEntries(async results => {\n                try {\n                    if (!context.token.isCancellationRequested && results && results.length) {\n                        await this.indexEntries(newTargetUri, results, context);\n                        getEntries(); // loop to read all getEntries\n                    } else {\n                        resolve();\n                    }\n                } catch (e) {\n                    reject(e);\n                }\n            }, reject);\n            getEntries();\n        });\n    }\n\n    protected async indexEntries(targetUri: URI, entries: WebKitEntry[], context: FileUploadService.Context): Promise<void> {\n        checkCancelled(context.token);\n        for (let i = 0; i < entries.length; i++) {\n            await this.indexEntry(targetUri, entries[i], context);\n        }\n    }\n\n    protected async indexFileEntry(targetUri: URI, entry: WebKitFileEntry, context: FileUploadService.Context): Promise<void> {\n        await new Promise<void>((resolve, reject) => {\n            try {\n                entry.file(\n                    file => this.indexFile(targetUri, file, context).then(resolve, reject),\n                    reject,\n                );\n            } catch (e) {\n                reject(e);\n            }\n        });\n    }\n\n}\n\nexport namespace FileUploadService {\n    export type Source = FormData | DataTransfer | CustomDataTransfer;\n    export interface UploadEntry {\n        file: File\n        uri: URI\n    }\n    export interface Context {\n        progress: Progress\n        token: CancellationToken\n        accept: (entry: UploadEntry) => Promise<void>\n    }\n    export interface Form {\n        targetInput: HTMLInputElement\n        fileInput: HTMLInputElement\n        progress?: FileUploadProgressParams\n        onDidUpload?: (uri: string) => void\n    }\n    export interface UploadParams {\n        source: FileUploadService.Source,\n        progress: Progress,\n        token: CancellationToken,\n        onDidUpload?: (uri: string) => void,\n        leaveInTemp?: boolean\n    }\n}\n","// *****************************************************************************\n// Copyright (C) 2017 TypeFox and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\nimport { interfaces } from '@theia/core/shared/inversify';\nimport {\n    createPreferenceProxy,\n    PreferenceProxy,\n    PreferenceService,\n    PreferenceSchema,\n    PreferenceContribution\n} from '@theia/core/lib/browser/preferences';\nimport { SUPPORTED_ENCODINGS } from '@theia/core/lib/browser/supported-encodings';\nimport { nls } from '@theia/core/lib/common/nls';\n\n// See https://github.com/Microsoft/vscode/issues/30180\nexport const WIN32_MAX_FILE_SIZE_MB = 300; // 300 MB\nexport const GENERAL_MAX_FILE_SIZE_MB = 16 * 1024; // 16 GB\n\nexport const MAX_FILE_SIZE_MB = typeof process === 'object'\n    ? process.arch === 'ia32'\n        ? WIN32_MAX_FILE_SIZE_MB\n        : GENERAL_MAX_FILE_SIZE_MB\n    : 32;\n\nexport const filesystemPreferenceSchema: PreferenceSchema = {\n    type: 'object',\n    properties: {\n        'files.watcherExclude': {\n            // eslint-disable-next-line max-len\n            description: nls.localizeByDefault('Configure paths or [glob patterns](https://aka.ms/vscode-glob-patterns) to exclude from file watching. Paths can either be relative to the watched folder or absolute. Glob patterns are matched relative from the watched folder. When you experience the file watcher process consuming a lot of CPU, make sure to exclude large folders that are of less interest (such as build output folders).'),\n            additionalProperties: {\n                type: 'boolean'\n            },\n            default: {\n                '**/.git/objects/**': true,\n                '**/.git/subtree-cache/**': true,\n                '**/node_modules/**': true\n            },\n            scope: 'resource'\n        },\n        'files.exclude': {\n            type: 'object',\n            default: { '**/.git': true, '**/.svn': true, '**/.hg': true, '**/CVS': true, '**/.DS_Store': true },\n            // eslint-disable-next-line max-len\n            markdownDescription: nls.localize('theia/filesystem/filesExclude', 'Configure glob patterns for excluding files and folders. For example, the file Explorer decides which files and folders to show or hide based on this setting.'),\n            scope: 'resource'\n        },\n        'files.enableTrash': {\n            type: 'boolean',\n            default: true,\n            description: nls.localizeByDefault('Moves files/folders to the OS trash (recycle bin on Windows) when deleting. Disabling this will delete files/folders permanently.')\n        },\n        'files.associations': {\n            type: 'object',\n            markdownDescription: nls.localizeByDefault(\n                // eslint-disable-next-line max-len\n                'Configure [glob patterns](https://aka.ms/vscode-glob-patterns) of file associations to languages (for example `\\\"*.extension\\\": \\\"html\\\"`). Patterns will match on the absolute path of a file if they contain a path separator and will match on the name of the file otherwise. These have precedence over the default associations of the languages installed.'\n            )\n        },\n        'files.autoGuessEncoding': {\n            type: 'boolean',\n            default: false,\n            // eslint-disable-next-line max-len\n            description: nls.localizeByDefault('When enabled, the editor will attempt to guess the character set encoding when opening files. This setting can also be configured per language. Note, this setting is not respected by text search. Only {0} is respected.', '`#files.encoding#`'),\n            scope: 'language-overridable',\n            included: Object.keys(SUPPORTED_ENCODINGS).length > 1\n        },\n        'files.participants.timeout': {\n            type: 'number',\n            default: 5000,\n            markdownDescription: nls.localizeByDefault(\n                'Timeout in milliseconds after which file participants for create, rename, and delete are cancelled. Use `0` to disable participants.'\n            )\n        },\n        'files.maxFileSizeMB': {\n            type: 'number',\n            default: MAX_FILE_SIZE_MB,\n            markdownDescription: nls.localize('theia/filesystem/maxFileSizeMB', 'Controls the max file size in MB which is possible to open.')\n        },\n        'files.trimTrailingWhitespace': {\n            type: 'boolean',\n            default: false,\n            description: nls.localizeByDefault('When enabled, will trim trailing whitespace when saving a file.'),\n            scope: 'language-overridable'\n        },\n        'files.maxConcurrentUploads': {\n            type: 'integer',\n            default: 1,\n            description: nls.localize(\n                'theia/filesystem/maxConcurrentUploads',\n                'Maximum number of concurrent files to upload when uploading multiple files. 0 means all files will be uploaded concurrently.'\n            ),\n        }\n    }\n};\n\nexport interface FileSystemConfiguration {\n    'files.watcherExclude': { [globPattern: string]: boolean }\n    'files.exclude': { [key: string]: boolean }\n    'files.enableTrash': boolean\n    'files.associations': { [filepattern: string]: string }\n    'files.encoding': string\n    'files.autoGuessEncoding': boolean\n    'files.participants.timeout': number\n    'files.maxFileSizeMB': number\n    'files.trimTrailingWhitespace': boolean\n    'files.maxConcurrentUploads': number\n}\n\nexport const FileSystemPreferenceContribution = Symbol('FilesystemPreferenceContribution');\nexport const FileSystemPreferences = Symbol('FileSystemPreferences');\nexport type FileSystemPreferences = PreferenceProxy<FileSystemConfiguration>;\n\nexport function createFileSystemPreferences(preferences: PreferenceService, schema: PreferenceSchema = filesystemPreferenceSchema): FileSystemPreferences {\n    return createPreferenceProxy(preferences, schema);\n}\n\nexport function bindFileSystemPreferences(bind: interfaces.Bind): void {\n    bind(FileSystemPreferences).toDynamicValue(ctx => {\n        const preferences = ctx.container.get<PreferenceService>(PreferenceService);\n        const contribution = ctx.container.get<PreferenceContribution>(FileSystemPreferenceContribution);\n        return createFileSystemPreferences(preferences, contribution.schema);\n    }).inSingletonScope();\n    bind(FileSystemPreferenceContribution).toConstantValue({ schema: filesystemPreferenceSchema });\n    bind(PreferenceContribution).toService(FileSystemPreferenceContribution);\n}\n","// *****************************************************************************\n// Copyright (C) 2020 Arm and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\nimport { injectable, inject } from '@theia/core/shared/inversify';\nimport { environment } from '@theia/core/shared/@theia/application-package/lib/environment';\nimport { MessageService } from '@theia/core';\nimport { WindowService } from '@theia/core/lib/browser/window/window-service';\n\n@injectable()\nexport class FileSystemWatcherErrorHandler {\n\n    @inject(MessageService) protected readonly messageService: MessageService;\n    @inject(WindowService) protected readonly windowService: WindowService;\n\n    protected watchHandlesExhausted: boolean = false;\n\n    protected get instructionsLink(): string {\n        return 'https://code.visualstudio.com/docs/setup/linux#_visual-studio-code-is-unable-to-watch-for-file-changes-in-this-large-workspace-error-enospc';\n    }\n\n    public async handleError(): Promise<void> {\n        if (!this.watchHandlesExhausted) {\n            this.watchHandlesExhausted = true;\n            if (this.isElectron()) {\n                const instructionsAction = 'Instructions';\n                const action = await this.messageService.warn(\n                    'Unable to watch for file changes in this large workspace.  Please follow the instructions link to resolve this issue.',\n                    { timeout: 60000 },\n                    instructionsAction\n                );\n                if (action === instructionsAction) {\n                    this.windowService.openNewWindow(this.instructionsLink, { external: true });\n                }\n            } else {\n                await this.messageService.warn(\n                    'Unable to watch for file changes in this large workspace.  The information you see may not include recent file changes.',\n                    { timeout: 60000 }\n                );\n            }\n        }\n    }\n\n    protected isElectron(): boolean {\n        return environment.electron.is();\n    }\n\n}\n","// *****************************************************************************\n// Copyright (C) 2017 TypeFox and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\nexport * from './location-service';\nexport * from './location-renderer';\n","// *****************************************************************************\n// Copyright (C) 2017 TypeFox and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\nimport URI from '@theia/core/lib/common/uri';\nimport { LocationService } from './location-service';\nimport * as React from '@theia/core/shared/react';\nimport { FileService } from '../file-service';\nimport { DisposableCollection, Emitter, Path } from '@theia/core/lib/common';\nimport { injectable, inject, postConstruct } from '@theia/core/shared/inversify';\nimport { FileDialogModel } from '../file-dialog/file-dialog-model';\nimport { EnvVariablesServer } from '@theia/core/lib/common/env-variables';\nimport { ReactRenderer } from '@theia/core/lib/browser/widgets/react-renderer';\nimport { codicon } from '@theia/core/lib/browser';\n\ninterface AutoSuggestDataEvent {\n    parent: string;\n    children: string[];\n}\n\nclass ResolvedDirectoryCache {\n    protected pendingResolvedDirectories = new Map<string, Promise<void>>();\n    protected cachedDirectories = new Map<string, string[]>();\n\n    protected directoryResolvedEmitter = new Emitter<AutoSuggestDataEvent>();\n    readonly onDirectoryDidResolve = this.directoryResolvedEmitter.event;\n\n    constructor(protected readonly fileService: FileService) { }\n\n    tryResolveChildDirectories(inputAsURI: URI): string[] | undefined {\n        const parentDirectory = inputAsURI.path.dir.toString();\n        const cachedDirectories = this.cachedDirectories.get(parentDirectory);\n        const pendingDirectories = this.pendingResolvedDirectories.get(parentDirectory);\n        if (cachedDirectories) {\n            return cachedDirectories;\n        } else if (!pendingDirectories) {\n            this.pendingResolvedDirectories.set(parentDirectory, this.createResolutionPromise(parentDirectory));\n        }\n        return undefined;\n    }\n\n    protected async createResolutionPromise(directoryToResolve: string): Promise<void> {\n        return this.fileService.resolve(new URI(directoryToResolve)).then(({ children }) => {\n            if (children) {\n                const childDirectories = children.filter(child => child.isDirectory)\n                    .map(directory => `${directory.resource.path}/`);\n                this.cachedDirectories.set(directoryToResolve, childDirectories);\n                this.directoryResolvedEmitter.fire({ parent: directoryToResolve, children: childDirectories });\n            }\n        }).catch(e => {\n            // no-op\n        });\n    }\n}\n\nexport const LocationListRendererFactory = Symbol('LocationListRendererFactory');\nexport interface LocationListRendererFactory {\n    (options: LocationListRendererOptions): LocationListRenderer;\n}\n\nexport const LocationListRendererOptions = Symbol('LocationListRendererOptions');\nexport interface LocationListRendererOptions {\n    model: FileDialogModel;\n    host?: HTMLElement;\n}\n\n@injectable()\nexport class LocationListRenderer extends ReactRenderer {\n\n    @inject(FileService) protected readonly fileService: FileService;\n    @inject(EnvVariablesServer) protected readonly variablesServer: EnvVariablesServer;\n\n    protected directoryCache: ResolvedDirectoryCache;\n    protected service: LocationService;\n    protected toDisposeOnNewCache = new DisposableCollection();\n    protected _drives: URI[] | undefined;\n    protected _doShowTextInput = false;\n    protected homeDir: string;\n\n    get doShowTextInput(): boolean {\n        return this._doShowTextInput;\n    }\n    set doShowTextInput(doShow: boolean) {\n        this._doShowTextInput = doShow;\n        if (doShow) {\n            this.initResolveDirectoryCache();\n        }\n    }\n    protected lastUniqueTextInputLocation: URI | undefined;\n    protected previousAutocompleteMatch: string;\n    protected doAttemptAutocomplete = true;\n\n    constructor(\n        @inject(LocationListRendererOptions) readonly options: LocationListRendererOptions\n    ) {\n        super(options.host);\n        this.service = options.model;\n        this.doLoadDrives();\n        this.doAfterRender = this.doAfterRender.bind(this);\n    }\n\n    @postConstruct()\n    protected init(): void {\n        this.doInit();\n    }\n\n    protected async doInit(): Promise<void> {\n        const homeDirWithPrefix = await this.variablesServer.getHomeDirUri();\n        this.homeDir = (new URI(homeDirWithPrefix)).path.toString();\n    }\n\n    override render(): void {\n        this.hostRoot.render(this.doRender());\n    }\n\n    protected initResolveDirectoryCache(): void {\n        this.toDisposeOnNewCache.dispose();\n        this.directoryCache = new ResolvedDirectoryCache(this.fileService);\n        this.toDisposeOnNewCache.push(this.directoryCache.onDirectoryDidResolve(({ parent, children }) => {\n            if (this.locationTextInput) {\n                const expandedPath = Path.untildify(this.locationTextInput.value, this.homeDir);\n                const inputParent = (new URI(expandedPath)).path.dir.toString();\n                if (inputParent === parent) {\n                    this.tryRenderFirstMatch(this.locationTextInput, children);\n                }\n            }\n        }));\n    }\n\n    protected doAfterRender = (): void => {\n        const locationList = this.locationList;\n        const locationListTextInput = this.locationTextInput;\n        if (locationList) {\n            const currentLocation = this.service.location;\n            locationList.value = currentLocation ? currentLocation.toString() : '';\n        } else if (locationListTextInput) {\n            locationListTextInput.focus();\n        }\n    };\n\n    protected readonly handleLocationChanged = (e: React.ChangeEvent<HTMLSelectElement>) => this.onLocationChanged(e);\n    protected readonly handleTextInputOnChange = (e: React.ChangeEvent<HTMLInputElement>) => this.trySuggestDirectory(e);\n    protected readonly handleTextInputKeyDown = (e: React.KeyboardEvent<HTMLInputElement>) => this.handleControlKeys(e);\n    protected readonly handleIconKeyDown = (e: React.KeyboardEvent<HTMLSpanElement>) => this.toggleInputOnKeyDown(e);\n    protected readonly handleTextInputOnBlur = () => this.toggleToSelectInput();\n    protected readonly handleTextInputMouseDown = (e: React.MouseEvent<HTMLSpanElement>) => this.toggleToTextInputOnMouseDown(e);\n\n    protected override doRender(): React.ReactElement {\n        return (\n            <>\n                {this.renderInputIcon()}\n                {this.doShowTextInput\n                    ? this.renderTextInput()\n                    : this.renderSelectInput()\n                }\n            </>\n        );\n    }\n\n    protected renderInputIcon(): React.ReactNode {\n        return (\n            <span\n                // onMouseDown is used since it will fire before 'onBlur'. This prevents\n                // a re-render when textinput is in focus and user clicks toggle icon\n                onMouseDown={this.handleTextInputMouseDown}\n                onKeyDown={this.handleIconKeyDown}\n                className={LocationListRenderer.Styles.LOCATION_INPUT_TOGGLE_CLASS}\n                tabIndex={0}\n                id={`${this.doShowTextInput ? 'text-input' : 'select-input'}`}\n                title={this.doShowTextInput\n                    ? LocationListRenderer.Tooltips.TOGGLE_SELECT_INPUT\n                    : LocationListRenderer.Tooltips.TOGGLE_TEXT_INPUT}\n                ref={this.doAfterRender}\n            >\n                <i className={codicon(this.doShowTextInput ? 'folder-opened' : 'edit')} />\n            </span>\n        );\n    }\n\n    protected renderTextInput(): React.ReactNode {\n        return (\n            <input className={'theia-select ' + LocationListRenderer.Styles.LOCATION_TEXT_INPUT_CLASS}\n                defaultValue={this.service.location?.path.fsPath()}\n                onBlur={this.handleTextInputOnBlur}\n                onChange={this.handleTextInputOnChange}\n                onKeyDown={this.handleTextInputKeyDown}\n                spellCheck={false}\n            />\n        );\n    }\n\n    protected renderSelectInput(): React.ReactNode {\n        const options = this.collectLocations().map(value => this.renderLocation(value));\n        return (\n            <select className={`theia-select ${LocationListRenderer.Styles.LOCATION_LIST_CLASS}`}\n                onChange={this.handleLocationChanged}>\n                {...options}\n            </select>\n        );\n    }\n\n    protected toggleInputOnKeyDown(e: React.KeyboardEvent<HTMLSpanElement>): void {\n        if (e.key === 'Enter') {\n            this.doShowTextInput = true;\n            this.render();\n        }\n    }\n\n    protected toggleToTextInputOnMouseDown(e: React.MouseEvent<HTMLSpanElement>): void {\n        if (e.currentTarget.id === 'select-input') {\n            e.preventDefault();\n            this.doShowTextInput = true;\n            this.render();\n        }\n    }\n\n    protected toggleToSelectInput(): void {\n        if (this.doShowTextInput) {\n            this.doShowTextInput = false;\n            this.render();\n        }\n    }\n\n    /**\n     * Collects the available locations based on the currently selected, and appends the available drives to it.\n     */\n    protected collectLocations(): LocationListRenderer.Location[] {\n        const location = this.service.location;\n        const locations: LocationListRenderer.Location[] = (!!location ? location.allLocations : []).map(uri => ({ uri }));\n        if (this._drives) {\n            const drives = this._drives.map(uri => ({ uri, isDrive: true }));\n            // `URI.allLocations` returns with the URI without the trailing slash unlike `FileUri.create(fsPath)`.\n            // to be able to compare file:///path/to/resource with file:///path/to/resource/.\n            const toUriString = (uri: URI) => {\n                const toString = uri.toString();\n                return toString.endsWith('/') ? toString.slice(0, -1) : toString;\n            };\n            drives.forEach(drive => {\n                const index = locations.findIndex(loc => toUriString(loc.uri) === toUriString(drive.uri));\n                // Ignore drives which are already discovered as a location based on the current model root URI.\n                if (index === -1) {\n                    // Make sure, it does not have the trailing slash.\n                    locations.push({ uri: new URI(toUriString(drive.uri)), isDrive: true });\n                } else {\n                    // This is necessary for Windows to be able to show `/e:/` as a drive and `c:` as \"non-drive\" in the same way.\n                    // `URI.path.toString()` Vs. `URI.displayName` behaves a bit differently on Windows.\n                    // https://github.com/eclipse-theia/theia/pull/3038#issuecomment-425944189\n                    locations[index].isDrive = true;\n                }\n            });\n        }\n        this.doLoadDrives();\n        return locations;\n    }\n\n    /**\n     * Asynchronously loads the drives (if not yet available) and triggers a UI update on success with the new values.\n     */\n    protected doLoadDrives(): void {\n        if (!this._drives) {\n            this.service.drives().then(drives => {\n                // If the `drives` are empty, something already went wrong.\n                if (drives.length > 0) {\n                    this._drives = drives;\n                    this.render();\n                }\n            });\n        }\n    }\n\n    protected renderLocation(location: LocationListRenderer.Location): React.ReactNode {\n        const { uri, isDrive } = location;\n        const value = uri.toString();\n        return <option value={value} key={uri.toString()}>{isDrive ? uri.path.fsPath() : uri.displayName}</option>;\n    }\n\n    protected onLocationChanged(e: React.ChangeEvent<HTMLSelectElement>): void {\n        const locationList = this.locationList;\n        if (locationList) {\n            const value = locationList.value;\n            const uri = new URI(value);\n            this.trySetNewLocation(uri);\n            e.preventDefault();\n            e.stopPropagation();\n        }\n    }\n\n    protected trySetNewLocation(newLocation: URI): void {\n        if (this.lastUniqueTextInputLocation === undefined) {\n            this.lastUniqueTextInputLocation = this.service.location;\n        }\n        // prevent consecutive repeated locations from being added to location history\n        if (this.lastUniqueTextInputLocation?.path.toString() !== newLocation.path.toString()) {\n            this.lastUniqueTextInputLocation = newLocation;\n            this.service.location = newLocation;\n        }\n    }\n\n    protected trySuggestDirectory(e: React.ChangeEvent<HTMLInputElement>): void {\n        if (this.doAttemptAutocomplete) {\n            const inputElement = e.currentTarget;\n            const { value } = inputElement;\n            if ((value.startsWith('/') || value.startsWith('~/')) && value.slice(-1) !== '/') {\n                const expandedPath = Path.untildify(value, this.homeDir);\n                const valueAsURI = new URI(expandedPath);\n                const autocompleteDirectories = this.directoryCache.tryResolveChildDirectories(valueAsURI);\n                if (autocompleteDirectories) {\n                    this.tryRenderFirstMatch(inputElement, autocompleteDirectories);\n                }\n            }\n        }\n    }\n\n    protected tryRenderFirstMatch(inputElement: HTMLInputElement, children: string[]): void {\n        const { value, selectionStart } = inputElement;\n        if (this.locationTextInput) {\n            const expandedPath = Path.untildify(value, this.homeDir);\n            const firstMatch = children?.find(child => child.includes(expandedPath));\n            if (firstMatch) {\n                const contractedPath = value.startsWith('~') ? Path.tildify(firstMatch, this.homeDir) : firstMatch;\n                this.locationTextInput.value = contractedPath;\n                this.locationTextInput.selectionStart = selectionStart;\n                this.locationTextInput.selectionEnd = firstMatch.length;\n            }\n        }\n    }\n\n    protected handleControlKeys(e: React.KeyboardEvent<HTMLInputElement>): void {\n        this.doAttemptAutocomplete = e.key !== 'Backspace';\n        if (e.key === 'Enter') {\n            const locationTextInput = this.locationTextInput;\n            if (locationTextInput) {\n                // expand '~' if present and remove extra whitespace and any trailing slashes or periods.\n                const sanitizedInput = locationTextInput.value.trim().replace(/[\\/\\\\.]*$/, '');\n                const untildifiedInput = Path.untildify(sanitizedInput, this.homeDir);\n                const uri = new URI(untildifiedInput);\n                this.trySetNewLocation(uri);\n                this.toggleToSelectInput();\n            }\n        } else if (e.key === 'Escape') {\n            this.toggleToSelectInput();\n        } else if (e.key === 'Tab') {\n            e.preventDefault();\n            const textInput = this.locationTextInput;\n            if (textInput) {\n                textInput.selectionStart = textInput.value.length;\n            }\n        }\n        e.stopPropagation();\n    }\n\n    get locationList(): HTMLSelectElement | undefined {\n        const locationList = this.host.getElementsByClassName(LocationListRenderer.Styles.LOCATION_LIST_CLASS)[0];\n        if (locationList instanceof HTMLSelectElement) {\n            return locationList;\n        }\n        return undefined;\n    }\n\n    get locationTextInput(): HTMLInputElement | undefined {\n        const locationTextInput = this.host.getElementsByClassName(LocationListRenderer.Styles.LOCATION_TEXT_INPUT_CLASS)[0];\n        if (locationTextInput instanceof HTMLInputElement) {\n            return locationTextInput;\n        }\n        return undefined;\n    }\n\n    override dispose(): void {\n        super.dispose();\n        this.toDisposeOnNewCache.dispose();\n    }\n}\n\nexport namespace LocationListRenderer {\n\n    export namespace Styles {\n        export const LOCATION_LIST_CLASS = 'theia-LocationList';\n        export const LOCATION_INPUT_TOGGLE_CLASS = 'theia-LocationInputToggle';\n        export const LOCATION_TEXT_INPUT_CLASS = 'theia-LocationTextInput';\n    }\n\n    export namespace Tooltips {\n        export const TOGGLE_TEXT_INPUT = 'Switch to text-based input';\n        export const TOGGLE_SELECT_INPUT = 'Switch to location list';\n    }\n\n    export interface Location {\n        uri: URI;\n        isDrive?: boolean;\n    }\n\n}\n","// *****************************************************************************\n// Copyright (C) 2017 TypeFox and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\nimport URI from '@theia/core/lib/common/uri';\n\nexport interface LocationService {\n    location: URI | undefined;\n    drives(): Promise<URI[]>;\n}\n","// *****************************************************************************\n// Copyright (C) 2020 TypeFox and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\nimport URI from '@theia/core/lib/common/uri';\nimport { Event, Emitter, CancellationToken } from '@theia/core/lib/common';\nimport { Disposable, DisposableCollection } from '@theia/core/lib/common/disposable';\nimport {\n    FileSystemProvider, FileSystemProviderCapabilities, WatchOptions, FileDeleteOptions, FileOverwriteOptions, FileWriteOptions, FileOpenOptions, FileChange, Stat, FileType,\n    hasReadWriteCapability, hasFileFolderCopyCapability, hasOpenReadWriteCloseCapability, hasAccessCapability, FileUpdateOptions, hasUpdateCapability, FileUpdateResult,\n    FileReadStreamOptions,\n    hasFileReadStreamCapability\n} from './files';\nimport type { TextDocumentContentChangeEvent } from '@theia/core/shared/vscode-languageserver-protocol';\nimport { ReadableStreamEvents } from '@theia/core/lib/common/stream';\n\nexport class DelegatingFileSystemProvider implements Required<FileSystemProvider>, Disposable {\n\n    private readonly onDidChangeFileEmitter = new Emitter<readonly FileChange[]>();\n    readonly onDidChangeFile = this.onDidChangeFileEmitter.event;\n\n    private readonly onFileWatchErrorEmitter = new Emitter<void>();\n    readonly onFileWatchError = this.onFileWatchErrorEmitter.event;\n\n    constructor(\n        protected readonly delegate: FileSystemProvider,\n        protected readonly options: DelegatingFileSystemProvider.Options,\n        protected readonly toDispose = new DisposableCollection()\n    ) {\n        this.toDispose.push(this.onDidChangeFileEmitter);\n        this.toDispose.push(delegate.onDidChangeFile(changes => this.handleFileChanges(changes)));\n        this.toDispose.push(this.onFileWatchErrorEmitter);\n        this.toDispose.push(delegate.onFileWatchError(changes => this.onFileWatchErrorEmitter.fire()));\n    }\n\n    dispose(): void {\n        this.toDispose.dispose();\n    }\n\n    get capabilities(): FileSystemProviderCapabilities {\n        return this.delegate.capabilities;\n    }\n\n    get onDidChangeCapabilities(): Event<void> {\n        return this.delegate.onDidChangeCapabilities;\n    }\n\n    watch(resource: URI, opts: WatchOptions): Disposable {\n        return this.delegate.watch(this.toUnderlyingResource(resource), opts);\n    }\n\n    stat(resource: URI): Promise<Stat> {\n        return this.delegate.stat(this.toUnderlyingResource(resource));\n    }\n\n    access(resource: URI, mode?: number): Promise<void> {\n        if (hasAccessCapability(this.delegate)) {\n            return this.delegate.access(this.toUnderlyingResource(resource), mode);\n        }\n        throw new Error('not supported');\n    }\n\n    fsPath(resource: URI): Promise<string> {\n        if (hasAccessCapability(this.delegate)) {\n            return this.delegate.fsPath(this.toUnderlyingResource(resource));\n        }\n        throw new Error('not supported');\n    }\n\n    mkdir(resource: URI): Promise<void> {\n        return this.delegate.mkdir(this.toUnderlyingResource(resource));\n    }\n\n    rename(from: URI, to: URI, opts: FileOverwriteOptions): Promise<void> {\n        return this.delegate.rename(this.toUnderlyingResource(from), this.toUnderlyingResource(to), opts);\n    }\n\n    copy(from: URI, to: URI, opts: FileOverwriteOptions): Promise<void> {\n        if (hasFileFolderCopyCapability(this.delegate)) {\n            return this.delegate.copy(this.toUnderlyingResource(from), this.toUnderlyingResource(to), opts);\n        }\n        throw new Error('not supported');\n    }\n\n    readFile(resource: URI): Promise<Uint8Array> {\n        if (hasReadWriteCapability(this.delegate)) {\n            return this.delegate.readFile(this.toUnderlyingResource(resource));\n        }\n        throw new Error('not supported');\n    }\n\n    readFileStream(resource: URI, opts: FileReadStreamOptions, token: CancellationToken): ReadableStreamEvents<Uint8Array> {\n        if (hasFileReadStreamCapability(this.delegate)) {\n            return this.delegate.readFileStream(this.toUnderlyingResource(resource), opts, token);\n        }\n        throw new Error('not supported');\n    }\n\n    readdir(resource: URI): Promise<[string, FileType][]> {\n        return this.delegate.readdir(this.toUnderlyingResource(resource));\n    }\n\n    writeFile(resource: URI, content: Uint8Array, opts: FileWriteOptions): Promise<void> {\n        if (hasReadWriteCapability(this.delegate)) {\n            return this.delegate.writeFile(this.toUnderlyingResource(resource), content, opts);\n        }\n        throw new Error('not supported');\n    }\n\n    open(resource: URI, opts: FileOpenOptions): Promise<number> {\n        if (hasOpenReadWriteCloseCapability(this.delegate)) {\n            return this.delegate.open(this.toUnderlyingResource(resource), opts);\n        }\n        throw new Error('not supported');\n    }\n\n    close(fd: number): Promise<void> {\n        if (hasOpenReadWriteCloseCapability(this.delegate)) {\n            return this.delegate.close(fd);\n        }\n        throw new Error('not supported');\n    }\n\n    read(fd: number, pos: number, data: Uint8Array, offset: number, length: number): Promise<number> {\n        if (hasOpenReadWriteCloseCapability(this.delegate)) {\n            return this.delegate.read(fd, pos, data, offset, length);\n        }\n        throw new Error('not supported');\n    }\n\n    write(fd: number, pos: number, data: Uint8Array, offset: number, length: number): Promise<number> {\n        if (hasOpenReadWriteCloseCapability(this.delegate)) {\n            return this.delegate.write(fd, pos, data, offset, length);\n        }\n        throw new Error('not supported');\n    }\n\n    delete(resource: URI, opts: FileDeleteOptions): Promise<void> {\n        return this.delegate.delete(this.toUnderlyingResource(resource), opts);\n    }\n\n    updateFile(resource: URI, changes: TextDocumentContentChangeEvent[], opts: FileUpdateOptions): Promise<FileUpdateResult> {\n        if (hasUpdateCapability(this.delegate)) {\n            return this.delegate.updateFile(resource, changes, opts);\n        }\n        throw new Error('not supported');\n    }\n\n    protected handleFileChanges(changes: readonly FileChange[]): void {\n        const delegatingChanges: FileChange[] = [];\n        for (const change of changes) {\n            const delegatingResource = this.fromUnderlyingResource(change.resource);\n            if (delegatingResource) {\n                delegatingChanges.push({\n                    resource: delegatingResource,\n                    type: change.type\n                });\n            }\n        }\n        if (delegatingChanges.length) {\n            this.onDidChangeFileEmitter.fire(delegatingChanges);\n        }\n    }\n\n    /**\n     * Converts to an underlying fs provider resource format.\n     *\n     * For example converting `user-storage` resources to `file` resources under a user home:\n     * user-storage:/user/settings.json => file://home/.theia/settings.json\n     */\n    toUnderlyingResource(resource: URI): URI {\n        const underlying = this.options.uriConverter.to(resource);\n        if (!underlying) {\n            throw new Error('invalid resource: ' + resource.toString());\n        }\n        return underlying;\n    }\n\n    /**\n     * Converts from an underlying fs provider resource format.\n     *\n     * For example converting `file` resources under a user home to `user-storage` resource:\n     * - file://home/.theia/settings.json => user-storage:/user/settings.json\n     * - file://documents/some-document.txt => undefined\n     */\n    fromUnderlyingResource(resource: URI): URI | undefined {\n        return this.options.uriConverter.from(resource);\n    }\n\n}\nexport namespace DelegatingFileSystemProvider {\n    export interface Options {\n        uriConverter: URIConverter\n    }\n    export interface URIConverter {\n        /**\n         * Converts to an underlying fs provider resource format.\n         * Returns undefined if the given resource is not valid resource.\n         *\n         * For example converting `user-storage` resources to `file` resources under a user home:\n         * user-storage:/user/settings.json => file://home/.theia/settings.json\n         * user-storage:/settings.json => undefined\n         */\n        to(resource: URI): URI | undefined;\n        /**\n         * Converts from an underlying fs provider resource format.\n         *\n         * For example converting `file` resources under a user home to `user-storage` resource:\n         * - file://home/.theia/settings.json => user-storage:/settings.json\n         * - file://documents/some-document.txt => undefined\n         */\n        from(resource: URI): URI | undefined;\n    }\n}\n","// *****************************************************************************\n// Copyright (C) 2021 Ericsson and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\nexport const HTTP_FILE_UPLOAD_PATH = '/file-upload';\n","// *****************************************************************************\n// Copyright (C) 2020 TypeFox and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n// based on https://github.com/microsoft/vscode/blob/04c36be045a94fee58e5f8992d3e3fd980294a84/src/vs/platform/files/common/files.ts\n\nimport URI from '@theia/core/lib/common/uri';\nimport { Event } from '@theia/core/lib/common/event';\nimport { Disposable as IDisposable } from '@theia/core/lib/common/disposable';\nimport { BinaryBuffer, BinaryBufferReadableStream } from '@theia/core/lib/common/buffer';\nimport type { TextDocumentContentChangeEvent } from '@theia/core/shared/vscode-languageserver-protocol';\nimport { ReadableStreamEvents } from '@theia/core/lib/common/stream';\nimport { CancellationToken } from '@theia/core/lib/common/cancellation';\nimport { isObject } from '@theia/core/lib/common';\n\nexport const enum FileOperation {\n    CREATE,\n    DELETE,\n    MOVE,\n    COPY\n}\n\nexport class FileOperationEvent {\n\n    constructor(resource: URI, operation: FileOperation.DELETE);\n    constructor(resource: URI, operation: FileOperation.CREATE | FileOperation.MOVE | FileOperation.COPY, target: FileStatWithMetadata);\n    constructor(public readonly resource: URI, public readonly operation: FileOperation, public readonly target?: FileStatWithMetadata) { }\n\n    isOperation(operation: FileOperation.DELETE): boolean;\n    isOperation(operation: FileOperation.MOVE | FileOperation.COPY | FileOperation.CREATE): this is { readonly target: FileStatWithMetadata };\n    isOperation(operation: FileOperation): boolean {\n        return this.operation === operation;\n    }\n}\n\n/**\n * Possible changes that can occur to a file.\n */\nexport const enum FileChangeType {\n    UPDATED = 0,\n    ADDED = 1,\n    DELETED = 2\n}\n\n/**\n * Identifies a single change in a file.\n */\nexport interface FileChange {\n\n    /**\n     * The type of change that occurred to the file.\n     */\n    readonly type: FileChangeType;\n\n    /**\n     * The unified resource identifier of the file that changed.\n     */\n    readonly resource: URI;\n}\n\nexport class FileChangesEvent {\n\n    constructor(public readonly changes: readonly FileChange[]) { }\n\n    /**\n     * Returns true if this change event contains the provided file with the given change type (if provided). In case of\n     * type DELETED, this method will also return true if a folder got deleted that is the parent of the\n     * provided file path.\n     */\n    contains(resource: URI, type?: FileChangeType): boolean {\n        if (!resource) {\n            return false;\n        }\n\n        const checkForChangeType = typeof type === 'number';\n\n        return this.changes.some(change => {\n            if (checkForChangeType && change.type !== type) {\n                return false;\n            }\n\n            // For deleted also return true when deleted folder is parent of target path\n            if (change.type === FileChangeType.DELETED) {\n                return change.resource.isEqualOrParent(resource);\n            }\n\n            return change.resource.toString() === resource.toString();\n        });\n    }\n\n    /**\n     * Returns the changes that describe added files.\n     */\n    getAdded(): FileChange[] {\n        return this.getOfType(FileChangeType.ADDED);\n    }\n\n    /**\n     * Returns if this event contains added files.\n     */\n    gotAdded(): boolean {\n        return this.hasType(FileChangeType.ADDED);\n    }\n\n    /**\n     * Returns the changes that describe deleted files.\n     */\n    getDeleted(): FileChange[] {\n        return this.getOfType(FileChangeType.DELETED);\n    }\n\n    /**\n     * Returns if this event contains deleted files.\n     */\n    gotDeleted(): boolean {\n        return this.hasType(FileChangeType.DELETED);\n    }\n\n    /**\n     * Returns the changes that describe updated files.\n     */\n    getUpdated(): FileChange[] {\n        return this.getOfType(FileChangeType.UPDATED);\n    }\n\n    /**\n     * Returns if this event contains updated files.\n     */\n    gotUpdated(): boolean {\n        return this.hasType(FileChangeType.UPDATED);\n    }\n\n    private getOfType(type: FileChangeType): FileChange[] {\n        return this.changes.filter(change => change.type === type);\n    }\n\n    private hasType(type: FileChangeType): boolean {\n        return this.changes.some(change => change.type === type);\n    }\n}\n\nexport interface BaseStat {\n\n    /**\n     * The unified resource identifier of this file or folder.\n     */\n    resource: URI;\n\n    /**\n     * The name which is the last segment\n     * of the {{path}}.\n     */\n    name: string;\n\n    /**\n     * The size of the file.\n     *\n     * The value may or may not be resolved as\n     * it is optional.\n     */\n    size?: number;\n\n    /**\n     * The last modification date represented as millis from unix epoch.\n     *\n     * The value may or may not be resolved as\n     * it is optional.\n     */\n    mtime?: number;\n\n    /**\n     * The creation date represented as millis from unix epoch.\n     *\n     * The value may or may not be resolved as\n     * it is optional.\n     */\n    ctime?: number;\n\n    /**\n     * A unique identifier that represents the\n     * current state of the file or directory.\n     *\n     * The value may or may not be resolved as\n     * it is optional.\n     */\n    etag?: string;\n}\nexport namespace BaseStat {\n    export function is(arg: unknown): arg is BaseStat {\n        return isObject<BaseStat>(arg)\n            && arg.resource instanceof URI\n            && typeof arg.name === 'string';\n    }\n}\n\nexport interface BaseStatWithMetadata extends BaseStat {\n    mtime: number;\n    ctime: number;\n    etag: string;\n    size: number;\n}\n\n/**\n * A file resource with meta information.\n */\nexport interface FileStat extends BaseStat {\n\n    /**\n     * The resource is a file.\n     */\n    isFile: boolean;\n\n    /**\n     * The resource is a directory.\n     */\n    isDirectory: boolean;\n\n    /**\n     * The resource is a symbolic link.\n     */\n    isSymbolicLink: boolean;\n\n    /**\n     * The resource is read only.\n     */\n    isReadonly: boolean;\n\n    /**\n     * The children of the file stat or undefined if none.\n     */\n    children?: FileStat[];\n}\nexport namespace FileStat {\n    export function is(arg: unknown): arg is FileStat {\n        const fileStat = arg as FileStat;\n        return BaseStat.is(fileStat) &&\n            ('isFile' in fileStat && typeof fileStat.isFile === 'boolean') &&\n            ('isDirectory' in fileStat && typeof fileStat.isDirectory === 'boolean') &&\n            ('isSymbolicLink' in fileStat && typeof fileStat.isSymbolicLink === 'boolean');\n    }\n    export function asFileType(stat: FileStat): FileType {\n        let res = 0;\n        if (stat.isFile) {\n            res += FileType.File;\n\n        } else if (stat.isDirectory) {\n            res += FileType.Directory;\n        }\n        if (stat.isSymbolicLink) {\n            res += FileType.SymbolicLink;\n        }\n        return res;\n    }\n    export function toStat(stat: FileStat): Stat | { type: FileType } & Partial<Stat> {\n        return {\n            type: asFileType(stat),\n            ctime: stat.ctime,\n            mtime: stat.mtime,\n            size: stat.size\n        };\n    }\n    export function fromStat(resource: URI, stat: Stat): FileStatWithMetadata;\n    export function fromStat(resource: URI, stat: { type: FileType } & Partial<Stat>): FileStat;\n    export function fromStat(resource: URI, stat: Stat | { type: FileType } & Partial<Stat>): FileStat {\n        return {\n            resource,\n            name: resource.path.base || resource.path.toString(),\n            isFile: (stat.type & FileType.File) !== 0,\n            isDirectory: (stat.type & FileType.Directory) !== 0,\n            isSymbolicLink: (stat.type & FileType.SymbolicLink) !== 0,\n            isReadonly: !!stat.permissions && (stat.permissions & FilePermission.Readonly) !== 0,\n            mtime: stat.mtime,\n            ctime: stat.ctime,\n            size: stat.size,\n            etag: etag({ mtime: stat.mtime, size: stat.size })\n        };\n    }\n    export function dir(resource: string | URI, stat?: Partial<Omit<Stat, 'type'>>): FileStat {\n        return fromStat(resource instanceof URI ? resource : new URI(resource), { type: FileType.Directory, ...stat });\n    }\n    export function file(resource: string | URI, stat?: Partial<Omit<Stat, 'type'>>): FileStat {\n        return fromStat(resource instanceof URI ? resource : new URI(resource), { type: FileType.File, ...stat });\n    }\n}\n\nexport interface FileStatWithMetadata extends FileStat, BaseStatWithMetadata {\n    mtime: number;\n    ctime: number;\n    etag: string;\n    size: number;\n    children?: FileStatWithMetadata[];\n}\n\nexport interface ResolveFileResult {\n    stat?: FileStat;\n    success: boolean;\n}\n\nexport interface ResolveFileResultWithMetadata extends ResolveFileResult {\n    stat?: FileStatWithMetadata;\n}\n\nexport interface FileContent extends BaseStatWithMetadata {\n\n    /**\n     * The content of a file as buffer.\n     */\n    value: BinaryBuffer;\n}\n\nexport interface FileStreamContent extends BaseStatWithMetadata {\n\n    /**\n     * The content of a file as stream.\n     */\n    value: BinaryBufferReadableStream;\n}\n\nexport interface WriteFileOptions {\n\n    /**\n     * The last known modification time of the file. This can be used to prevent dirty writes.\n     */\n    readonly mtime?: number;\n\n    /**\n     * The etag of the file. This can be used to prevent dirty writes.\n     */\n    readonly etag?: string;\n}\n\nexport interface ReadFileOptions extends FileReadStreamOptions {\n\n    /**\n     * The optional etag parameter allows to return early from resolving the resource if\n     * the contents on disk match the etag. This prevents accumulated reading of resources\n     * that have been read already with the same etag.\n     * It is the task of the caller to makes sure to handle this error case from the promise.\n     */\n    readonly etag?: string;\n}\n\nexport interface WriteFileOptions {\n\n    /**\n     * The last known modification time of the file. This can be used to prevent dirty writes.\n     */\n    readonly mtime?: number;\n\n    /**\n     * The etag of the file. This can be used to prevent dirty writes.\n     */\n    readonly etag?: string;\n}\n\nexport interface ResolveFileOptions {\n\n    /**\n     * Automatically continue resolving children of a directory until the provided resources\n     * are found.\n     */\n    readonly resolveTo?: readonly URI[];\n\n    /**\n     * Automatically continue resolving children of a directory if the number of children is 1.\n     */\n    readonly resolveSingleChildDescendants?: boolean;\n\n    /**\n     * Will resolve mtime, ctime, size and etag of files if enabled. This can have a negative impact\n     * on performance and thus should only be used when these values are required.\n     */\n    readonly resolveMetadata?: boolean;\n}\n\nexport interface ResolveMetadataFileOptions extends ResolveFileOptions {\n    readonly resolveMetadata: true;\n}\n\nexport interface FileOperationOptions {\n    /**\n     * Indicates that a user action triggered the opening, e.g.\n     * via mouse or keyboard use. Default is true.\n     */\n    fromUserGesture?: boolean\n}\n\nexport interface MoveFileOptions extends FileOperationOptions, Partial<FileOverwriteOptions> {\n}\n\nexport interface CopyFileOptions extends FileOperationOptions, Partial<FileOverwriteOptions> {\n}\n\nexport interface CreateFileOptions extends FileOperationOptions, Partial<FileOverwriteOptions> {\n}\n\nexport class FileOperationError extends Error {\n    constructor(message: string, public fileOperationResult: FileOperationResult, public options?: ReadFileOptions & WriteFileOptions & CreateFileOptions) {\n        super(message);\n        Object.setPrototypeOf(this, FileOperationError.prototype);\n    }\n}\n\nexport const enum FileOperationResult {\n    FILE_IS_DIRECTORY,\n    FILE_NOT_FOUND,\n    FILE_NOT_MODIFIED_SINCE,\n    FILE_MODIFIED_SINCE,\n    FILE_MOVE_CONFLICT,\n    FILE_READ_ONLY,\n    FILE_PERMISSION_DENIED,\n    FILE_TOO_LARGE,\n    FILE_INVALID_PATH,\n    FILE_EXCEEDS_MEMORY_LIMIT,\n    FILE_NOT_DIRECTORY,\n    FILE_OTHER_ERROR\n}\n\nexport interface FileOverwriteOptions {\n    /**\n     * Overwrite the file to create if it already exists on disk. Otherwise\n     * an error will be thrown (FILE_MODIFIED_SINCE).\n     */\n    overwrite: boolean;\n}\n\nexport interface FileReadStreamOptions {\n\n    /**\n     * Is an integer specifying where to begin reading from in the file. If position is undefined,\n     * data will be read from the current file position.\n     */\n    readonly position?: number;\n\n    /**\n     * Is an integer specifying how many bytes to read from the file. By default, all bytes\n     * will be read.\n     */\n    readonly length?: number;\n\n    /**\n     * If provided, the size of the file will be checked against the limits.\n     */\n    limits?: {\n        readonly size?: number;\n        readonly memory?: number;\n    };\n}\n\nexport interface FileUpdateOptions {\n    readEncoding: string;\n    writeEncoding: string;\n    overwriteEncoding: boolean;\n}\nexport interface FileUpdateResult extends Stat {\n    encoding: string;\n}\n\nexport interface FileWriteOptions {\n    overwrite: boolean;\n    create: boolean;\n}\n\nexport interface FileOpenOptions {\n    create: boolean;\n}\n\nexport interface FileDeleteOptions {\n    recursive: boolean;\n    useTrash: boolean;\n}\n\nexport enum FileType {\n    Unknown = 0,\n    File = 1,\n    Directory = 2,\n    SymbolicLink = 64\n}\n\nexport enum FilePermission {\n\n    /**\n     * File is readonly.\n     */\n    Readonly = 1\n}\n\nexport interface Stat {\n    type: FileType;\n\n    /**\n     * The last modification date represented as millis from unix epoch.\n     */\n    mtime: number;\n\n    /**\n     * The creation date represented as millis from unix epoch.\n     */\n    ctime: number;\n\n    size: number;\n\n    permissions?: FilePermission;\n}\n\nexport interface WatchOptions {\n    recursive: boolean;\n    excludes: string[];\n}\n\nexport const enum FileSystemProviderCapabilities {\n    FileReadWrite = 1 << 1,\n    FileOpenReadWriteClose = 1 << 2,\n    FileReadStream = 1 << 4,\n\n    FileFolderCopy = 1 << 3,\n\n    PathCaseSensitive = 1 << 10,\n    Readonly = 1 << 11,\n\n    Trash = 1 << 12,\n\n    Access = 1 << 24,\n    Update = 1 << 25\n}\n\nexport enum FileSystemProviderErrorCode {\n    FileExists = 'EntryExists',\n    FileNotFound = 'EntryNotFound',\n    FileNotADirectory = 'EntryNotADirectory',\n    FileIsADirectory = 'EntryIsADirectory',\n    FileExceedsMemoryLimit = 'EntryExceedsMemoryLimit',\n    FileTooLarge = 'EntryTooLarge',\n    NoPermissions = 'NoPermissions',\n    Unavailable = 'Unavailable',\n    Unknown = 'Unknown'\n}\n\nexport class FileSystemProviderError extends Error {\n\n    constructor(message: string, public readonly code: FileSystemProviderErrorCode) {\n        super(message);\n        Object.setPrototypeOf(this, FileSystemProviderError.prototype);\n    }\n}\n\nexport function createFileSystemProviderError(error: Error | string, code: FileSystemProviderErrorCode): FileSystemProviderError {\n    const providerError = new FileSystemProviderError(error.toString(), code);\n    markAsFileSystemProviderError(providerError, code);\n\n    return providerError;\n}\n\nexport function ensureFileSystemProviderError(error?: Error): Error {\n    if (!error) {\n        return createFileSystemProviderError('Unknown Error', FileSystemProviderErrorCode.Unknown); // https://github.com/Microsoft/vscode/issues/72798\n    }\n\n    return error;\n}\n\nexport const FileSystemProvider = Symbol('FileSystemProvider');\n/**\n * A {@link FileSystemProvider} provides the capabilities to read, write, discover, and to manage files and folders\n * of the underlying (potentially virtual) file system. {@link FileSystemProvider}s can be used to serve files from both the\n * local disk as well as remote locations like ftp-servers, REST-services etc. A {@link FileSystemProvider} is registered for a certain\n * scheme and can handle all resources whose uri does conform to that scheme.\n */\nexport interface FileSystemProvider {\n\n    /** The {@link FileSystemProviderCapabilities} for this provider. */\n    readonly capabilities: FileSystemProviderCapabilities;\n\n    /** * Event that is fired if the capabilities of this provider have changed. */\n    readonly onDidChangeCapabilities: Event<void>;\n\n    /** Event that is fired if a (watched) file in the filesystem of this provider has changed. */\n    readonly onDidChangeFile: Event<readonly FileChange[]>;\n\n    /** Event that is fired if an error occurred when watching files in the filesystem of this provider. */\n    readonly onFileWatchError: Event<void>;\n\n    /**\n     * Watch the given resource and react to changes by firing the {@link FileSystemProvider#onDidChangeFile} event.\n     * @param resource `URI` of the resource to be watched.\n     * @param opts Options to define if the resource should be watched recursively and to\n     *  provide a set of resources that should be excluded from watching.\n     *\n     * @returns A `Disposable` that can be invoked to stop watching the resource.\n     */\n    watch(resource: URI, opts: WatchOptions): IDisposable;\n\n    /**\n     * Retrieve metadata about a given file.\n     *\n     * @param uri The `URI` of the file to retrieve meta data about.\n     * @returns A promise of the metadata about the resource.\n     */\n    stat(resource: URI): Promise<Stat>;\n\n    /**\n     * Create a new directory using the given resource uri.\n     * @param resource The `URI` of the new folder.\n     */\n    mkdir(resource: URI): Promise<void>;\n\n    /**\n     * Retrieve the content of a given directory.\n     * @param resource The `URI` of the directory.\n     *\n     * @returns A map containing the {@link FileType} for each child resource, identified by name.\n     */\n    readdir(resource: URI): Promise<[string, FileType][]>;\n\n    /**\n     * Delete the given resource.\n     * @param resource The `URI` of the resource to delete.\n     * @param opts Options to define if files should be deleted recursively and if the trash should be used.\n     */\n    delete(resource: URI, opts: FileDeleteOptions): Promise<void>;\n\n    /**\n     * Rename a file or folder.\n     * @param from `URI` of the existing file or folder.\n     * @param to `URI` of the target location.\n     * @param opts Options to define if existing files should be overwritten.\n     */\n    rename(from: URI, to: URI, opts: FileOverwriteOptions): Promise<void>;\n\n    /**\n     * Optional function that has to be implemented by {@link FileSystemProviderWithFileFolderCopyCapability}.\n     * See {@link FileSystemProviderWithFileFolderCopyCapability#copy}} for additional documentation.\n     */\n    copy?(from: URI, to: URI, opts: FileOverwriteOptions): Promise<void>;\n\n    /**\n     * Optional function that has to be implemented by {@link FileSystemProviderWithFileReadWriteCapability}.\n     * See {@link FileSystemProviderWithFileReadWriteCapability#readFile} for additional documentation.\n     */\n    readFile?(resource: URI): Promise<Uint8Array>;\n\n    /**\n     * Optional function that has to be implemented by {@link FileSystemProviderWithFileReadWriteCapability}.\n     * See {@link FileSystemProviderWithFileReadWriteCapability#writeFile} for additional documentation.\n     */\n    writeFile?(resource: URI, content: Uint8Array, opts: FileWriteOptions): Promise<void>;\n\n    /**\n     * Optional function that has to be implemented by {@link FileSystemProviderWithFileReadStreamCapability}.\n     * See {@link FileSystemProviderWithFileReadStreamCapability#readFileStream} for additional documentation.\n     */\n    readFileStream?(resource: URI, opts: FileReadStreamOptions, token: CancellationToken): ReadableStreamEvents<Uint8Array>;\n\n    /**\n     * Optional function that has to be implemented by {@link FileSystemProviderWithOpenReadWriteCloseCapability}.\n     * See {@link FileSystemProviderWithOpenReadWriteCloseCapability#open} for additional documentation.\n     */\n    open?(resource: URI, opts: FileOpenOptions): Promise<number>;\n\n    /**\n     * Optional function that has to be implemented by {@link FileSystemProviderWithOpenReadWriteCloseCapability}.\n     * See {@link FileSystemProviderWithOpenReadWriteCloseCapability#close} for additional documentation.\n     */\n    close?(fd: number): Promise<void>;\n\n    /**\n     * Optional function that has to be implemented by {@link FileSystemProviderWithOpenReadWriteCloseCapability}.\n     * See {@link FileSystemProviderWithOpenReadWriteCloseCapability#read} for additional documentation.\n     */\n    read?(fd: number, pos: number, data: Uint8Array, offset: number, length: number): Promise<number>;\n\n    /**\n     * Optional function that has to be implemented by {@link FileSystemProviderWithOpenReadWriteCloseCapability}.\n     * See {@link FileSystemProviderWithOpenReadWriteCloseCapability#write} for additional documentation.\n     */\n    write?(fd: number, pos: number, data: Uint8Array, offset: number, length: number): Promise<number>;\n\n    /**\n     * Optional function that has to be implemented by {@link FileSystemProviderWithAccessCapability}.\n     * See {@link FileSystemProviderWithAccessCapability#access} for additional documentation.\n     */\n    access?(resource: URI, mode?: number): Promise<void>;\n\n    /**\n     * Optional function that has to be implemented by {@link FileSystemProviderWithAccessCapability}.\n     * See {@link FileSystemProviderWithAccessCapability#fsPath} for additional documentation.\n     */\n    fsPath?(resource: URI): Promise<string>;\n\n    /**\n     * Optional function that has to be implemented by {@link FileSystemProviderWithUpdateCapability}.\n     * See {@link FileSystemProviderWithUpdateCapability#updateFile} for additional documentation.\n     */\n    updateFile?(resource: URI, changes: TextDocumentContentChangeEvent[], opts: FileUpdateOptions): Promise<FileUpdateResult>;\n}\n\n/**\n * Subtype of {@link FileSystemProvider} that ensures that the optional functions needed for providers, that should be\n * able access files, are implemented.\n */\nexport interface FileSystemProviderWithAccessCapability extends FileSystemProvider {\n    /**\n     * Tests a user's permissions for the file or directory specified by URI.\n     * @param resource The `URI` of the file that should be tested.\n     * @param mode An optional integer that specifies the accessibility checks to be performed.\n     *      Check `FileAccess.Constants` for possible values of mode.\n     *      It is possible to create a mask consisting of the bitwise `OR` of two or more values (e.g. FileAccess.Constants.W_OK | FileAccess.Constants.R_OK).\n     *      If `mode` is not defined, `FileAccess.Constants.F_OK` will be used instead.\n     *\n     * @returns A promise that resolves if the user has the required permissions, should be rejected otherwise.\n     */\n    access(resource: URI, mode?: number): Promise<void>;\n\n    /**\n     * Returns the path of the given file URI, specific to the backend's operating system.\n     * If the URI is not a file URI, undefined is returned.\n     *\n     * USE WITH CAUTION: You should always prefer URIs to paths if possible, as they are\n     * portable and platform independent. Paths should only be used in cases you directly\n     * interact with the OS, e.g. when running a command on the shell.\n     *\n     * @param resource `URI` of the resource to derive the path from.\n     *\n     * @returns A promise of the corresponding file system path.\n     */\n    fsPath(resource: URI): Promise<string>;\n}\n\nexport function hasAccessCapability(provider: FileSystemProvider): provider is FileSystemProviderWithAccessCapability {\n    return !!(provider.capabilities & FileSystemProviderCapabilities.Access);\n}\n\n/**\n * Subtype of {@link FileSystemProvider} that ensures that the optional functions needed, for providers that should be\n * able to update (text) files, are implemented.\n */\nexport interface FileSystemProviderWithUpdateCapability extends FileSystemProvider {\n    /**\n     * Update the content of the given (text) file according to the given text document changes.\n     * @param resource `URI` of the resource to update.\n     * @param changes Array of events describing the changes to the file.\n     * @param opts The encoding options.\n     *\n     * @returns A promise of the file metadata that resolves after the update process has completed.\n     */\n    updateFile(resource: URI, changes: TextDocumentContentChangeEvent[], opts: FileUpdateOptions): Promise<FileUpdateResult>;\n}\n\nexport function hasUpdateCapability(provider: FileSystemProvider): provider is FileSystemProviderWithUpdateCapability {\n    return !!(provider.capabilities & FileSystemProviderCapabilities.Update);\n}\n\n/**\n * Subtype of {@link FileSystemProvider} that ensures that the optional functions, needed for providers\n * that should be able to read & write files, are implemented.\n */\nexport interface FileSystemProviderWithFileReadWriteCapability extends FileSystemProvider {\n    /**\n     * Read the contents of the given file as stream.\n     * @param resource The `URI` of the file.\n     *\n     * @return The `ReadableStreamEvents` for the readable stream of the given file.\n     */\n    readFile(resource: URI): Promise<Uint8Array>;\n\n    /**\n     *  Write data to a file, replacing its entire contents.\n     * @param resource The uri of the file.\n     * @param content The new content of the file.\n     * @param opts Options to define if the file should be created if missing and if an existing file should be overwritten.\n     */\n    writeFile(resource: URI, content: Uint8Array, opts: FileWriteOptions): Promise<void>;\n}\n\nexport function hasReadWriteCapability(provider: FileSystemProvider): provider is FileSystemProviderWithFileReadWriteCapability {\n    return !!(provider.capabilities & FileSystemProviderCapabilities.FileReadWrite);\n}\n\n/**\n * Subtype of {@link FileSystemProvider} that ensures that the optional functions, needed for providers that should be able to copy\n * file folders, are implemented.\n */\nexport interface FileSystemProviderWithFileFolderCopyCapability extends FileSystemProvider {\n    /**\n     * Copy files or folders.\n     * @param from `URI` of the existing file or folder.\n     * @param to `URI` of the destination location.\n     * @param opts Options to define if existing files should be overwritten.\n     */\n    copy(from: URI, to: URI, opts: FileOverwriteOptions): Promise<void>;\n}\n\nexport function hasFileFolderCopyCapability(provider: FileSystemProvider): provider is FileSystemProviderWithFileFolderCopyCapability {\n    return !!(provider.capabilities & FileSystemProviderCapabilities.FileFolderCopy);\n}\n\n/**\n * Subtype of {@link FileSystemProvider} that ensures that the optional functions, needed for providers that should be able to open,read, write\n * or close files, are implemented.\n */\nexport interface FileSystemProviderWithOpenReadWriteCloseCapability extends FileSystemProvider {\n    /**\n     * Open the give file.\n     * @param resource The `URI` of the file to open.\n     * @param opts Options to define if the file should be created if it does not exist yet.\n     *\n     * @returns A promise of the file descriptor that resolves after the file is open.\n     */\n    open(resource: URI, opts: FileOpenOptions): Promise<number>;\n\n    /**\n     * Close the file with the given file descriptor.\n     * @param fd the file descriptor to close.\n     */\n    close(fd: number): Promise<void>;\n\n    /**\n     * Read specified content from a given file descriptor into a data buffer.\n     * @param fd The file descriptor referencing the file to read from.\n     * @param pos The offset from the beginning of the file from which data should be read.\n     * @param data The buffer that the data will be written to.\n     * @param offset The offset in the buffer at which to start writing.\n     * @param length The number of bytes to read.\n     *\n     * @returns A promise of the number of bytes read.\n     */\n    read(fd: number, pos: number, data: Uint8Array, offset: number, length: number): Promise<number>;\n\n    /**\n     * Write specified content from the data buffer to the file referenced by the given file descriptor.\n     * @param fd The file descriptor referencing the file to write to.\n     * @param pos The offset from the beginning of the file where this data should be written.\n     * @param offset The part of the buffer to be read from.\n     * @param length The number of bytes to write.\n     *\n     * @returns A promise of the number of bytes written.\n     */\n    write(fd: number, pos: number, data: Uint8Array, offset: number, length: number): Promise<number>;\n}\n\nexport function hasOpenReadWriteCloseCapability(provider: FileSystemProvider): provider is FileSystemProviderWithOpenReadWriteCloseCapability {\n    return !!(provider.capabilities & FileSystemProviderCapabilities.FileOpenReadWriteClose);\n}\n\n/**\n * Subtype of {@link FileSystemProvider} that ensures that the optional functions, needed for providers that should be able to read\n * files as streams, are implemented.\n */\nexport interface FileSystemProviderWithFileReadStreamCapability extends FileSystemProvider {\n    /**\n     * Read the contents of the given file as stream.\n     * @param resource The `URI` of the file.\n     *\n     * @return The `ReadableStreamEvents` for the readable stream of the given file.\n     */\n    readFileStream(resource: URI, opts: FileReadStreamOptions, token: CancellationToken): ReadableStreamEvents<Uint8Array>;\n}\n\nexport function hasFileReadStreamCapability(provider: FileSystemProvider): provider is FileSystemProviderWithFileReadStreamCapability {\n    return !!(provider.capabilities & FileSystemProviderCapabilities.FileReadStream);\n}\n\nexport function markAsFileSystemProviderError(error: Error, code: FileSystemProviderErrorCode): Error {\n    error.name = code ? `${code} (FileSystemError)` : 'FileSystemError';\n\n    return error;\n}\n\nexport function toFileSystemProviderErrorCode(error: Error | undefined | null): FileSystemProviderErrorCode {\n\n    // Guard against abuse\n    if (!error) {\n        return FileSystemProviderErrorCode.Unknown;\n    }\n\n    // FileSystemProviderError comes with the code\n    if (error instanceof FileSystemProviderError) {\n        return error.code;\n    }\n\n    // Any other error, check for name match by assuming that the error\n    // went through the markAsFileSystemProviderError() method\n    const match = /^(.+) \\(FileSystemError\\)$/.exec(error.name);\n    if (!match) {\n        return FileSystemProviderErrorCode.Unknown;\n    }\n\n    switch (match[1]) {\n        case FileSystemProviderErrorCode.FileExists: return FileSystemProviderErrorCode.FileExists;\n        case FileSystemProviderErrorCode.FileIsADirectory: return FileSystemProviderErrorCode.FileIsADirectory;\n        case FileSystemProviderErrorCode.FileNotADirectory: return FileSystemProviderErrorCode.FileNotADirectory;\n        case FileSystemProviderErrorCode.FileNotFound: return FileSystemProviderErrorCode.FileNotFound;\n        case FileSystemProviderErrorCode.FileExceedsMemoryLimit: return FileSystemProviderErrorCode.FileExceedsMemoryLimit;\n        case FileSystemProviderErrorCode.FileTooLarge: return FileSystemProviderErrorCode.FileTooLarge;\n        case FileSystemProviderErrorCode.NoPermissions: return FileSystemProviderErrorCode.NoPermissions;\n        case FileSystemProviderErrorCode.Unavailable: return FileSystemProviderErrorCode.Unavailable;\n    }\n\n    return FileSystemProviderErrorCode.Unknown;\n}\n\nexport function toFileOperationResult(error: Error): FileOperationResult {\n\n    // FileSystemProviderError comes with the result already\n    if (error instanceof FileOperationError) {\n        return error.fileOperationResult;\n    }\n\n    // Otherwise try to find from code\n    switch (toFileSystemProviderErrorCode(error)) {\n        case FileSystemProviderErrorCode.FileNotFound:\n            return FileOperationResult.FILE_NOT_FOUND;\n        case FileSystemProviderErrorCode.FileIsADirectory:\n            return FileOperationResult.FILE_IS_DIRECTORY;\n        case FileSystemProviderErrorCode.FileNotADirectory:\n            return FileOperationResult.FILE_NOT_DIRECTORY;\n        case FileSystemProviderErrorCode.NoPermissions:\n            return FileOperationResult.FILE_PERMISSION_DENIED;\n        case FileSystemProviderErrorCode.FileExists:\n            return FileOperationResult.FILE_MOVE_CONFLICT;\n        case FileSystemProviderErrorCode.FileExceedsMemoryLimit:\n            return FileOperationResult.FILE_EXCEEDS_MEMORY_LIMIT;\n        case FileSystemProviderErrorCode.FileTooLarge:\n            return FileOperationResult.FILE_TOO_LARGE;\n        default:\n            return FileOperationResult.FILE_OTHER_ERROR;\n    }\n}\n\n/**\n * A hint to disable etag checking for reading/writing.\n */\nexport const ETAG_DISABLED = '';\n\nexport function etag(stat: { mtime: number, size: number }): string;\nexport function etag(stat: { mtime: number | undefined, size: number | undefined }): string | undefined;\nexport function etag(stat: { mtime: number | undefined, size: number | undefined }): string | undefined {\n    if (typeof stat.size !== 'number' || typeof stat.mtime !== 'number') {\n        return undefined;\n    }\n\n    return stat.mtime.toString(29) + stat.size.toString(31);\n}\n/**\n * Helper to format a raw byte size into a human readable label.\n */\nexport class BinarySize {\n    static readonly KB = 1024;\n    static readonly MB = BinarySize.KB * BinarySize.KB;\n    static readonly GB = BinarySize.MB * BinarySize.KB;\n    static readonly TB = BinarySize.GB * BinarySize.KB;\n\n    static formatSize(size: number): string {\n        if (size < BinarySize.KB) {\n            return size + 'B';\n        }\n        if (size < BinarySize.MB) {\n            return (size / BinarySize.KB).toFixed(2) + 'KB';\n        }\n        if (size < BinarySize.GB) {\n            return (size / BinarySize.MB).toFixed(2) + 'MB';\n        }\n        if (size < BinarySize.TB) {\n            return (size / BinarySize.GB).toFixed(2) + 'GB';\n        }\n        return (size / BinarySize.TB).toFixed(2) + 'TB';\n    }\n}\n","// *****************************************************************************\n// Copyright (C) 2018 Ericsson and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\nimport { FileStat } from '../common/files';\nimport URI from '@theia/core/lib/common/uri';\n\nexport namespace FileSystemUtils {\n    export const FILE_NAME_SEPARATOR = ' ';\n\n    /**\n     * Generate unique URI for a given parent which does not collide\n     *\n     * @param parent the `FileStat` of the parent\n     * @param targetUri the initial URI\n     * @param isDirectory indicates whether the given targetUri represents a directory\n     * @param suffix an optional string to append to the file name, in case of collision (e.g. `copy`)\n     */\n    export function generateUniqueResourceURI(parent: FileStat, targetUri: URI, isDirectory: boolean, suffix?: string): URI {\n        const children = !parent.children ? [] : parent.children!.map(child => child.resource);\n        let name = targetUri.path.name;\n        let extension = targetUri.path.ext;\n        if (!name) {\n            // special case for dotfiles (e.g. '.foobar'): use the extension as the name\n            name = targetUri.path.ext;\n            extension = '';\n        }\n        // we want the path base for directories with the source path `foo.bar` to be generated as `foo.bar copy` and not `foo copy.bar` as we do for files\n        if (isDirectory) {\n            name = name + extension;\n            extension = '';\n        }\n\n        let base = name + extension;\n        // test if the name already contains the suffix or the suffix + index, so we don't add it again\n        const nameRegex = RegExp(`.*${FileSystemUtils.FILE_NAME_SEPARATOR}${suffix}(${FileSystemUtils.FILE_NAME_SEPARATOR}[0-9]*)?$`);\n        if (suffix && !nameRegex.test(name) && children.some(child => child.path.base === base)) {\n            name = name + FILE_NAME_SEPARATOR + suffix;\n            base = name + extension;\n        }\n        if (suffix && nameRegex.test(name)) {\n            // remove the existing index from the name, so we can generate a new one\n            name = name.replace(RegExp(`${FILE_NAME_SEPARATOR}[0-9]*$`), '');\n        }\n        let index = 0;\n        while (children.some(child => child.path.base === base)) {\n            index = index + 1;\n            base = name + FILE_NAME_SEPARATOR + index + extension;\n        }\n        return parent.resource.resolve(base);\n    }\n}\n","// *****************************************************************************\n// Copyright (C) 2017 TypeFox and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\nexport namespace FileAccess {\n\n    export namespace Constants {\n\n        /**\n         * Flag indicating that the file is visible to the calling process.\n         * This is useful for determining if a file exists, but says nothing about rwx permissions. Default if no mode is specified.\n         */\n        export const F_OK: number = 0;\n\n        /**\n         * Flag indicating that the file can be read by the calling process.\n         */\n        export const R_OK: number = 4;\n\n        /**\n         * Flag indicating that the file can be written by the calling process.\n         */\n        export const W_OK: number = 2;\n\n        /**\n         * Flag indicating that the file can be executed by the calling process.\n         * This has no effect on Windows (will behave like `FileAccess.F_OK`).\n         */\n        export const X_OK: number = 1;\n    }\n}\n","// *****************************************************************************\n// Copyright (C) 2017 TypeFox and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\nexport * from './filesystem';\nexport * from './filesystem-utils';\n","// *****************************************************************************\n// Copyright (C) 2020 TypeFox and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n// based on https://github.com/microsoft/vscode/blob/04c36be045a94fee58e5f8992d3e3fd980294a84/src/vs/platform/files/common/io.ts\n\n/* eslint-disable max-len */\n\nimport URI from '@theia/core/lib/common/uri';\nimport { BinaryBuffer } from '@theia/core/lib/common//buffer';\nimport { CancellationToken, cancelled as canceled } from '@theia/core/lib/common/cancellation';\nimport { FileSystemProviderWithOpenReadWriteCloseCapability, FileReadStreamOptions, ensureFileSystemProviderError, createFileSystemProviderError, FileSystemProviderErrorCode } from './files';\nimport { WriteableStream, ErrorTransformer, DataTransformer } from '@theia/core/lib/common/stream';\n\nexport interface CreateReadStreamOptions extends FileReadStreamOptions {\n\n    /**\n     * The size of the buffer to use before sending to the stream.\n     */\n    bufferSize: number;\n\n    /**\n     * Allows to massage any possibly error that happens during reading.\n     */\n    errorTransformer?: ErrorTransformer;\n}\n\n/**\n * A helper to read a file from a provider with open/read/close capability into a stream.\n */\nexport async function readFileIntoStream<T>(\n    provider: FileSystemProviderWithOpenReadWriteCloseCapability,\n    resource: URI,\n    target: WriteableStream<T>,\n    transformer: DataTransformer<BinaryBuffer, T>,\n    options: CreateReadStreamOptions,\n    token: CancellationToken\n): Promise<void> {\n    let error: Error | undefined = undefined;\n\n    try {\n        await doReadFileIntoStream(provider, resource, target, transformer, options, token);\n    } catch (err) {\n        error = err;\n    } finally {\n        if (error && options.errorTransformer) {\n            error = options.errorTransformer(error);\n        }\n\n        target.end(error);\n    }\n}\n\nasync function doReadFileIntoStream<T>(provider: FileSystemProviderWithOpenReadWriteCloseCapability, resource: URI, target: WriteableStream<T>, transformer: DataTransformer<BinaryBuffer, T>, options: CreateReadStreamOptions, token: CancellationToken): Promise<void> {\n\n    // Check for cancellation\n    throwIfCancelled(token);\n\n    // open handle through provider\n    const handle = await provider.open(resource, { create: false });\n\n    // Check for cancellation\n    throwIfCancelled(token);\n\n    try {\n        let totalBytesRead = 0;\n        let bytesRead = 0;\n        let allowedRemainingBytes = (options && typeof options.length === 'number') ? options.length : undefined;\n\n        let buffer = BinaryBuffer.alloc(Math.min(options.bufferSize, typeof allowedRemainingBytes === 'number' ? allowedRemainingBytes : options.bufferSize));\n\n        let posInFile = options && typeof options.position === 'number' ? options.position : 0;\n        let posInBuffer = 0;\n        do {\n            // read from source (handle) at current position (pos) into buffer (buffer) at\n            // buffer position (posInBuffer) up to the size of the buffer (buffer.byteLength).\n            bytesRead = await provider.read(handle, posInFile, buffer.buffer, posInBuffer, buffer.byteLength - posInBuffer);\n\n            posInFile += bytesRead;\n            posInBuffer += bytesRead;\n            totalBytesRead += bytesRead;\n\n            if (typeof allowedRemainingBytes === 'number') {\n                allowedRemainingBytes -= bytesRead;\n            }\n\n            // when buffer full, create a new one and emit it through stream\n            if (posInBuffer === buffer.byteLength) {\n                await target.write(transformer(buffer));\n\n                buffer = BinaryBuffer.alloc(Math.min(options.bufferSize, typeof allowedRemainingBytes === 'number' ? allowedRemainingBytes : options.bufferSize));\n\n                posInBuffer = 0;\n            }\n        } while (bytesRead > 0 && (typeof allowedRemainingBytes !== 'number' || allowedRemainingBytes > 0) && throwIfCancelled(token) && throwIfTooLarge(totalBytesRead, options));\n\n        // wrap up with last buffer (also respect maxBytes if provided)\n        if (posInBuffer > 0) {\n            let lastChunkLength = posInBuffer;\n            if (typeof allowedRemainingBytes === 'number') {\n                lastChunkLength = Math.min(posInBuffer, allowedRemainingBytes);\n            }\n\n            target.write(transformer(buffer.slice(0, lastChunkLength)));\n        }\n    } catch (error) {\n        throw ensureFileSystemProviderError(error);\n    } finally {\n        await provider.close(handle);\n    }\n}\n\nfunction throwIfCancelled(token: CancellationToken): boolean {\n    if (token.isCancellationRequested) {\n        throw canceled();\n    }\n\n    return true;\n}\n\nfunction throwIfTooLarge(totalBytesRead: number, options: CreateReadStreamOptions): boolean {\n\n    // Return early if file is too large to load and we have configured limits\n    if (options?.limits) {\n        if (typeof options.limits.memory === 'number' && totalBytesRead > options.limits.memory) {\n            throw createFileSystemProviderError('To open a file of this size, you need to restart and allow it to use more memory', FileSystemProviderErrorCode.FileExceedsMemoryLimit);\n        }\n\n        if (typeof options.limits.size === 'number' && totalBytesRead > options.limits.size) {\n            throw createFileSystemProviderError('File is too large to open', FileSystemProviderErrorCode.FileTooLarge);\n        }\n    }\n\n    return true;\n}\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar tslib_1 = require(\"tslib\");\nvar Semaphore_1 = require(\"./Semaphore\");\nvar Mutex = /** @class */ (function () {\n    function Mutex(cancelError) {\n        this._semaphore = new Semaphore_1.default(1, cancelError);\n    }\n    Mutex.prototype.acquire = function () {\n        return (0, tslib_1.__awaiter)(this, void 0, void 0, function () {\n            var _a, releaser;\n            return (0, tslib_1.__generator)(this, function (_b) {\n                switch (_b.label) {\n                    case 0: return [4 /*yield*/, this._semaphore.acquire()];\n                    case 1:\n                        _a = _b.sent(), releaser = _a[1];\n                        return [2 /*return*/, releaser];\n                }\n            });\n        });\n    };\n    Mutex.prototype.runExclusive = function (callback) {\n        return this._semaphore.runExclusive(function () { return callback(); });\n    };\n    Mutex.prototype.isLocked = function () {\n        return this._semaphore.isLocked();\n    };\n    Mutex.prototype.waitForUnlock = function () {\n        return this._semaphore.waitForUnlock();\n    };\n    /** @deprecated Deprecated in 0.3.0, will be removed in 0.4.0. Use runExclusive instead. */\n    Mutex.prototype.release = function () {\n        this._semaphore.release();\n    };\n    Mutex.prototype.cancel = function () {\n        return this._semaphore.cancel();\n    };\n    return Mutex;\n}());\nexports.default = Mutex;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar tslib_1 = require(\"tslib\");\nvar errors_1 = require(\"./errors\");\nvar Semaphore = /** @class */ (function () {\n    function Semaphore(_maxConcurrency, _cancelError) {\n        if (_cancelError === void 0) { _cancelError = errors_1.E_CANCELED; }\n        this._maxConcurrency = _maxConcurrency;\n        this._cancelError = _cancelError;\n        this._queue = [];\n        this._waiters = [];\n        if (_maxConcurrency <= 0) {\n            throw new Error('semaphore must be initialized to a positive value');\n        }\n        this._value = _maxConcurrency;\n    }\n    Semaphore.prototype.acquire = function () {\n        var _this = this;\n        var locked = this.isLocked();\n        var ticketPromise = new Promise(function (resolve, reject) {\n            return _this._queue.push({ resolve: resolve, reject: reject });\n        });\n        if (!locked)\n            this._dispatch();\n        return ticketPromise;\n    };\n    Semaphore.prototype.runExclusive = function (callback) {\n        return (0, tslib_1.__awaiter)(this, void 0, void 0, function () {\n            var _a, value, release;\n            return (0, tslib_1.__generator)(this, function (_b) {\n                switch (_b.label) {\n                    case 0: return [4 /*yield*/, this.acquire()];\n                    case 1:\n                        _a = _b.sent(), value = _a[0], release = _a[1];\n                        _b.label = 2;\n                    case 2:\n                        _b.trys.push([2, , 4, 5]);\n                        return [4 /*yield*/, callback(value)];\n                    case 3: return [2 /*return*/, _b.sent()];\n                    case 4:\n                        release();\n                        return [7 /*endfinally*/];\n                    case 5: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    Semaphore.prototype.waitForUnlock = function () {\n        return (0, tslib_1.__awaiter)(this, void 0, void 0, function () {\n            var waitPromise;\n            var _this = this;\n            return (0, tslib_1.__generator)(this, function (_a) {\n                if (!this.isLocked()) {\n                    return [2 /*return*/, Promise.resolve()];\n                }\n                waitPromise = new Promise(function (resolve) { return _this._waiters.push({ resolve: resolve }); });\n                return [2 /*return*/, waitPromise];\n            });\n        });\n    };\n    Semaphore.prototype.isLocked = function () {\n        return this._value <= 0;\n    };\n    /** @deprecated Deprecated in 0.3.0, will be removed in 0.4.0. Use runExclusive instead. */\n    Semaphore.prototype.release = function () {\n        if (this._maxConcurrency > 1) {\n            throw new Error('this method is unavailable on semaphores with concurrency > 1; use the scoped release returned by acquire instead');\n        }\n        if (this._currentReleaser) {\n            var releaser = this._currentReleaser;\n            this._currentReleaser = undefined;\n            releaser();\n        }\n    };\n    Semaphore.prototype.cancel = function () {\n        var _this = this;\n        this._queue.forEach(function (ticket) { return ticket.reject(_this._cancelError); });\n        this._queue = [];\n    };\n    Semaphore.prototype._dispatch = function () {\n        var _this = this;\n        var nextTicket = this._queue.shift();\n        if (!nextTicket)\n            return;\n        var released = false;\n        this._currentReleaser = function () {\n            if (released)\n                return;\n            released = true;\n            _this._value++;\n            _this._resolveWaiters();\n            _this._dispatch();\n        };\n        nextTicket.resolve([this._value--, this._currentReleaser]);\n    };\n    Semaphore.prototype._resolveWaiters = function () {\n        this._waiters.forEach(function (waiter) { return waiter.resolve(); });\n        this._waiters = [];\n    };\n    return Semaphore;\n}());\nexports.default = Semaphore;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.E_CANCELED = exports.E_ALREADY_LOCKED = exports.E_TIMEOUT = void 0;\nexports.E_TIMEOUT = new Error('timeout while waiting for mutex to become available');\nexports.E_ALREADY_LOCKED = new Error('mutex already locked');\nexports.E_CANCELED = new Error('request for lock canceled');\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.tryAcquire = exports.withTimeout = exports.Semaphore = exports.Mutex = void 0;\nvar tslib_1 = require(\"tslib\");\nvar Mutex_1 = require(\"./Mutex\");\nObject.defineProperty(exports, \"Mutex\", { enumerable: true, get: function () { return Mutex_1.default; } });\nvar Semaphore_1 = require(\"./Semaphore\");\nObject.defineProperty(exports, \"Semaphore\", { enumerable: true, get: function () { return Semaphore_1.default; } });\nvar withTimeout_1 = require(\"./withTimeout\");\nObject.defineProperty(exports, \"withTimeout\", { enumerable: true, get: function () { return withTimeout_1.withTimeout; } });\nvar tryAcquire_1 = require(\"./tryAcquire\");\nObject.defineProperty(exports, \"tryAcquire\", { enumerable: true, get: function () { return tryAcquire_1.tryAcquire; } });\n(0, tslib_1.__exportStar)(require(\"./errors\"), exports);\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.tryAcquire = void 0;\nvar errors_1 = require(\"./errors\");\nvar withTimeout_1 = require(\"./withTimeout\");\n// eslint-disable-next-lisne @typescript-eslint/explicit-module-boundary-types\nfunction tryAcquire(sync, alreadyAcquiredError) {\n    if (alreadyAcquiredError === void 0) { alreadyAcquiredError = errors_1.E_ALREADY_LOCKED; }\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    return (0, withTimeout_1.withTimeout)(sync, 0, alreadyAcquiredError);\n}\nexports.tryAcquire = tryAcquire;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.withTimeout = void 0;\nvar tslib_1 = require(\"tslib\");\nvar errors_1 = require(\"./errors\");\n// eslint-disable-next-line @typescript-eslint/explicit-module-boundary-types\nfunction withTimeout(sync, timeout, timeoutError) {\n    var _this = this;\n    if (timeoutError === void 0) { timeoutError = errors_1.E_TIMEOUT; }\n    return {\n        acquire: function () {\n            return new Promise(function (resolve, reject) { return (0, tslib_1.__awaiter)(_this, void 0, void 0, function () {\n                var isTimeout, handle, ticket, release, e_1;\n                return (0, tslib_1.__generator)(this, function (_a) {\n                    switch (_a.label) {\n                        case 0:\n                            isTimeout = false;\n                            handle = setTimeout(function () {\n                                isTimeout = true;\n                                reject(timeoutError);\n                            }, timeout);\n                            _a.label = 1;\n                        case 1:\n                            _a.trys.push([1, 3, , 4]);\n                            return [4 /*yield*/, sync.acquire()];\n                        case 2:\n                            ticket = _a.sent();\n                            if (isTimeout) {\n                                release = Array.isArray(ticket) ? ticket[1] : ticket;\n                                release();\n                            }\n                            else {\n                                clearTimeout(handle);\n                                resolve(ticket);\n                            }\n                            return [3 /*break*/, 4];\n                        case 3:\n                            e_1 = _a.sent();\n                            if (!isTimeout) {\n                                clearTimeout(handle);\n                                reject(e_1);\n                            }\n                            return [3 /*break*/, 4];\n                        case 4: return [2 /*return*/];\n                    }\n                });\n            }); });\n        },\n        runExclusive: function (callback) {\n            return (0, tslib_1.__awaiter)(this, void 0, void 0, function () {\n                var release, ticket;\n                return (0, tslib_1.__generator)(this, function (_a) {\n                    switch (_a.label) {\n                        case 0:\n                            release = function () { return undefined; };\n                            _a.label = 1;\n                        case 1:\n                            _a.trys.push([1, , 7, 8]);\n                            return [4 /*yield*/, this.acquire()];\n                        case 2:\n                            ticket = _a.sent();\n                            if (!Array.isArray(ticket)) return [3 /*break*/, 4];\n                            release = ticket[1];\n                            return [4 /*yield*/, callback(ticket[0])];\n                        case 3: return [2 /*return*/, _a.sent()];\n                        case 4:\n                            release = ticket;\n                            return [4 /*yield*/, callback()];\n                        case 5: return [2 /*return*/, _a.sent()];\n                        case 6: return [3 /*break*/, 8];\n                        case 7:\n                            release();\n                            return [7 /*endfinally*/];\n                        case 8: return [2 /*return*/];\n                    }\n                });\n            });\n        },\n        /** @deprecated Deprecated in 0.3.0, will be removed in 0.4.0. Use runExclusive instead. */\n        release: function () {\n            sync.release();\n        },\n        cancel: function () {\n            return sync.cancel();\n        },\n        waitForUnlock: function () { return sync.waitForUnlock(); },\n        isLocked: function () { return sync.isLocked(); },\n    };\n}\nexports.withTimeout = withTimeout;\n","/******************************************************************************\nCopyright (c) Microsoft Corporation.\n\nPermission to use, copy, modify, and/or distribute this software for any\npurpose with or without fee is hereby granted.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\nPERFORMANCE OF THIS SOFTWARE.\n***************************************************************************** */\n/* global Reflect, Promise, SuppressedError, Symbol, Iterator */\n\nvar extendStatics = function(d, b) {\n  extendStatics = Object.setPrototypeOf ||\n      ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n      function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n  return extendStatics(d, b);\n};\n\nexport function __extends(d, b) {\n  if (typeof b !== \"function\" && b !== null)\n      throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n  extendStatics(d, b);\n  function __() { this.constructor = d; }\n  d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n}\n\nexport var __assign = function() {\n  __assign = Object.assign || function __assign(t) {\n      for (var s, i = 1, n = arguments.length; i < n; i++) {\n          s = arguments[i];\n          for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n      }\n      return t;\n  }\n  return __assign.apply(this, arguments);\n}\n\nexport function __rest(s, e) {\n  var t = {};\n  for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n      t[p] = s[p];\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n      for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n          if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n              t[p[i]] = s[p[i]];\n      }\n  return t;\n}\n\nexport function __decorate(decorators, target, key, desc) {\n  var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n  else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n}\n\nexport function __param(paramIndex, decorator) {\n  return function (target, key) { decorator(target, key, paramIndex); }\n}\n\nexport function __esDecorate(ctor, descriptorIn, decorators, contextIn, initializers, extraInitializers) {\n  function accept(f) { if (f !== void 0 && typeof f !== \"function\") throw new TypeError(\"Function expected\"); return f; }\n  var kind = contextIn.kind, key = kind === \"getter\" ? \"get\" : kind === \"setter\" ? \"set\" : \"value\";\n  var target = !descriptorIn && ctor ? contextIn[\"static\"] ? ctor : ctor.prototype : null;\n  var descriptor = descriptorIn || (target ? Object.getOwnPropertyDescriptor(target, contextIn.name) : {});\n  var _, done = false;\n  for (var i = decorators.length - 1; i >= 0; i--) {\n      var context = {};\n      for (var p in contextIn) context[p] = p === \"access\" ? {} : contextIn[p];\n      for (var p in contextIn.access) context.access[p] = contextIn.access[p];\n      context.addInitializer = function (f) { if (done) throw new TypeError(\"Cannot add initializers after decoration has completed\"); extraInitializers.push(accept(f || null)); };\n      var result = (0, decorators[i])(kind === \"accessor\" ? { get: descriptor.get, set: descriptor.set } : descriptor[key], context);\n      if (kind === \"accessor\") {\n          if (result === void 0) continue;\n          if (result === null || typeof result !== \"object\") throw new TypeError(\"Object expected\");\n          if (_ = accept(result.get)) descriptor.get = _;\n          if (_ = accept(result.set)) descriptor.set = _;\n          if (_ = accept(result.init)) initializers.unshift(_);\n      }\n      else if (_ = accept(result)) {\n          if (kind === \"field\") initializers.unshift(_);\n          else descriptor[key] = _;\n      }\n  }\n  if (target) Object.defineProperty(target, contextIn.name, descriptor);\n  done = true;\n};\n\nexport function __runInitializers(thisArg, initializers, value) {\n  var useValue = arguments.length > 2;\n  for (var i = 0; i < initializers.length; i++) {\n      value = useValue ? initializers[i].call(thisArg, value) : initializers[i].call(thisArg);\n  }\n  return useValue ? value : void 0;\n};\n\nexport function __propKey(x) {\n  return typeof x === \"symbol\" ? x : \"\".concat(x);\n};\n\nexport function __setFunctionName(f, name, prefix) {\n  if (typeof name === \"symbol\") name = name.description ? \"[\".concat(name.description, \"]\") : \"\";\n  return Object.defineProperty(f, \"name\", { configurable: true, value: prefix ? \"\".concat(prefix, \" \", name) : name });\n};\n\nexport function __metadata(metadataKey, metadataValue) {\n  if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\n}\n\nexport function __awaiter(thisArg, _arguments, P, generator) {\n  function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n  return new (P || (P = Promise))(function (resolve, reject) {\n      function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n      function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n      function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n      step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n}\n\nexport function __generator(thisArg, body) {\n  var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g = Object.create((typeof Iterator === \"function\" ? Iterator : Object).prototype);\n  return g.next = verb(0), g[\"throw\"] = verb(1), g[\"return\"] = verb(2), typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n  function verb(n) { return function (v) { return step([n, v]); }; }\n  function step(op) {\n      if (f) throw new TypeError(\"Generator is already executing.\");\n      while (g && (g = 0, op[0] && (_ = 0)), _) try {\n          if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n          if (y = 0, t) op = [op[0] & 2, t.value];\n          switch (op[0]) {\n              case 0: case 1: t = op; break;\n              case 4: _.label++; return { value: op[1], done: false };\n              case 5: _.label++; y = op[1]; op = [0]; continue;\n              case 7: op = _.ops.pop(); _.trys.pop(); continue;\n              default:\n                  if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                  if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                  if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                  if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                  if (t[2]) _.ops.pop();\n                  _.trys.pop(); continue;\n          }\n          op = body.call(thisArg, _);\n      } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n      if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n  }\n}\n\nexport var __createBinding = Object.create ? (function(o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  var desc = Object.getOwnPropertyDescriptor(m, k);\n  if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n  }\n  Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n});\n\nexport function __exportStar(m, o) {\n  for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(o, p)) __createBinding(o, m, p);\n}\n\nexport function __values(o) {\n  var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\n  if (m) return m.call(o);\n  if (o && typeof o.length === \"number\") return {\n      next: function () {\n          if (o && i >= o.length) o = void 0;\n          return { value: o && o[i++], done: !o };\n      }\n  };\n  throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n}\n\nexport function __read(o, n) {\n  var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n  if (!m) return o;\n  var i = m.call(o), r, ar = [], e;\n  try {\n      while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n  }\n  catch (error) { e = { error: error }; }\n  finally {\n      try {\n          if (r && !r.done && (m = i[\"return\"])) m.call(i);\n      }\n      finally { if (e) throw e.error; }\n  }\n  return ar;\n}\n\n/** @deprecated */\nexport function __spread() {\n  for (var ar = [], i = 0; i < arguments.length; i++)\n      ar = ar.concat(__read(arguments[i]));\n  return ar;\n}\n\n/** @deprecated */\nexport function __spreadArrays() {\n  for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\n  for (var r = Array(s), k = 0, i = 0; i < il; i++)\n      for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\n          r[k] = a[j];\n  return r;\n}\n\nexport function __spreadArray(to, from, pack) {\n  if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n      if (ar || !(i in from)) {\n          if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n          ar[i] = from[i];\n      }\n  }\n  return to.concat(ar || Array.prototype.slice.call(from));\n}\n\nexport function __await(v) {\n  return this instanceof __await ? (this.v = v, this) : new __await(v);\n}\n\nexport function __asyncGenerator(thisArg, _arguments, generator) {\n  if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\n  var g = generator.apply(thisArg, _arguments || []), i, q = [];\n  return i = Object.create((typeof AsyncIterator === \"function\" ? AsyncIterator : Object).prototype), verb(\"next\"), verb(\"throw\"), verb(\"return\", awaitReturn), i[Symbol.asyncIterator] = function () { return this; }, i;\n  function awaitReturn(f) { return function (v) { return Promise.resolve(v).then(f, reject); }; }\n  function verb(n, f) { if (g[n]) { i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; if (f) i[n] = f(i[n]); } }\n  function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\n  function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\n  function fulfill(value) { resume(\"next\", value); }\n  function reject(value) { resume(\"throw\", value); }\n  function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\n}\n\nexport function __asyncDelegator(o) {\n  var i, p;\n  return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\n  function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: false } : f ? f(v) : v; } : f; }\n}\n\nexport function __asyncValues(o) {\n  if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\n  var m = o[Symbol.asyncIterator], i;\n  return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\n  function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\n  function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\n}\n\nexport function __makeTemplateObject(cooked, raw) {\n  if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\n  return cooked;\n};\n\nvar __setModuleDefault = Object.create ? (function(o, v) {\n  Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n  o[\"default\"] = v;\n};\n\nvar ownKeys = function(o) {\n  ownKeys = Object.getOwnPropertyNames || function (o) {\n    var ar = [];\n    for (var k in o) if (Object.prototype.hasOwnProperty.call(o, k)) ar[ar.length] = k;\n    return ar;\n  };\n  return ownKeys(o);\n};\n\nexport function __importStar(mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k = ownKeys(mod), i = 0; i < k.length; i++) if (k[i] !== \"default\") __createBinding(result, mod, k[i]);\n  __setModuleDefault(result, mod);\n  return result;\n}\n\nexport function __importDefault(mod) {\n  return (mod && mod.__esModule) ? mod : { default: mod };\n}\n\nexport function __classPrivateFieldGet(receiver, state, kind, f) {\n  if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\n  if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\n  return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\n}\n\nexport function __classPrivateFieldSet(receiver, state, value, kind, f) {\n  if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\n  if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\n  if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\n  return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\n}\n\nexport function __classPrivateFieldIn(state, receiver) {\n  if (receiver === null || (typeof receiver !== \"object\" && typeof receiver !== \"function\")) throw new TypeError(\"Cannot use 'in' operator on non-object\");\n  return typeof state === \"function\" ? receiver === state : state.has(receiver);\n}\n\nexport function __addDisposableResource(env, value, async) {\n  if (value !== null && value !== void 0) {\n    if (typeof value !== \"object\" && typeof value !== \"function\") throw new TypeError(\"Object expected.\");\n    var dispose, inner;\n    if (async) {\n      if (!Symbol.asyncDispose) throw new TypeError(\"Symbol.asyncDispose is not defined.\");\n      dispose = value[Symbol.asyncDispose];\n    }\n    if (dispose === void 0) {\n      if (!Symbol.dispose) throw new TypeError(\"Symbol.dispose is not defined.\");\n      dispose = value[Symbol.dispose];\n      if (async) inner = dispose;\n    }\n    if (typeof dispose !== \"function\") throw new TypeError(\"Object not disposable.\");\n    if (inner) dispose = function() { try { inner.call(this); } catch (e) { return Promise.reject(e); } };\n    env.stack.push({ value: value, dispose: dispose, async: async });\n  }\n  else if (async) {\n    env.stack.push({ async: true });\n  }\n  return value;\n}\n\nvar _SuppressedError = typeof SuppressedError === \"function\" ? SuppressedError : function (error, suppressed, message) {\n  var e = new Error(message);\n  return e.name = \"SuppressedError\", e.error = error, e.suppressed = suppressed, e;\n};\n\nexport function __disposeResources(env) {\n  function fail(e) {\n    env.error = env.hasError ? new _SuppressedError(e, env.error, \"An error was suppressed during disposal.\") : e;\n    env.hasError = true;\n  }\n  var r, s = 0;\n  function next() {\n    while (r = env.stack.pop()) {\n      try {\n        if (!r.async && s === 1) return s = 0, env.stack.push(r), Promise.resolve().then(next);\n        if (r.dispose) {\n          var result = r.dispose.call(r.value);\n          if (r.async) return s |= 2, Promise.resolve(result).then(next, function(e) { fail(e); return next(); });\n        }\n        else s |= 1;\n      }\n      catch (e) {\n        fail(e);\n      }\n    }\n    if (s === 1) return env.hasError ? Promise.reject(env.error) : Promise.resolve();\n    if (env.hasError) throw env.error;\n  }\n  return next();\n}\n\nexport function __rewriteRelativeImportExtension(path, preserveJsx) {\n  if (typeof path === \"string\" && /^\\.\\.?\\//.test(path)) {\n      return path.replace(/\\.(tsx)$|((?:\\.d)?)((?:\\.[^./]+?)?)\\.([cm]?)ts$/i, function (m, tsx, d, ext, cm) {\n          return tsx ? preserveJsx ? \".jsx\" : \".js\" : d && (!ext || !cm) ? m : (d + ext + \".\" + cm.toLowerCase() + \"js\");\n      });\n  }\n  return path;\n}\n\nexport default {\n  __extends,\n  __assign,\n  __rest,\n  __decorate,\n  __param,\n  __esDecorate,\n  __runInitializers,\n  __propKey,\n  __setFunctionName,\n  __metadata,\n  __awaiter,\n  __generator,\n  __createBinding,\n  __exportStar,\n  __values,\n  __read,\n  __spread,\n  __spreadArrays,\n  __spreadArray,\n  __await,\n  __asyncGenerator,\n  __asyncDelegator,\n  __asyncValues,\n  __makeTemplateObject,\n  __importStar,\n  __importDefault,\n  __classPrivateFieldGet,\n  __classPrivateFieldSet,\n  __classPrivateFieldIn,\n  __addDisposableResource,\n  __disposeResources,\n  __rewriteRelativeImportExtension,\n};\n"],"names":[],"sourceRoot":""}